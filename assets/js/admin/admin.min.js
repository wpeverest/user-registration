function ur_init_tooltips(e,t){if(undefined!==e&&null!==e&&""!==e){var i={theme:"tooltipster-borderless",maxWidth:200,multiple:!0,interactive:!0,position:"bottom",contentAsHTML:!0,functionInit:function(e,t){var i=jQuery(t.origin).attr("data-tip");i&&e.content(i)}};t&&"object"==typeof t&&Object.keys(t).forEach(function(e){i[e]=t[e]}),"string"==typeof e?jQuery(e).tooltipster(i):e.tooltipster(i)}}function ur_confirmation(e,t){void 0===t&&(t={});var i='<i class="dashicons dashicons-trash"></i><span class="user-registration-swal2-modal__title">'+t.title;Swal.fire({customClass:"user-registration-swal2-modal user-registration-swal2-modal--centered user-registration-trashed",title:i,text:e,showCancelButton:"undefined"==typeof t.showCancelButton||t.showCancelButton,confirmButtonText:"undefined"!=typeof t.confirmButtonText?t.confirmButtonText:user_registration_form_builder_data.i18n_admin.i18n_choice_delete,confirmButtonColor:"#ff4149",cancelButtonText:"undefined"!=typeof t.cancelButtonText?t.cancelButtonText:user_registration_form_builder_data.i18n_admin.i18n_choice_cancel}).then(function(e){e.value?t.confirm():t.reject()})}jQuery(function(e){e(document.body).on("input","#ur-search-fields",function(){var t=e(this).val().toLowerCase();e(".ur-registered-item").each(function(){e(this).text().toLowerCase().search(t)>-1?(e(this).addClass("ur-searched-item"),e(this).show()):(e(this).removeClass("ur-searched-item"),e(this).hide())}),e(".ur-registered-list").each(function(){var t=e(this).find(".ur-registered-item.ur-searched-item").length,i=e(this).prev("hr"),r=e(this).prev("hr").prev(".ur-toggle-heading");0===t?(i.hide(),r.hide(),e(this).hide()):(i.show(),r.show(),e(this).show())}),e(".ur-registered-item.ur-searched-item").length?e(".ur-fields-not-found").hide():e(".ur-fields-not-found").show()}),e(document).on("mousedown",".ur-locked-field",function(t){t.preventDefault();var i='<i class="dashicons dashicons-lock" style="color:#72aee6; border-color: #72aee6;"></i>';if(e(this).hasClass("ur-one-time-draggable-disabled")){var r=i+'<span class="user-registration-swal2-modal__title">'+user_registration_form_builder_data.form_one_time_draggable_fields_locked_title.replace("%field%",e(this).text())+"</span>",s=user_registration_form_builder_data.form_one_time_draggable_fields_locked_message.replace("%field%",e(this).text());Swal.fire({title:r,html:s,showCloseButton:!0,customClass:"user-registration-swal2-modal user-registration-swal2-modal--center user-registration-locked-field"}).then(function(e){})}else{var n=e(this).data("field-data");r=i+'<span class="user-registration-swal2-modal__title">'+n.title+"</span>";Swal.fire({title:r,html:n.message,showCloseButton:!0,customClass:"user-registration-swal2-modal user-registration-swal2-modal--center user-registration-locked-field",confirmButtonText:n.button_title}).then(function(e){if(e.value){var t=n.link;window.open(t,"_blank")}})}}),e(document).on("click",".ur-upgradable-field",function(t){t.preventDefault();var i=e(this).data("plan"),r=e(this).data("name"),s=e(this).data("video"),n=e(this).data("slug"),a=e(this);""!=n&&""!=i&&e.ajax({url:user_registration_locked_form_fields_notice_params.ajax_url,type:"POST",data:{action:"user_registration_locked_form_fields_notice",slug:n,plan:i,name:r,video_id:s,security:user_registration_locked_form_fields_notice_params.user_registration_locked_form_fields_notice_nonce},success:function(t){if(""!==s)var n='<div style="width: 535px; height: 300px;"><iframe width="100%" height="100%" frameborder="0" src="https://www.youtube.com/embed/'+s+'" rel="1" allowfullscreen></iframe></div><br>';var o=e(t.data.action_button).find("a");o.length||(o=e(t.data.action_button).find("form"));var l='<i class="dashicons dashicons-lock" style="color:#72aee6; border-color: #72aee6;"></i><span class="user-registration-swal2-modal__title" > ';if(o.hasClass("activate-license-now")){var d=user_registration_locked_form_fields_notice_params.license_activation_required_message;l+=user_registration_locked_form_fields_notice_params.license_activation_required_title}else if(o.hasClass("activate-now")){d=user_registration_locked_form_fields_notice_params.activation_required_message.replace("%plugin%",r);l+=user_registration_locked_form_fields_notice_params.activation_required_title}else if(o.hasClass("install-now")){d=user_registration_locked_form_fields_notice_params.installation_required_message.replace("%plugin%",r);l+=user_registration_locked_form_fields_notice_params.installation_required_title}else{d=user_registration_locked_form_fields_notice_params.unlock_message.replace("%field%",a.text()).replace("%plan%",i);l+=a.text()+" "+user_registration_locked_form_fields_notice_params.lock_message}l+="</span>",d=n+d+"<br><br>"+t.data.action_button,Swal.fire({title:l,html:d,customClass:"user-registration-swal2-modal user-registration-swal2-modal--centered user-registration-locked-field",showCloseButton:!0,showConfirmButton:!1,allowOutsideClick:!0,heightAuto:!1,width:"575px"}).then(function(e){})}})}),e(window).on("resize orientationchange",function(){var t;clearTimeout(t),t=setTimeout(function(){e(document.body).trigger("adjust_builder_width")},250)}),e(document.body).on("click","#collapse-button",function(){e(document.body).trigger("ur_adjust_builder_width")}),e(document.body).on("ur_adjust_builder_width",function(){var t=e("#adminmenuwrap").width(),i=e(".user-registration_page_add-new-registration .ur-form-subcontainer .menu-edit"),r=e(".user-registration_page_add-new-registration .ur-form-subcontainer .ur-loading-container");i.css({left:t+"px"}),r.fadeOut(1e3)}).trigger("ur_adjust_builder_width"),e(document.body).on("click",".user-registration-editable-title__icon",function(){var t=e(this).siblings(".user-registration-editable-title__input");t.hasClass("is-editing")||t.trigger("focus"),t.toggleClass("is-editing"),t.attr("data-editing","true"==t.attr("data-editing")?"false":"true")}),e("#ur-form-name").on("change",function(){e(".ur-form-title").text(e(this).val())}),e(document).not(e(".user-registration-editable-title")).on("click",function(t){var i=e(".user-registration-editable-title__input");"ur-form-name"!==t.target.id&&"ur-form-name-edit-button"!==t.target.id&&!i.attr("hidden")&&i.hasClass("is-editing")&&(t.stopPropagation(),"true"!==i.data("data-editing")&&i.val()&&""!==i.val().trim()&&i.toggleClass("is-editing").trigger("blur").attr("data-editing","true"==i.attr("data-editing")?"false":"true"))}),e(document).on("init_perfect_scrollbar update_perfect_scrollbar",function(){if("undefined"!=typeof PerfectScrollbar){var t=e(".ur-tab-contents");if(t.length>=1&&"undefined"==typeof window.ur_tab_scrollbar){window.ur_tab_scrollbar=new PerfectScrollbar(document.querySelector(".ur-tab-contents"),{suppressScrollX:!0});var i=document.querySelector("#ur-collapse");i.addEventListener("click",function(){i.classList.contains("open")?(e(i).removeClass("open"),e(i).addClass("close")):(e(i).addClass("open"),e(i).removeClass("close"));var t=document.querySelector(".ur-registered-inputs");t.classList.contains("collapsed")?(t.classList.remove("collapsed"),e(".ur-registered-inputs").find("nav.ur-tabs").show(),e(".ur-registered-inputs").css("width","412px"),window.ur_tab_scrollbar.update()):(t.classList.add("collapsed"),e(".ur-registered-inputs").css("width","0px"),e(".ur-registered-inputs").find("nav.ur-tabs").hide())})}else"undefined"!=typeof window.ur_tab_scrollbar&&(window.ur_tab_scrollbar.update(),t.scrollTop(0))}}),e(document).ready(function(){e(document).trigger("init_perfect_scrollbar");var t=e(".ur-selected-inputs"),i=e(".ur-registered-inputs nav").find("#ur-tab-field-settings");i.find("form").appendTo(t),t.find("form #ur-field-all-settings > div").each(function(t,r){var s=e(r).find("h3").text(),n=e(r).attr("id");i.append('<div id="'+n+'" class="form-settings-tab">'+s+"</div>"),e(r).hide()}),i.find("#general-settings").addClass("active"),t.find("#ur-field-all-settings div#general-settings").show(),i.find(".form-settings-tab").on("click",function(){this_id=e(this).attr("id"),e(this).siblings().removeClass("active"),e(this).addClass("active"),t.find("form #ur-field-all-settings > div").hide(),t.find("form #ur-field-all-settings > div#"+this_id).show(),e(document).trigger("update_perfect_scrollbar"),e(".ur-builder-wrapper").scrollTop(0)})}),e(document).on("click",'.ur-tab-lists li[role="tab"] a.nav-tab',function(t,i){e(document).trigger("update_perfect_scrollbar"),"triggered_click"!=i&&(e(".ur-builder-wrapper").scrollTop(0),e(".ur-builder-wrapper-content").scrollTop(0))}),e(document).on("click",'.ur-tab-lists li[aria-controls="ur-tab-field-settings"]',function(){e(".ur-builder-wrapper-content").hide(),e(".ur-builder-wrapper-footer").hide(),e(".ur-selected-inputs").find("form#ur-field-settings").show()}),e(document).on("click",'ul.ur-tab-lists li[aria-controls="ur-tab-registered-fields"]',function(){e(".ur-builder-wrapper-content").show(),e(".ur-builder-wrapper-footer").show(),e(".ur-selected-inputs").find("form#ur-field-settings").hide(),e("#user_registration_form_setting_redirect_after_field").hide()});var t=e("#general-settings").find("#user_registration_form_setting_minimum_password_strength_field"),i=e("#general-settings").find("#user_registration_form_setting_enable_strong_password_field input#user_registration_form_setting_enable_strong_password"),r=i.is(":checked");r?t.show():t.hide();var s=t.find("[data-id='user_registration_form_setting_minimum_password_strength']");e(document).ready(function(){function i(e){switch(e){case"0":r=user_registration_form_builder_data.user_registration_very_weak_password_info;break;case"1":r=user_registration_form_builder_data.user_registration_weak_password_info;break;case"2":r=user_registration_form_builder_data.user_registration_medium_password_info;break;case"3":r=user_registration_form_builder_data.user_registration_strong_password_info;break;default:r=""}t.append("<span class='description' style='margin-bottom: 20px'>"+r+"</span>")}var r="",n="";s.each(function(){if(e(this).is(":checked")){i(e(this).val())}}),e(s).on("change",function(){n=t.find("span").not(".user-registration-help-tip");var r="";e(this).is(":checked")&&(r=e(this).val()),n.remove(),i(r)})}),e(i).on("change",function(){(r=e(this).is(":checked"))?t.show("slow"):t.hide("slow")}),e(document).ready(function(){n(),e("#user_registration_form_setting_redirect_after_registration").on("change",n)});var n=function(){var t=e("#user_registration_form_setting_redirect_after_registration").find(":selected"),i=e("#user_registration_form_setting_redirect_page").closest(".form-row").slideUp(800),r=e("#user_registration_form_setting_redirect_options").closest(".form-row").slideUp(800);if(t.length)switch(t.val()){case"internal-page":e("#user_registration_form_setting_redirect_after_field").show(),i.slideDown(800);break;case"external-url":e("#user_registration_form_setting_redirect_after_field").show(),r.slideDown(800);break;case"no-redirection":e("#user_registration_form_setting_redirect_after_field").hide();break;case"previous-page":e("#user_registration_form_setting_redirect_after_field").show()}};if(e("#user_registration_form_setting_redirect_after").on("change input paste",function(t){t.preventDefault(),t.stopPropagation();var i=e(t.target);i.val(Math.abs(i.val()))}),e(document.body).on("init_tooltips",function(){ur_init_tooltips(".tips, .help_tip, .user-registration-help-tip"),ur_init_tooltips(".ur-copy-shortcode, .ur-portal-tooltip",{keepAlive:!1}),e(".parent-tips").each(function(){e(this).closest("a, th").attr("data-tip",e(this).data("tip")).tooltipster().css("cursor","help")})}).trigger("init_tooltips"),e("body").on("keypress","#ur-form-name",function(t){13===t.which&&e("#save_form_footer").eq(0).trigger("click")}),e("#ur-full-screen-mode").on("click",function(t){t.preventDefault();var i=e(this);i.hasClass("closed")?(i.removeClass("closed"),i.addClass("opened"),e("body").addClass("ur-full-screen-mode")):(i.removeClass("opened"),i.addClass("closed"),e("body").removeClass("ur-full-screen-mode"))}),e(document).on("keyup",function(t){"Escape"===t.key&&e("#ur-full-screen-mode.opened").trigger("click")}),e("input.input-color").wpColorPicker(),e(".user_registration_send_email_test").on("click",function(t){var i=e("#user_registration_email_send_to").val();t.preventDefault(),e.ajax({url:user_registration_send_email.ajax_url,data:{action:"user_registration_send_test_email",email:i,nonce:user_registration_send_email.test_email_nonce},type:"post",beforeSend:function(){e(".user_registration_send_email_test").append('<span class="ur-spinner is-active" style="margin-left: 20px"></span>')},complete:function(t){e(".ur-spinner").remove(),e(".user-registration_page_user-registration-settings .notice").remove(),!0===t.responseJSON.success?(message_string='<div class="success notice notice-success is-dismissible"><p><strong>'+t.responseJSON.data.message+"</strong></p></div>",e(".user-registration-options-container").prepend(message_string)):(message_string='<div class="error notice notice-error is-dismissible"><p><strong>'+t.responseJSON.data.message+"</strong></p></div>",e(".user-registration-options-container").prepend(message_string)),e(".user-registration_page_user-registration-settings .notice").css("display","block"),e(window).scrollTop(e(".notice").position())}})}),e(".user-registration-email-status-toggle").on("change",function(t){t.preventDefault();var i=e(this).find('input[type="checkbox"]').is(":checked"),r=e(this).find('input[type="checkbox"]').attr("id");e.ajax({url:user_registration_email_setting_status.ajax_url,type:"POST",data:{action:"user_registration_email_setting_status",status:i,id:r,security:user_registration_email_setting_status.user_registration_email_setting_status_nonce},success:function(e){}})}),e("#ur-lists-page-settings-button").on("click",function(){e("#show-settings-link").click()}),e(document).find(".ur-form-locate").on("click",function(t){var i={action:"user_registration_locate_form_action",id:e(this).data("id"),security:user_registration_admin_locate.ajax_locate_nonce},r=t.target.closest(".row-actions");e.ajax({url:user_registration_admin_locate.ajax_url,dataType:"json",cache:!1,data:i,type:"POST",beforeSend:function(){e(r).append('<i class="ur-spinner ur-spinner-active"></i>')},success:function(t){if(Object.keys(t.data).length>0){var i='<div class = "locate-form"><span>'+user_registration_admin_locate.form_found+"</span>",s=1;e.each(t.data,function(e,t){s>1&&(i+=", ");var r=e.split(" ");if(r.length>4){e=r.slice(0,4).join(" "),e+="..."}i+=' <a href="'+t+'" target="_blank">'+e+"</a>",s++}),i+="</div>",0!=e(r).find(".locate-form").length&&e(r).find(".locate-form").remove(),e(r).find("span:first").prepend(i)}else 0!=e(r).find(".locate-form").length&&e(r).find(".locate-form").remove(),e(r).find("span:first").prepend('<div class = "locate-form"><span>'+user_registration_admin_locate.form_found_error+"</span></div>");e(r).find(".ur-spinner").remove()}})}),e("#ur-smart-tags-selector").siblings(".ur_advance_setting").length>0){var a=e("#ur-smart-tags-selector");e(a).insertBefore(e("#ur-smart-tags-selector").siblings(".ur_advance_setting")),e("#select-smart-tags").insertAfter(e(a)),e(a).css({position:"absolute",left:"65%",top:"-10px"})}e("#ur-smart-tags-selector").closest(".wp-media-buttons").length>0&&e("#ur-smart-tags-selector").closest(".wp-media-buttons").css({width:"100%",position:"relative"}),e(document.body).on("click","#ur-smart-tags-selector",function(){var t=e(this);e(this).siblings("#select-smart-tags").select2({placeholder:"",dropdownCssClass:"ur-select2-dropdown",templateResult:function(i,r){return t.siblings(".ur_advance_setting").length>0&&i.element&&e(r).addClass("ur-select-smart-tag"),i.text}}),e(this).siblings(".select2-container").addClass("ur-hide-select2"),e(this).siblings("#select-smart-tags").select2("open"),e(this).siblings(".select2-container").find(".select2-selection__rendered").show(),e(this).siblings(".select2-container").find(".select2-selection--open").show();var i=e(this).offset(),r=Math.round(i.top+e(this).innerHeight()),s=Math.round(i.left),n=e(".select2-container--open:not(.ur-hide-select2)");n.css({top:r,left:s-e(this).innerHeight()-10});var a='<span class="ur-select2-title"><p>'+user_registration_admin_data.smart_tags_dropdown_title+"</p></span>";e(a).insertBefore(n.find(".select2-search"));var o=n.find(".select2-search__field");o.attr("placeholder",user_registration_admin_data.smart_tags_dropdown_search_placeholder),o.before('<span class="search-icon"><svg xmlns="http://www.w3.org/2000/svg" height="16px" width="16px" viewBox="0 0 24 24" fill="#a1a4b9"><path d="M21.71,20.29,18,16.61A9,9,0,1,0,16.61,18l3.68,3.68a1,1,0,0,0,1.42,0A1,1,0,0,0,21.71,20.29ZM11,18a7,7,0,1,1,7-7A7,7,0,0,1,11,18Z"></path></svg></span>'),e("#select-smart-tags").on("change",function(t){t.preventDefault();var i=e(this).val(),r=e(this).closest(".ur-advance-setting").find("input"),s=r.data("advance-field"),n=r.data("field");!function(t,i){active_field=e(".ur-item-active"),target_input_field=e(active_field).find(".user-registration-field-option-group.ur-advance-setting-block"),ur_toggle_content=target_input_field.find(".ur-advance-setting.ur-advance-default_value"),target_input=e(ur_toggle_content).find('input[data-advance-field="'+t+'"]'),target_textarea=e(ur_toggle_content).find('input[data-advance-field="'+t+'"]'),target_input_hidden_field=e(active_field).find(".ur-general-setting-block"),ur_toggle_hidden_content=target_input_hidden_field.find(".ur-general-setting.ur-general-setting-hidden-value"),target_hidden_input=e(ur_toggle_hidden_content).find('input[data-field="'+t+'"]'),ur_toggle_pattern_content=target_input_field.find(".ur-advance-setting.ur-advance-pattern_value"),target_pattern_input=e(ur_toggle_pattern_content).find('input[data-advance-field="'+t+'"]'),target_input.val(i),target_textarea.val(i),target_hidden_input.val(i),target_pattern_input.val(i)}(s!==undefined?s:n,i),r.val(i),e(document.body).find(".ur-smart-tags-list").hide()})})}),function(e,t){e(function(){e(".ur_import_form_action_button").on("click",function(){var i=e("#jsonfile").prop("files")[0],r=new FormData;r.append("jsonfile",i),r.append("action","user_registration_import_form_action"),r.append("security",t.ur_import_form_save),e.ajax({url:t.ajax_url,dataType:"json",cache:!1,contentType:!1,processData:!1,data:r,type:"post",beforeSend:function(){e(".ur_import_form_action_button").closest(".publishing-action").append('<span class="spinner is-active" style="float: left;margin-top: 6px;"></span>'),e(".ur-import_notice").remove()},complete:function(i){var r="";e(".ur_import_form_action_button").closest(".publishing-action").find(".spinner").remove(),e(".ur-import_notice").remove(),r=!0===i.responseJSON.success?'<div id="message" class="updated inline ur-import_notice"><p><strong>'+i.responseJSON.data.message+"</strong></p></div>":'<div id="message" class="error inline ur-import_notice"><p><strong>'+i.responseJSON.data.message+"</strong></p></div>",e(".ur-export-users-page").prepend(r),e("#jsonfile").val(""),e(".user-registration-custom-selected-file").html(t.no_file_selected)}})}),e(".ur_export_form_action_button").on("click",function(){var i=e("#selected-export-forms").val();e(document).find("#message").remove(),0===i.length?(message_string='<div id="message" class="error inline ur-import_notice"><p><strong>'+t.export_error_message+"</strong></p></div>",e(".ur-export-users-page").prepend(message_string)):e(".ur_export_form_action_button").attr("type","submit")}),e(".ur_export_user_action_button").on("click",function(){var i=e("#selected-export-user-form").val();e(document).find("#message").remove(),0===i.length?(message_string='<div id="message" class="error inline ur-import_notice"><p><strong>'+t.export_error_message+"</strong></p></div>",e(".ur-export-users-page").prepend(message_string)):e(".ur_export_user_action_button").attr("type","submit")})})}(jQuery,window.user_registration_admin_data);