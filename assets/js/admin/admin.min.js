function ur_alert(e,t){alert(e)}function ur_confirmation(e,t){!0===confirm(e)&&"confirm"in t?t.confirm():"reject"in t&&t.reject()}jQuery(function(e){e(window).on("resize orientationchange",function(){var t;clearTimeout(t),t=setTimeout(function(){e(document.body).trigger("adjust_builder_width")},250)}),e(document.body).on("click","#collapse-button",function(){e(document.body).trigger("ur_adjust_builder_width")}),e(document.body).on("ur_adjust_builder_width",function(){var t=e("#adminmenuwrap").width(),i=e(".user-registration_page_add-new-registration .ur-form-subcontainer .menu-edit"),r=e(".user-registration_page_add-new-registration .ur-form-subcontainer .ur-loading-container");i.css({left:t+"px"}),r.fadeOut(1e3)}).trigger("ur_adjust_builder_width"),e(document.body).on("click",".ur-form-container .ur-registered-from .ur-form-name-wrapper .ur-edit-form-name",function(){var t=e(this).siblings("#ur-form-name");t.hasClass("ur-editing")||t.focus(),t.toggleClass("ur-editing")}),e(document).ready(function(){var t=e(".ur-selected-inputs"),i=e(".ur-registered-inputs nav").find("#ur-tab-field-settings");i.find("form").appendTo(t),t.find("form #ur-field-all-settings > div").each(function(t,r){var a=e(r).find("h3").text(),n=e(r).attr("id");i.append('<div id="'+n+'" class="form-settings-tab">'+a+"</div>"),e(r).hide()}),i.find("#general-settings").addClass("active"),t.find("#ur-field-all-settings div#general-settings").show(),i.find(".form-settings-tab").on("click",function(){this_id=e(this).attr("id"),e(this).siblings().removeClass("active"),e(this).addClass("active"),t.find("form #ur-field-all-settings > div").hide(),t.find("form #ur-field-all-settings > div#"+this_id).show()})}),e(document).on("click",'.ur-tab-lists li[aria-controls="ur-tab-field-settings"]',function(){e(".ur-builder-wrapper-content").hide(),e(".ur-builder-wrapper-footer").hide(),e(".ur-selected-inputs").find("form#ur-field-settings").show()}),e(document).on("click",'ul.ur-tab-lists li[aria-controls="ur-tab-registered-fields"]',function(){e(".ur-builder-wrapper-content").show(),e(".ur-builder-wrapper-footer").show(),e(".ur-selected-inputs").find("form#ur-field-settings").hide()});var t=e("#general-settings").find("#user_registration_form_setting_minimum_password_strength_field"),i=e("#general-settings").find("#user_registration_form_setting_enable_strong_password_field select#user_registration_form_setting_enable_strong_password");"yes"===i.val()?t.show():t.hide(),e(i).change(function(){"yes"===e(this).val()?t.show("slow"):t.hide("slow")}),e(document.body).on("init_tooltips",function(){var t={attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200,keepAlive:!0};e(".tips, .help_tip, .user-registration-help-tip").tipTip(t),t.keepAlive=!1,e(".ur-copy-shortcode").tipTip(t),e(".parent-tips").each(function(){e(this).closest("a, th").attr("data-tip",e(this).data("tip")).tipTip(t).css("cursor","help")})}).trigger("init_tooltips"),e("body").on("keypress","#ur-form-name",function(t){13===t.which&&e("#save_form_footer").eq(0).trigger("click")}),e("#ur-full-screen-mode").on("click",function(t){t.preventDefault();var i=e(this);i.hasClass("closed")?(i.removeClass("closed"),i.addClass("opened"),e("body").addClass("ur-full-screen-mode")):(i.removeClass("opened"),i.addClass("closed"),e("body").removeClass("ur-full-screen-mode"))}),e(document).on("keyup",function(t){"Escape"===t.key&&e("#ur-full-screen-mode.opened").trigger("click")}),e("input.input-color").wpColorPicker()}),function(e,t){function i(){var i=function(){var i=e.makeArray(t.form_one_time_draggable_fields),r=e.makeArray(t.form_required_fields),a={validation_status:!0,message:""};if(0===e(".ur-selected-item").length)return a.validation_status=!1,a.message=g.i18n_at_least_one_field_need_to_select,a;if(""===e("#ur-form-name").val())return a.validation_status=!1,a.message=g.i18n_empty_form_name,a;if(e(".ur_save_form_action_button").closest(".publishing-action").find(".spinner").length>0)return a.validation_status=!1,a.message=g.i18n_previous_save_action_ongoing,a;e.each(e('.ur-input-grids .ur-general-setting-block input[data-field="field_name"]'),function(){var t,i=e(this),r=!1;try{var n=i.val(),s=e(".ur-input-grids .ur-general-setting-block").find('input[data-field="field_name"][value="'+n+'"]').length;if(s>1)throw g.i18n_duplicate_field_name;if(""===i.closest(".ur-general-setting-block").find('input[data-field="label"]').val())throw i=i.closest(".ur-general-setting-block").find('input[data-field="label"]'),g.i18n_empty_field_label;var d=n.match(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/gm);if(null===d||1!==d.length||d[0]!==n)throw g.i18n_invald_field_name}catch(l){a.validation_status=!1,a.message=l.message===undefined?l:l.message,i.closest(".ur-selected-item").trigger("click"),t=i.attr("data-field"),e("#ur-setting-form").find('input[data-field="'+t+'"]').css({border:"1px solid red"}),setTimeout(function(){e("#ur-setting-form").find('input[data-field="'+t+'"]').removeAttr("style")},2e3),r=!0}if(r)return!1});for(var n=0;n<i.length;n++)if(e(".ur-input-grids").find('.ur-field[data-field-key="'+i[n]+'"]').length>1){a.validation_status=!1,a.message=g.i18n_multiple_field_key+i[n];break}for(var s=0;s<r.length;s++)if(0===e(".ur-input-grids").find('.ur-field[data-field-key="'+r[s]+'"]').length){if(a.validation_status=!1,0===s)var d=g.i18n_user_email;else if(1===s)var d=g.i18n_user_password;a.message=d+" "+g.i18n_field_is_required;break}return a}();if(!1!==i.validation_status){var n=function(){var t=[],i=e(".ur-input-grids .ur-single-row");return e.each(i,function(){var i=e(this).find(".ur-grid-list-item"),r=[];e.each(i,function(){var t=function(t){var i=t.find(".ur-selected-item"),r=[];return e.each(i,function(){var t=e(this),i={field_key:t.find(".ur-field").attr("data-field-key"),general_setting:function(t){var i=t.find(".ur-general-setting-block").find(".ur-general-setting-field"),r={},n=[],s=[];return e.each(i,function(){var t=e(this).closest(".ur-general-setting-block").hasClass("ur-general-setting-checkbox");"options"===e(this).attr("data-field")?(r.options=n.push(a(e(this))),r.options=n):"default_value"===e(this).attr("data-field")?!0===t?e(this).is(":checked")&&(r.default_value=s.push(a(e(this))),r.default_value=s):e(this).is(":checked")&&(r.default_value=a(e(this))):r[e(this).attr("data-field")]=a(e(this))}),r}(t),advance_setting:function(t){var i=t.find(".ur-advance-setting-block").find(".ur_advance_setting"),r={};return e.each(i,function(){r[e(this).attr("data-advance-field")]=a(e(this))}),r}(t)};r.push(i)}),r}(e(this));r.push(t)}),t.push(r)}),t}(),s=function(){var t=[],i=e(".ur-input-grids .ur-single-row");return e.each(i,function(){t.push(e(this).attr("data-row-id"))}),t}(),d=e("#ur_form_id").val();f(t.post_id)!==f(d)&&(d=0);var l=e("#ur-field-settings").serializeArray(),o=e("#ur-multi-part-page-settings").serializeArray(),u={action:"user_registration_form_save_action",security:t.ur_form_save,data:{form_data:JSON.stringify(n),form_row_ids:JSON.stringify(s),form_name:e("#ur-form-name").val(),form_id:d,form_setting_data:l,multipart_page_setting:o}};e.ajax({url:t.ajax_url,data:u,type:"POST",beforeSend:function(){e(".ur_save_form_action_button").closest(".publishing-action").append('<span class="spinner is-active" style="float: left;margin-top: 6px;"></span>'),e(".ur-notices").remove()},complete:function(i){if(e(".ur_save_form_action_button").closest(".publishing-action").find(".spinner").remove(),!0===i.responseJSON.success){r(g.i18n_form_successfully_saved,"success");var a=t.admin_url+i.responseJSON.data.post_id;window.location=a}else{r(i.responseJSON.data.message)}}})}else r(i.message)}function r(t,i){var r;r="success"===i?'<div class="updated ur-notices" style="border-color: green;"><p><strong>'+g.i18n_success+"! </strong>"+t+"</p></div>":'<div class="updated ur-notices" style="border-color: red;"><p><strong>'+g.i18n_error+"!!! </strong>"+t+"</p></div>",e(".ur-form-subcontainer").find(".ur-notices").remove(),e(".ur-form-subcontainer").prepend(r),e("html, body").animate({scrollTop:e(".ur-notices").offset().top-50},600)}function a(e){var t="";switch(e.get(0).tagName.toLowerCase()){case"input":case"select":case"textarea":t=e.val()}return t}function n(){var t=e(".ur-general-setting-field");e.each(t,function(){var t=e(this);switch(t.attr("data-field")){case"label":t.on("keyup",function(){!function(t){e(".ur-selected-item.ur-item-active").find(".ur-label").find("label").text(t.val());e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').attr("value",t.val())}(e(this))});break;case"field_name":case"input_mask":t.on("change",function(){!function(t){e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').attr("value",t.val())}(e(this))});case"default_value":t.on("change",function(){"default_value"===t.attr("data-field")&&(t.closest(".ur-general-setting-block").hasClass("ur-general-setting-select")?o(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-radio")?l(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-checkbox")&&d(e(this)))});break;case"options":t.on("keyup",function(){t.closest(".ur-general-setting-block").hasClass("ur-general-setting-select")&&t.siblings('input[data-field="default_value"]').is(":checked")?o(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-radio")?l(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-checkbox")&&d(e(this)),function(t){var i=e(".ur-selected-item.ur-item-active"),r=t.closest("li").index();i.find(".ur-general-setting-block li:nth("+r+') input[data-field="'+t.attr("data-field")+'"]').attr("value",t.val()),i.find(".ur-general-setting-block li:nth("+r+') input[data-field="default_value"]').val(t.val()),t.closest("li").find('[data-field="default_value"]').val(t.val())}(e(this))});break;case"placeholder":t.on("keyup",function(){!function(t){var i=e(".ur-selected-item.ur-item-active");i.find(".ur-field").find("input").attr("placeholder",t.val()),i.find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').val(t.val())}(e(this))});break;case"required":t.on("change",function(){!function(t){var i=e(".ur-selected-item.ur-item-active");i.find(".ur-label").find("label").find("span").remove(),"yes"===t.val()&&i.find(".ur-label").find("label").append('<span style="color:red">*</span>');i.find(".ur-general-setting-block").find('select[data-field="'+t.attr("data-field")+'"]').find('option[value="'+t.val()+'"]').attr("selected","selected")}(e(this))});break;case"hide_label":t.on("change",function(){!function(t){var i=e(".ur-selected-item.ur-item-active");i.find(".ur-label").find("label").find("span").remove(),i.find(".ur-general-setting-block").find('select[data-field="'+t.attr("data-field")+'"]').find('option[value="'+t.val()+'"]').attr("selected","selected")}(e(this))});break;case"description":case"html":t.on("keyup",function(){!function(t){var i=e(".ur-selected-item.ur-item-active");i.find(".ur-field").find("textarea").attr("description",t.val()),i.find(".ur-general-setting-block").find('textarea[data-field="'+t.attr("data-field")+'"]').val(t.val())}(e(this))})}});var i=e(".ur_advance_setting");e.each(i,function(){var t=e(this),i=t.get(0).tagName.toLowerCase(),r="change";switch(i){case"input":r="keyup";break;case"select":r="change";break;case"textarea":r="keyup";break;default:r="change"}e(this).on(r,function(){s(t,i)}),e(this).on("paste",function(){s(t,i)})})}function s(t,i){var r=e(".ur-selected-item.ur-item-active"),a=t.attr("data-id"),n=r.find(".ur-advance-setting-block").find('[data-id="'+a+'"]');switch(i){case"input":n.val(t.val());break;case"select":n.find('option[value="'+t.val()+'"]').attr("selected","selected");break;case"textarea":n.val(t.val()),function(t){switch(e(".ur-selected-item.ur-item-active").find(".ur-field").attr("data-field-key")){case"select":o(t);break;case"checkbox":d(t);break;case"radio":l(t)}}(t.val())}}function d(t){var i=[],r=t.closest("ul").find("li"),a=t.closest("li").index();r.each(function(t,r){var a=e(r).find("input.ur-type-checkbox-label").val();a=e.trim(a),s=e(r).find("input.ur-type-checkbox-value").is(":checked"),i.push({value:a,checkbox:s})});var n=e(".ur-selected-item.ur-item-active"),s=n.find(".ur-field");s.html("");for(var d=0;d<i.length;d++)""!==i[d]&&s.append('<label><input value="'+i[d].value.trim()+'" type="checkbox" '+(i[d].checkbox?"checked":"")+" disabled>"+i[d].value.trim()+"</label>");t.is(":checked")?n.find(".ur-general-setting-options li:nth("+a+') input[data-field="default_value"]').attr("checked","checked"):n.find(".ur-general-setting-options li:nth("+a+') input[data-field="default_value"]').removeAttr("checked")}function l(t){var i=t.closest("ul").find("li"),r=undefined,a=[];i.each(function(t,i){var n=e(i).find("input.ur-type-radio-label").val();n=e.trim(n),!0===(s=e(i).find("input.ur-type-radio-value").is(":checked"))&&(r=t),a.push({value:n,radio:s})});var n=e(".ur-selected-item.ur-item-active"),s=n.find(".ur-field");s.html("");for(var d=0;d<a.length;d++)""!==a[d]&&s.append('<label><input value="'+a[d].value.trim()+'" type="radio" '+(a[d].radio?"checked":"")+" disabled>"+a[d].value.trim()+"</label>");n.find(".ur-general-setting-options > ul.ur-options-list > li").each(function(t,i){var a=e(i).find('[data-field="default_value"]');t===r?a.attr("checked","checked"):a.removeAttr("checked")})}function o(t){value=e.trim(t.val());var i=e(".ur-selected-item.ur-item-active"),r=t.closest("li").index(),a=i.find(".ur-field").find("select");a.html(""),a.append("<option value='"+value+"'>"+value+"</option>"),i.find('.ur-general-setting-options li input[data-field="default_value"]').removeAttr("checked"),i.find(".ur-general-setting-options li:nth("+r+') input[data-field="default_value"]').attr("checked","checked")}function u(){var i=t.form_one_time_draggable_fields,r=e("#ur-tab-registered-fields").find("ul.ur-registered-list");e.each(r.find("li"),function(){var t=e(this),r=e(this).attr("data-field-id").replace("user_registration_","");e.inArray(r,i)>=0&&(e(".ur-input-grids").find('.ur-field[data-field-key="'+r+'"]').length>0?t.draggable("disable"):t.draggable("enable"))})}function c(e){return Math.ceil(e,0)}function f(e){return parseInt(e,0)}var g=t.i18n_admin;e(function(){({init:function(){e(document.body).on("click",".column-data_link a",this.add_item).on("ur_backbone_modal_loaded",this.backbone.init).on("ur_backbone_modal_response",this.backbone.response)},add_item:function(t){return t.preventDefault(),e(this).URBackboneModal({template:"test-demo"}),!1},backbone:{init:function(e,t){},response:function(e,t){}}}).init(),e.fn.ur_form_builder=function(){var i={active_grid:t.active_grid,number_of_grid_list:t.number_of_grid,min_grid_height:70};return this.each(function(){var a=e(this),n={init:function(){this.single_row(),function(){var i=t.form_required_fields,r=e(".ur-input-grids");if(e.isArray(i))for(var a=0;a<i.length;a++){var n=r.find('.ur-field[data-field-key="'+i[a]+'"]');n.closest(".ur-selected-item").find('select[data-field="required"]').val("yes").trigger("change"),n.closest(".ur-selected-item").find('select[data-field="required"]').find('option[value="yes"]').attr("selected","selected"),n.closest(".ur-selected-item").find('select[data-field="required"]').attr("disabled","disabled")}var s=r.find('select[data-field="required"]').find('option[selected="selected"][value="yes"]').closest(".ur-selected-item").find(".ur-label").find("label");s.find("span").remove(),s.append('<span style="color:red">*</span>')}()},get_grid_button:function(){var t=e('<div class="ur-grid-containner"/>'),r=c(f(i.number_of_grid_list)/f(i.active_grid))+"/"+i.number_of_grid_list,a='<div class="ur-grid-navigation ur-nav-right dashicons dashicons-arrow-left-alt2"></div><div class="ur-grid-size" data-active-grid="'+i.active_grid+'">'+r+'</div><div class="ur-grid-navigation ur-nav-left dashicons dashicons-arrow-right-alt2"></div><button type="button" class="dashicons dashicons-no-alt ur-remove-row"></button>';return t.html(a),t.html()},single_row:function(){var r=e("<div class='ur-single-row'/ data-row-id=\"0\">");r.append(e("<div class='ur-grids'/>"));var d=this.get_grid_button();r.find(".ur-grids").append(d),r.find(".ur-grids").find('span[data-id="'+i.active_grid+'"]').addClass("ur-active-grid");var l=this.get_grid_lists(i.active_grid);if(r.append('<div style="clear:both"></div>'),r.append(l),r.append('<div style="clear:both"></div>'),a.append(r),0==a.find(".ur-add-new-row").length){a.append('<button type="button" class="dashicons dashicons-plus-alt ur-add-new-row ui-sortable-handle" data-total-rows="0"></button>');var o=a.find(".ur-add-new-row").siblings(".ur-single-row").last().prev().data("row-id");a.find(".ur-add-new-row").attr("data-total-rows",o)}s.render_draggable_sortable(),n.manage_empty_grid(),"1"===t.is_edit_form&&e(".ur-single-row").eq(e(".ur-single-row").length-1).remove(),"1"!==t.is_edit_form&&(e(".ur-single-row").eq(0).find(".ur-grid-lists").eq(0).find(".ur-grid-list-item").eq(0).find(".user-registration-dragged-me").remove(),e(".ur-single-row").eq(0).find(".ur-grid-lists").eq(0).find(".ur-grid-list-item").eq(0).append(t.required_form_html)),u()},get_grid_lists:function(t){for(var r=e('<div class="ur-grid-lists"/>'),a=1;a<=t;a++){var n=e("<div ur-grid-id='"+a+"' class='ur-grid-list-item'></div>"),s=Math.floor(100/t)-t;s,n.css({width:s+"%","min-height":i.min_grid_height+"px"}),r.append(n)}return r.append('<div style="clear:both"></div>'),r.find(".ur-grid-list-item").eq("0").css({}),r},populate_dropped_node:function(i,r){var a={action:"user_registration_user_input_dropped",security:t.user_input_dropped,form_field_id:r},s='<div class="ur-selected-item ajax_added"><div class="ur-action-buttons"><span title="Clone" class="dashicons dashicons-admin-page ur-clone"></span><span title="Trash" class="dashicons dashicons-trash ur-trash"></span></div>(content)</div>';i.closest(".ur-single-row").find(".user-registration-dragged-me").fadeOut(),e.ajax({url:t.ajax_url,data:a,type:"POST",beforeSend:function(){i.removeAttr("class").removeAttr("id").removeAttr("data-field-id").addClass("ur-selected-item").css({width:"auto"}),i.html('<small class="spinner is-active"></small>'),i.addClass("ur-item-dragged")},complete:function(t){if(n.manage_empty_grid(),!0===t.responseJSON.success){var r=e(s.replace("(content)",t.responseJSON.data.template));r.removeClass("ajax_added"),r.removeClass("ur-item-dragged"),i.find(".ajax_added").find(".spinner").remove(),i.find(".ajax_added").remove(),e(r).insertBefore(i),i.remove()}u();!function(e){jQuery(".ur-grid-lists .ur-selected-item .ur-admin-template").each(function(){var t=jQuery(this).find(".ur-label label").text(),i=jQuery(this).find(".ur-field").attr("data-field-key");"section_title"!=i&&"html"!=i&&"wysiwyg"!=i&&"billing_address_title"!=i&&"shipping_address_title"!=i&&jQuery(this).find(".ur-general-setting-block .ur-general-setting").each(function(){var r=jQuery(this).find("[data-field='field_name']").val();void 0!==r&&(1==!(jQuery(".urcl-rules select.ur_advance_setting.urcl-settings-rules_field_1 option[value='"+r+"']").length>0)?(jQuery('[class*="urcl-settings-rules_field_"]').append('<option value ="'+r+'" data-type="'+i+'">'+t+" </option>"),r==e&&jQuery('.urcl-rules select.ur_advance_setting.urcl-settings-rules_field_1.empty-fields option[value="'+e+'"]').remove()):jQuery(".urcl-rules select.ur_advance_setting.urcl-settings-rules_field_1.empty-fields").append('<option value ="'+r+'" data-type="'+i+'">'+t+" </option>"))})}),jQuery(".urcl-rules select.ur_advance_setting.urcl-settings-rules_field_1.empty-fields").removeClass("empty-fields")}(r.closest(".ur-selected-item ").find("[data-field='field_name']").val())}})},manage_empty_grid:function(){var t=e(".ur-input-grids"),i=e('<div class="user-registration-dragged-me"/>');i.html('<div class="user-registration-dragged-me-text"><p>'+g.i18n_drag_your_first_item_here+"</p></div>"),t.find(".user-registration-dragged-me").remove(),e.each(t.find(".ur-grid-list-item"),function(){var t=e(this);0===e(this).find(".ur-selected-item").length&&t.append(i.clone())})}},s={register:function(){this.register_add_new_row(),this.register_remove_row(),this.change_ur_grids(),this.remove_selected_item(),this.clone_selected_item()},register_add_new_row:function(){var t=this;e("body").on("click",".ur-add-new-row",function(){var r=e(this).attr("data-total-rows");e(this).attr("data-total-rows",parseInt(r)+1);var a=e(this).closest(".ur-input-grids").find(".ur-single-row").eq(0).clone();a.attr("data-row-id",parseInt(r)+1),a.find(".ur-grid-lists").html(""),a.find(".ur-grids").find("span").removeClass("ur-active-grid"),a.find(".ur-grids").find('span[data-id="'+i.active_grid+'"]').addClass("ur-active-grid");var s=n.get_grid_lists(i.active_grid);a.find(".ur-grid-lists").append(s.html()),a.insertBefore(".ur-add-new-row"),a.show(),t.render_draggable_sortable(),n.manage_empty_grid(),e(document).trigger("user_registration_row_added",[a])})},register_remove_row:function(){var t=this;e("body").on("click",".ur-remove-row",function(){if(e(".ur-input-grids").find(".ur-single-row:visible").length>1){if(window.confirm(g.i18n_are_you_sure_want_to_delete)){var i,r=e(this).prev();(i=r.hasClass("ur-add-new-row")?r.clone():e(this).clone().attr("class","dashicons-minus ur-remove-row")).hasClass("ur-add-new-row")&&e(this).closest(".ur-single-row").prev().find(".ur-remove-row").before(i);var a=e(this).closest(".ur-single-row");e(document).trigger("user_registration_row_deleted",[a]),a.remove(),t.check_grid()}}else window.alert(g.i18n_at_least_one_row_need_to_select)})},change_ur_grids:function(){var t=this;e("body").on("click",".ur-single-row .ur-nav-right",function(){var r=e(this).closest(".ur-single-row"),a=e(this).closest(".ur-grids").find(".ur-grid-size").attr("data-active-grid");if(!(a>=i.number_of_grid_list)){a=f(a)+1;var s=c(f(i.number_of_grid_list)/f(a))+"/"+i.number_of_grid_list;e(this).closest(".ur-grids").find(".ur-grid-size").attr("data-active-grid",a),e(this).closest(".ur-grids").find(".ur-grid-size").text(s);var d=n.get_grid_lists(a);e.each(r.find(".ur-grid-lists .ur-grid-list-item"),function(){e(this).children("*").each(function(){d.find(".ur-grid-list-item").eq(0).append(e(this).clone())})}),r.find(".ur-grid-lists").eq(0).hide(),d.clone().insertAfter(r.find(".ur-grid-lists")),r.find(".ur-grid-lists").eq(0).remove(),t.render_draggable_sortable(),n.manage_empty_grid()}}),e("body").on("click",".ur-single-row .ur-nav-left",function(){var r=e(this).closest(".ur-single-row"),a=e(this).closest(".ur-grids").find(".ur-grid-size").attr("data-active-grid");if(!(a<=1)){a=f(a)-1;var s=c(f(i.number_of_grid_list)/f(a))+"/"+i.number_of_grid_list;e(this).closest(".ur-grids").find(".ur-grid-size").attr("data-active-grid",a),e(this).closest(".ur-grids").find(".ur-grid-size").text(s);var d=n.get_grid_lists(a);e.each(r.find(".ur-grid-lists .ur-grid-list-item"),function(){e(this).children("*").each(function(){d.find(".ur-grid-list-item").eq(0).append(e(this).clone())})}),r.find(".ur-grid-lists").eq(0).hide(),d.clone().insertAfter(r.find(".ur-grid-lists")),r.find(".ur-grid-lists").eq(0).remove(),t.render_draggable_sortable(),n.manage_empty_grid()}})},render_draggable_sortable:function(){e(".ur-grid-list-item").sortable({containment:".ur-input-grids",over:function(){e(this).addClass("ur-sortable-active"),n.manage_empty_grid()},out:function(){e(this).removeClass("ur-sortable-active"),n.manage_empty_grid()},revert:!0,connectWith:".ur-grid-list-item"}).disableSelection(),e(".ur-input-grids").sortable({containment:".ur-builder-wrapper",tolerance:"pointer",revert:"invalid",placeholder:"ur-single-row",forceHelperSize:!0,over:function(){e(this).addClass("ur-sortable-active")},out:function(){e(this).removeClass("ur-sortable-active")}}),e("#ur-draggabled li").draggable({connectToSortable:".ur-grid-list-item",containment:".ur-registered-from",helper:"clone",revert:"invalid",stop:function(i,a){if(0!==e(a.helper).closest(".ur-grid-list-item").length){var s=e.trim(e(a.helper).attr("data-field-id").replace("user_registration_","")),d=e(".ur-input-grids").find('.ur-field[data-field-key="'+s+'"]').length,l=e.makeArray(t.form_one_time_draggable_fields);if(d>0&&e.inArray(s,l)>=0)return r(g.i18n_user_required_field_already_there),void e(a.helper).remove();var o=e(a.helper),u=e(o).attr("data-field-id");if(void 0!==u){var c=e(a.helper).closest(".ur-grid-list-item").find('li[data-field-id="'+e(this).attr("data-field-id")+'"]');n.populate_dropped_node(c,u)}}}}).disableSelection()},remove_selected_item:function(){var t=this;e("body").on("click",".ur-selected-item .ur-action-buttons  .ur-trash",function(i){var r=e(this).closest(".ur-selected-item ").find("[data-field='field_name']").val();return e(this).closest(".ur-selected-item ").remove(),t.check_grid(),n.manage_empty_grid(),u(),jQuery('[class*="urcl-settings-rules_field_"] option[value="'+r+'"]').remove(),!1})},clone_selected_item:function(){e("body").on("click",".ur-selected-item .ur-action-buttons  .ur-clone",function(){var i=e(this).closest(".ur-selected-item ").find(".ur-field").attr("data-field-key");if(e(".ur-input-grids").find('.ur-field[data-field-key="'+i+'"]').length>0&&e.inArray(i,t.form_one_time_draggable_fields)>-1)r(g.i18n_user_required_field_already_there_could_not_clone);else{var a=e(this).closest(".ur-selected-item ").clone(),n=a.find('input[data-field="field_name"]'),s=n.val().match(/\d+/g),d=s.length>0?s[s.length-1]:"",l=n.val().replace(d,"");a.find('input[data-field="field_name"]').attr("value",l+(new Date).getTime()),e(this).closest(".ur-grid-list-item").append(a)}})},check_grid:function(){e(".ur-tabs").tabs({disabled:[1]}),e(".ur-tabs").find("a").eq(0).trigger("click"),e(".ur-tabs").find('[aria-controls="ur-tab-field-options"]').addClass("ur-no-pointer"),e(".ur-selected-item").removeClass("ur-item-active")}};n.init(),s.register()})},e(".ur-input-grids").ur_form_builder(),e(".ur-tabs .ur-tab-lists").find("a.nav-tab").click(function(){e(".ur-tabs .ur-tab-lists").find("a.nav-tab").removeClass("active"),e(this).addClass("active")}),e(".ur-tabs").tabs(),e(".ur-tabs").find("a").eq(0).trigger("click"),e(".ur-tabs").tabs({disabled:[1]}),e("body").on("click",".ur-selected-item",function(){e(".ur-registered-inputs").find("ul li.ur-no-pointer").removeClass("ur-no-pointer"),e(".ur-selected-item").removeClass("ur-item-active"),e(this).addClass("ur-item-active"),function(t){var i=t.find(".ur-advance-setting-block").clone(),r=t.find(".ur-general-setting-block").clone(),a=e("<form id='ur-setting-form'/>");e("#ur-tab-field-options").html(""),a.append(r),a.append(i),e("#ur-tab-field-options").append(a),e("#ur-tab-field-options").find(".ur-advance-setting-block").show(),e("#ur-tab-field-options").find(".ur-general-setting-block").show(),1===e(".ur-item-active").length&&(e(".ur-tabs").tabs("enable",1),e(".ur-tabs").find("a").eq(1).trigger("click")),e(".ur-options-list").sortable({containment:".ur-general-setting-options"})}(e(this)),n()}),e(".ur_save_form_action_button").on("click",function(){i()}),e(window).on("keydown",function(e){if((e.ctrlKey||e.metaKey)&&"s"===String.fromCharCode(e.which).toLowerCase())return e.preventDefault(),i(),!1})}),setTimeout(function(){var t=e('#profile-page form#your-profile  input[type="date"]');t.length>0&&t.addClass("flatpickr-field").attr("type","text").flatpickr({disableMobile:!0})},2),e(document).on("click","#ur-tab-registered-fields h2",function(){e(this).hasClass("closed")?e(this).removeClass("closed"):e(this).addClass("closed");var t=e(this).find(" ~ .ur-registered-list")[0];e(t).slideToggle()}),e(document).on("click",".ur-options-list .add",function(t){t.preventDefault();var i=e(this),r=e(".ur-selected-item.ur-item-active"),a=i.parent("li").index(),n=i.parent("li").clone(!0,!0);n.find('input[data-field="options"]').val(""),n.find('input[data-field="default_value"]').removeAttr("checked"),i.parent("li").after(n),r.find(".ur-general-setting-options .ur-options-list > li:nth( "+a+" )").after(n.clone(!0,!0)),i.closest(".ur-general-setting-block").hasClass("ur-general-setting-radio")?l(i):i.closest(".ur-general-setting-block").hasClass("ur-general-setting-checkbox")&&d(i)}),e(document).on("click",".ur-options-list .remove",function(t){t.preventDefault();var i=e(this),r=e(this).closest("ul");$any_siblings=r.find("li"),$wrapper=e(".ur-selected-item.ur-item-active"),this_index=i.parent("li").index(),r.find("li").length>1&&(i.parent("li").remove(),$wrapper.find(".ur-general-setting-options .ur-options-list > li:nth( "+this_index+" )").remove(),$any_siblings.closest(".ur-general-setting-block").hasClass("ur-general-setting-radio")?l($any_siblings):$any_siblings.closest(".ur-general-setting-block").hasClass("ur-general-setting-checkbox")&&d($any_siblings))}),e(document).on("sortstop",".ur-options-list",function(t,i){var r=e(this);!function(t){var i=t.clone(!0,!0),r=e(".ur-selected-item.ur-item-active").find(".ur-general-setting-options .ur-options-list");r.html(""),r.replaceWith(i)}(r),r.closest(".ur-general-setting-block").hasClass("ur-general-setting-radio")?l(r):r.closest(".ur-general-setting-block").hasClass("ur-general-setting-checkbox")&&d(r)})}(jQuery,window.user_registration_admin_data);