function ur_init_tooltips(e,t){if(undefined!==e&&null!==e&&""!==e){var r={theme:"tooltipster-borderless",maxWidth:200,multiple:!0,interactive:!0,position:"bottom",contentAsHTML:!0,functionInit:function(e,t){var r=jQuery(t.origin).attr("data-tip");r&&e.content(r)}};t&&"object"==typeof t&&Object.keys(t).forEach(function(e){r[e]=t[e]}),"string"==typeof e?jQuery(e).tooltipster(r):e.tooltipster(r)}}function ur_confirmation(e,t){void 0===t&&(t={});var r='<i class="dashicons dashicons-trash"></i><span class="user-registration-swal2-modal__title">'+t.title;Swal.fire({customClass:"user-registration-swal2-modal user-registration-swal2-modal--centered user-registration-trashed",title:r,text:e,showCancelButton:"undefined"==typeof t.showCancelButton||t.showCancelButton,confirmButtonText:"undefined"!=typeof t.confirmButtonText?t.confirmButtonText:user_registration_form_builder_data.i18n_admin.i18n_choice_delete,confirmButtonColor:"#ff4149",cancelButtonText:"undefined"!=typeof t.cancelButtonText?t.cancelButtonText:user_registration_form_builder_data.i18n_admin.i18n_choice_cancel}).then(function(e){e.value?t.confirm():t.reject()})}jQuery(function(e){e(document.body).on("input","#ur-search-fields",function(){var t=e(this).val().toLowerCase();e(".ur-registered-item").each(function(){e(this).text().toLowerCase().search(t)>-1?(e(this).addClass("ur-searched-item"),e(this).show()):(e(this).removeClass("ur-searched-item"),e(this).hide())}),e(".ur-registered-list").each(function(){var t=e(this).find(".ur-registered-item.ur-searched-item").length,r=e(this).prev("hr"),i=e(this).prev("hr").prev(".ur-toggle-heading");0===t?(r.hide(),i.hide(),e(this).hide()):(r.show(),i.show(),e(this).show())}),e(".ur-registered-item.ur-searched-item").length?e(".ur-fields-not-found").hide():e(".ur-fields-not-found").show()}),e(document).on("mousedown",".ur-locked-field",function(t){t.preventDefault();var r=e(this).data("field-data"),i='<i class="dashicons dashicons-lock" style="color:#72aee6; border-color: #72aee6;"></i><span class="user-registration-swal2-modal__title">'+r.title+"</span>";Swal.fire({title:i,html:r.message,showCloseButton:!0,customClass:"user-registration-swal2-modal user-registration-swal2-modal--center user-registration-locked-field",confirmButtonText:r.button_title}).then(function(e){if(e.value){var t=r.link;window.open(t,"_blank")}})}),e(document).on("mousedown",".ur-upgradable-field",function(t){t.preventDefault();var r=e(this).data("plan"),i=e(this).data("name"),s=e(this).data("slug"),n=e(this);""!=s&&""!=r&&e.ajax({url:user_registration_locked_form_fields_notice_params.ajax_url,type:"POST",data:{action:"user_registration_locked_form_fields_notice",slug:s,plan:r,name:i,security:user_registration_locked_form_fields_notice_params.user_registration_locked_form_fields_notice_nonce},success:function(t){var s=e(t.data.action_button).find("a");s.length||(s=e(t.data.action_button).find("form"));var o='<i class="dashicons dashicons-lock" style="color:#72aee6; border-color: #72aee6;"></i><span class="user-registration-swal2-modal__title" > ';if(s.hasClass("activate-license-now")){var a=user_registration_locked_form_fields_notice_params.license_activation_required_message;o+=user_registration_locked_form_fields_notice_params.license_activation_required_title}else if(s.hasClass("activate-now")){a=user_registration_locked_form_fields_notice_params.activation_required_message.replace("%plugin%",i);o+=user_registration_locked_form_fields_notice_params.activation_required_title}else if(s.hasClass("install-now")){a=user_registration_locked_form_fields_notice_params.installation_required_message.replace("%plugin%",i);o+=user_registration_locked_form_fields_notice_params.installation_required_title}else{a=user_registration_locked_form_fields_notice_params.unlock_message.replace("%field%",n.text()).replace("%plan%",r);o+=n.text()+" "+user_registration_locked_form_fields_notice_params.lock_message}o+="</span>",a=a+"<br><br>"+t.data.action_button,Swal.fire({title:o,html:a,customClass:"user-registration-swal2-modal user-registration-swal2-modal--centered user-registration-locked-field",showCloseButton:!0,showConfirmButton:!1,allowOutsideClick:!1}).then(function(e){})}})}),e(window).on("resize orientationchange",function(){var t;clearTimeout(t),t=setTimeout(function(){e(document.body).trigger("adjust_builder_width")},250)}),e(document.body).on("click","#collapse-button",function(){e(document.body).trigger("ur_adjust_builder_width")}),e(document.body).on("ur_adjust_builder_width",function(){var t=e("#adminmenuwrap").width(),r=e(".user-registration_page_add-new-registration .ur-form-subcontainer .menu-edit"),i=e(".user-registration_page_add-new-registration .ur-form-subcontainer .ur-loading-container");r.css({left:t+"px"}),i.fadeOut(1e3)}).trigger("ur_adjust_builder_width"),e(document.body).on("click",".user-registration-editable-title__icon",function(){var t=e(this).siblings(".user-registration-editable-title__input");t.hasClass("is-editing")||t.trigger("focus"),t.toggleClass("is-editing"),t.attr("data-editing","true"==t.attr("data-editing")?"false":"true")}),e("#ur-form-name").on("change",function(){e(".ur-form-title").text(e(this).val())}),e(document).not(e(".user-registration-editable-title")).on("click",function(t){var r=e(".user-registration-editable-title__input");"ur-form-name"!==t.target.id&&"ur-form-name-edit-button"!==t.target.id&&!r.attr("hidden")&&r.hasClass("is-editing")&&(t.stopPropagation(),"true"!==r.data("data-editing")&&r.val()&&""!==r.val().trim()&&r.toggleClass("is-editing").trigger("blur").attr("data-editing","true"==r.attr("data-editing")?"false":"true"))}),e(document).on("init_perfect_scrollbar update_perfect_scrollbar",function(){if("undefined"!=typeof PerfectScrollbar){var t=e(".ur-tab-contents");if(t.length>=1&&"undefined"==typeof window.ur_tab_scrollbar){window.ur_tab_scrollbar=new PerfectScrollbar(document.querySelector(".ur-tab-contents"),{suppressScrollX:!0});var r=document.querySelector("#ur-collapse");r.addEventListener("click",function(){r.classList.contains("open")?(e(r).removeClass("open"),e(r).addClass("close")):(e(r).addClass("open"),e(r).removeClass("close"));var t=document.querySelector(".ur-registered-inputs");t.classList.contains("collapsed")?(t.classList.remove("collapsed"),e(".ur-registered-inputs").find("nav.ur-tabs").show(),e(".ur-registered-inputs").css("width","412px"),window.ur_tab_scrollbar.update()):(t.classList.add("collapsed"),e(".ur-registered-inputs").css("width","0px"),e(".ur-registered-inputs").find("nav.ur-tabs").hide())})}else"undefined"!=typeof window.ur_tab_scrollbar&&(window.ur_tab_scrollbar.update(),t.scrollTop(0))}}),e(document).ready(function(){e(document).trigger("init_perfect_scrollbar");var t=e(".ur-selected-inputs"),r=e(".ur-registered-inputs nav").find("#ur-tab-field-settings");r.find("form").appendTo(t),t.find("form #ur-field-all-settings > div").each(function(t,i){var s=e(i).find("h3").text(),n=e(i).attr("id");r.append('<div id="'+n+'" class="form-settings-tab">'+s+"</div>"),e(i).hide()}),r.find("#general-settings").addClass("active"),t.find("#ur-field-all-settings div#general-settings").show(),r.find(".form-settings-tab").on("click",function(){this_id=e(this).attr("id"),e(this).siblings().removeClass("active"),e(this).addClass("active"),t.find("form #ur-field-all-settings > div").hide(),t.find("form #ur-field-all-settings > div#"+this_id).show(),e(document).trigger("update_perfect_scrollbar"),e(".ur-builder-wrapper").scrollTop(0)})}),e(document).on("click",'.ur-tab-lists li[role="tab"] a.nav-tab',function(t,r){e(document).trigger("update_perfect_scrollbar"),"triggered_click"!=r&&(e(".ur-builder-wrapper").scrollTop(0),e(".ur-builder-wrapper-content").scrollTop(0))}),e(document).on("click",'.ur-tab-lists li[aria-controls="ur-tab-field-settings"]',function(){e(".ur-builder-wrapper-content").hide(),e(".ur-builder-wrapper-footer").hide(),e(".ur-selected-inputs").find("form#ur-field-settings").show()}),e(document).on("click",'ul.ur-tab-lists li[aria-controls="ur-tab-registered-fields"]',function(){e(".ur-builder-wrapper-content").show(),e(".ur-builder-wrapper-footer").show(),e(".ur-selected-inputs").find("form#ur-field-settings").hide()});var t=e("#general-settings").find("#user_registration_form_setting_minimum_password_strength_field"),r=e("#general-settings").find("#user_registration_form_setting_enable_strong_password_field input#user_registration_form_setting_enable_strong_password"),i=r.is(":checked");i?t.show():t.hide();var s=t.find("#user_registration_form_setting_minimum_password_strength");if(e(document).ready(function(){function r(e){switch(e){case"0":i=user_registration_form_builder_data.user_registration_very_weak_password_info;break;case"1":i=user_registration_form_builder_data.user_registration_weak_password_info;break;case"2":i=user_registration_form_builder_data.user_registration_medium_password_info;break;case"3":i=user_registration_form_builder_data.user_registration_strong_password_info;break;default:i=""}t.append("<span class='description'>"+i+"</span>")}var i="",n="";r(s.find(":selected").val()),e(s).on("change",function(){n=t.find("span"),$strength=e(this).find(":selected").val(),n.remove(),r($strength)})}),e(r).on("change",function(){(i=e(this).is(":checked"))?t.show("slow"):t.hide("slow")}),e(document.body).on("init_tooltips",function(){ur_init_tooltips(".tips, .help_tip, .user-registration-help-tip"),ur_init_tooltips(".ur-copy-shortcode, .ur-portal-tooltip",{keepAlive:!1}),e(".parent-tips").each(function(){e(this).closest("a, th").attr("data-tip",e(this).data("tip")).tooltipster().css("cursor","help")})}).trigger("init_tooltips"),e("body").on("keypress","#ur-form-name",function(t){13===t.which&&e("#save_form_footer").eq(0).trigger("click")}),e("#ur-full-screen-mode").on("click",function(t){t.preventDefault();var r=e(this);r.hasClass("closed")?(r.removeClass("closed"),r.addClass("opened"),e("body").addClass("ur-full-screen-mode")):(r.removeClass("opened"),r.addClass("closed"),e("body").removeClass("ur-full-screen-mode"))}),e(document).on("keyup",function(t){"Escape"===t.key&&e("#ur-full-screen-mode.opened").trigger("click")}),"admin_approval"!==e("#user_registration_form_setting_login_options").val())e("#user_registration_form_setting_enable_email_approval").parent().parent().hide();else var n=e("#user_registration_form_setting_enable_email_approval").prop("checked");e("#user_registration_form_setting_login_options").on("change",function(){var t=e("#user_registration_form_setting_enable_email_approval").parent().parent();"admin_approval"===e(this).val()?(e("#user_registration_form_setting_enable_email_approval").prop("checked",n),t.show()):(t.hide(),e("#user_registration_form_setting_enable_email_approval").prop("checked",!1))}),e("input.input-color").wpColorPicker(),e(".user_registration_send_email_test").on("click",function(t){var r=e("#user_registration_email_send_to").val();t.preventDefault(),e.ajax({url:user_registration_send_email.ajax_url,data:{action:"user_registration_send_test_email",email:r,nonce:user_registration_send_email.test_email_nonce},type:"post",beforeSend:function(){e(".user_registration_send_email_test").append('<span class="ur-spinner is-active"></span>')},complete:function(t){e(".ur-spinner").remove(),e(".user-registration_page_user-registration-settings .notice").remove(),!0===t.responseJSON.success?(message_string='<div class="success notice notice-success is-dismissible"><p><strong>'+t.responseJSON.data.message+"</strong></p></div>",e(".user-registration-options-container").prepend(message_string)):(message_string='<div class="error notice notice-success is-dismissible"><p><strong>'+t.responseJSON.data.message+"</strong></p></div>",e(".user-registration-options-container").prepend(message_string)),e(".user-registration_page_user-registration-settings .notice").css("display","block"),e(window).scrollTop(e(".notice").position())}})}),e(".user-registration-email-status-toggle").on("change",function(t){t.preventDefault();var r=e(this).find('input[type="checkbox"]:checked').val(),i=e(this).find('input[type="checkbox"]').attr("id");e.ajax({url:user_registration_email_setting_status.ajax_url,type:"POST",data:{action:"user_registration_email_setting_status",status:r,id:i,security:user_registration_email_setting_status.user_registration_email_setting_status_nonce},success:function(e){}})})}),function(e,t){e(function(){e(".ur_import_form_action_button").on("click",function(){var r=e("#jsonfile").prop("files")[0],i=new FormData;i.append("jsonfile",r),i.append("action","user_registration_import_form_action"),i.append("security",t.ur_import_form_save),e.ajax({url:t.ajax_url,dataType:"json",cache:!1,contentType:!1,processData:!1,data:i,type:"post",beforeSend:function(){e(".ur_import_form_action_button").closest(".publishing-action").append('<span class="spinner is-active" style="float: left;margin-top: 6px;"></span>'),e(".ur-import_notice").remove()},complete:function(r){var i="";e(".ur_import_form_action_button").closest(".publishing-action").find(".spinner").remove(),e(".ur-import_notice").remove(),i=!0===r.responseJSON.success?'<div id="message" class="updated inline ur-import_notice"><p><strong>'+r.responseJSON.data.message+"</strong></p></div>":'<div id="message" class="error inline ur-import_notice"><p><strong>'+r.responseJSON.data.message+"</strong></p></div>",e(".ur-export-users-page").prepend(i),e("#jsonfile").val(""),e(".user-registration-custom-selected-file").html(t.no_file_selected)}})}),e(".ur_export_form_action_button").on("click",function(){var r=e("#selected-export-forms").val();e(document).find("#message").remove(),0===r.length?(message_string='<div id="message" class="error inline ur-import_notice"><p><strong>'+t.export_error_message+"</strong></p></div>",e(".ur-export-users-page").prepend(message_string)):e(".ur_export_form_action_button").attr("type","submit")}),e(".ur_export_user_action_button").on("click",function(){var r=e("#selected-export-user-form").val();e(document).find("#message").remove(),0===r.length?(message_string='<div id="message" class="error inline ur-import_notice"><p><strong>'+t.export_error_message+"</strong></p></div>",e(".ur-export-users-page").prepend(message_string)):e(".ur_export_user_action_button").attr("type","submit")})})}(jQuery,window.user_registration_admin_data);