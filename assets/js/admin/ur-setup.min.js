!function(t,e){var a=t(document);__=e.i18n.__,_x=e.i18n._x,sprintf=e.i18n.sprintf,t(".user-registration__wrap.ur-form-container").remove(),e.updates.installExtension=function(s){var i=t(".plugin-card-"+s.slug),n=i.find(".install-now, .activate-now");return s=_.extend({success:e.updates.installExtensionSuccess,error:e.updates.installExtensionError},s),n.html()!==__("Installing...")&&n.data("originaltext",n.html()),n.addClass("updating-message").attr("aria-label",sprintf(_x("Installing %s...","user-registration"),n.data("name"))).text(__("Installing...")),e.a11y.speak(__("Installing... please wait."),"polite"),i.removeClass("plugin-card-install-failed").find(".notice.notice-error").remove(),a.trigger("wp-extension-installing",s),e.updates.ajax("user_registration_install_extension",s)},e.updates.installExtensionSuccess=function(s){if("user-registration_page_add-new-registration"===pagenow){t('tr[data-slug="'+s.slug+'"]').removeClass("install").addClass("installed").find(".plugin-status span").removeClass("updating-message install-now").addClass("updated-message active").attr("aria-label",sprintf(_x("%s installed!","user-registration"),s.pluginName)).text(_x("Installed!","plugin")),e.a11y.speak(__("Installation completed successfully."),"polite"),a.trigger("wp-plugin-bulk-install-success",s)}else{var i=t(".plugin-card-"+s.slug).find(".install-now"),n=t(".plugin-card-"+s.slug).find(".status-label");i.removeClass("updating-message").addClass("updated-message installed button-disabled").attr("aria-label",sprintf(_x("%s installed!","user-registration"),s.pluginName)).text(_x("Installed!","user-registration")),e.a11y.speak(__("Installation completed successfully."),"polite"),a.trigger("wp-plugin-install-success",s),s.activateUrl&&setTimeout(function(){n.removeClass("status-install-now").addClass("status-active").text(e.updates.l10n.pluginInstalled),i.removeClass("install-now installed button-disabled updated-message").addClass("activate-now").attr("href",s.activateUrl),"plugins-network"===pagenow?i.attr("aria-label",sprintf(_x("Network Activate %s","user-registration"),s.pluginName)).text(__("Network Activate")):i.attr("aria-label",sprintf(_x("Activate %s","user-registration"),s.pluginName)).text(__("Activate"))},1e3)}},e.updates.installExtensionError=function(s){if("user-registration_page_add-new-registration"===pagenow){var i=t('tr[data-slug="'+s.slug+'"]').find(".plugin-status span");if(!e.updates.isValidResponse(s,"install"))return;if(e.updates.maybeHandleCredentialError(s,"install-plugin"))return;n=sprintf(__("Installation failed: %s"),s.errorMessage),i.removeClass("updating-message").addClass("updated-message").attr("aria-label",sprintf(_x("%s installation failed","user-registration"),i.closest("tr").data("name"))).text(__("Installation Failed!")),e.a11y.speak(n,"assertive"),a.trigger("wp-plugin-bulk-install-error",s)}else{var n,r=t(".plugin-card-"+s.slug),l=r.find(".install-now");if(!e.updates.isValidResponse(s,"install"))return;if(e.updates.maybeHandleCredentialError(s,"user_registration_install_extension"))return;n=sprintf(__("Installation failed: %s"),s.errorMessage),r.addClass("plugin-card-update-failed").append('<div class="notice notice-error notice-alt is-dismissible"><p>'+n+"</p></div>"),r.on("click",".notice.is-dismissible .notice-dismiss",function(){setTimeout(function(){r.removeClass("plugin-card-update-failed").find(".column-name a").focus()},200)}),l.removeClass("updating-message").addClass("button-disabled").attr("aria-label",sprintf(_x("%s installation failed","user-registration"),l.data("name"))).text(__("Installation Failed!")),e.a11y.speak(n,"assertive"),a.trigger("wp-plugin-install-error",s)}},e.updates.queueChecker=function(){var t;if(!e.updates.ajaxLocked&&e.updates.queue.length){switch((t=e.updates.queue.shift()).action){case"user_registration_install_extension":e.updates.installExtension(t.data)}a.trigger("wp-updates-queue-job",t)}}}(jQuery,window.wp),jQuery(function(t){var e={$setup_form:t(".user-registration-setup--form"),$button_install:ur_setup_params.i18n_activating,init:function(){this.title_focus(),t(document).on("click",".user-registration-template-install-addon",this.install_addon),t(document).on("click",".upgrade-modal",this.message_upgrade),t(document).on("click",".ur-template-preview",this.template_preview),this.$setup_form.on("click",".ur-template-select",function(a){if(-1!==t(this).data("template").indexOf("recaptcha")){var s={action:"user_registration_captcha_setup_check",security:ur_setup_params.captcha_setup_check_nonce};t.post(ur_setup_params.ajax_url,s,function(t){t.success&&undefined!==t.data.is_captcha_setup&&t.data.is_captcha_setup?e.template_select(a):Swal.fire({icon:"error",title:"Oops...",html:t.data.captcha_setup_error_msg})}).fail(function(t){Swal.fire({icon:"error",title:"Oops...",text:t.responseText})})}else e.template_select(a)}),t(document.body).on("keypress",".user-registration-setup-form-name input",this.input_keypress)},title_focus:function(){setTimeout(function(){t("#user-registration-setup-name").focus()},100)},install_addon:function(a){var s=t(".plugins-list-table").find("#the-list tr"),i=t(a.target),n=0,r=0,l=[];wp.updates.maybeRequestFilesystemCredentials(a),t(".user-registration-template-install-addon").html(e.$button_install+'<div class="ur-spinner"></div>').closest("button").prop("disabled",!0),t(document).trigger("wp-plugin-bulk-install",s),s.each(function(e,a){var s=t(a);s.hasClass("inactive")&&!s.find("notice-error").length&&wp.updates.queue.push({action:"user_registration_install_extension",data:{page:pagenow,name:s.data("name"),slug:s.data("slug")}})}),t(document).on("wp-plugin-bulk-install-success wp-plugin-bulk-install-error",function(e,a){var s,u,o=t('[data-slug="'+a.slug+'"]');"wp-"+a.install+"-bulk-install-success"===e.type?n++:(u=a.pluginName?a.pluginName:o.find(".plugin-name").text(),r++,l.push(u+": "+a.errorMessage)),wp.updates.adminNotice=wp.template("wp-bulk-installs-admin-notice"),t(".user-registration-recommend-addons .bulk-action-notice").remove(),t(".user-registration-recommend-addons .plugins-list-table").before(wp.updates.adminNotice({id:"bulk-action-notice",className:"bulk-action-notice notice-alt",successes:n,errors:r,errorMessages:l,type:a.install})),s=t("#bulk-action-notice").on("click","button",function(){t(this).toggleClass("bulk-action-errors-collapsed").attr("aria-expanded",!t(this).hasClass("bulk-action-errors-collapsed")),s.find(".bulk-action-errors").toggleClass("hidden")}),wp.updates.queue.length||r>0&&i.removeClass("updating-message").text(i.data("originaltext")),0===wp.updates.queue.length&&(t(".user-registration-template-install-addon").parent().prop("disabled",!1),t(".user-registration-template-install-addon").removeClass("user-registration-template-install-addon").addClass("user-registration-template-continue").text(ur_setup_params.i18n_form_ok))}),wp.updates.queueChecker()},message_upgrade:function(e){var a=t(this).data("template-name-raw");e.preventDefault(),Swal.fire({customClass:"user-registration-swal2-modal user-registration-swal2-modal--center",icon:"error",title:'<span class="user-registration-swal2-modal__title">'+a+" "+ur_setup_params.upgrade_title+"</span>",text:ur_setup_params.upgrade_message,allowOutsideClick:!1,confirmButtonText:ur_setup_params.upgrade_button,showCancelButton:!0,cancelButtonText:ur_setup_params.i18n_ok,cancelButtonColor:"#DD6B55"}).then(function(t){t.isConfirmed&&window.open(ur_setup_params.upgrade_url,"_blank")})},template_preview:function(){var e=t(this),a=e.data("preview-link");e.closest(".user-registration-setup--form").find(".ur-template-preview-iframe #frame").attr("src",a)},template_select:function(a){var s=t(this),i=s.data("template"),n=(s.data("template-name-raw"),'<a href="#" class="user-registration-btn user-registration-template-continue">'+ur_setup_params.i18n_form_ok+"</a>"),r="";if(a.preventDefault(),$target=t(a.target),i=$target.data("template"),!$target.hasClass("disabled")&&!$target.hasClass("updating-message")){var l='<span class="user-registration-swal2-modal__title">'+ur_setup_params.i18n_form_title+"</span>";if($target.closest(".ur-template").find("span.user-registration-badge").length){var u={action:"user_registration_template_licence_check",plan:$target.attr("data-licence-plan").replace("-lifetime",""),slug:$target.attr("data-template"),security:ur_setup_params.template_licence_check_nonce};t.ajax({url:ur_setup_params.ajax_url,data:u,type:"POST",async:!1}).done(function(a){if($target.closest(".ur-template").append("<div class='user-registration-template-addons' style='display:none'>"+a.data.html+"</div>"),a.data.activate)t(".user-registration-builder-setup .swal2-confirm").show();else{n="",a.data.html.includes("install-now")?(n=ur_setup_params.i18n_install_activate,e.$button_install=ur_setup_params.i18n_installing):n=ur_setup_params.i18n_install_only;var s='<a href="#" class="user-registration-btn user-registration-template-install-addon">'+n+"</a>";t(".user-registration-template-addons").append('<div class="ur-install-now">'+s+"</div>")}})}if($target.closest(".ur-template").find(".user-registration-template-addons").length){var o=t(".user-registration-template-addons").find(".ur-install-now").html();void 0!==o&&(n=o),t(".user-registration-template-addons").find(".ur-install-now").remove(),r+=$target.closest(".ur-template").find(".user-registration-template-addons").html(),$target.closest(".ur-template").find(".user-registration-template-addons").remove()}r+="<h3>"+ur_setup_params.i18n_form_name+"</h3>";var p=!1;Swal.fire({customClass:"user-registration-swal2-modal user-registration-swal2-modal--center",title:l,html:r,input:"text",inputPlaceholder:ur_setup_params.i18n_form_placeholder,inputAttributes:{id:"user-registration-setup-name"},showCloseButton:!0,allowOutsideClick:!1,confirmButtonText:n,inputValidator:function(e){if(!(t(".user-registration-template-install-addon").length>0)){if(t(".swal2-validation-message").length>0&&t(".swal2-validation-message").remove(),""===e)return t(".swal2-content").append("<div class='swal2-validation-message' id='swal2-validation-message' style='display: flex;'>"+ur_setup_params.i18n_form_error_name+"</div>"),void(p=!0);p=!1}},preConfirm:function(){if(t(".user-registration-template-install-addon").length>0){if(!p)return!1}else if(!p)return!0;return!1}}).then(function(e){if(t(".user-registration-template-continue").length>0){var a=t("#user-registration-setup-name");if(!a.val())return;var s={title:a.val(),action:"user_registration_create_form",template:i,security:ur_setup_params.create_form_nonce};t.post(ur_setup_params.ajax_url,s,function(e){e.success?window.location.href=e.data.redirect:(t(".user-registartion-setup-name").focus(),Swal.fire({icon:"error",title:"Oops...",text:e.data.error}))}).fail(function(t){Swal.fire({icon:"error",title:"Oops...",text:t.responseText})})}})}},input_keypress:function(e){var a=e.keyCode||e.which;if(t(this).removeClass("user-registration-required"),13===a&&"input"===e.target.tagName.toLowerCase())return e.preventDefault(),!1}};e.init()});