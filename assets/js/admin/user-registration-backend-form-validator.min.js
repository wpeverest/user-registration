!function(e){var i,r="";(i=e("#user-registration-pro-single-user-view .ur-frontend-form form, form.cart, form.checkout")).hasClass("edit-profile")&&(r="user_registration_");var s={$user_registration:i,init:function(){this.add_validation_methods(),this.load_validation(),this.init_tooltipster(),this.$user_registration.on("input validate change",".input-text, select, input:checkbox input:radio",this.validate_field),e(".input-text").keypress(function(i){$this=e(this);var r=Number($this.attr("max-words")),s=$this.val().split(" ").length;void 0!==r&&s>r&&i.preventDefault()}),e("[type='number']").keypress(function(i){var r=i.keyCode||i.which,s=e(this).val();46===r&&-1===s.indexOf(".")||!(r<48||r>57)||i.preventDefault()})},init_inputMask:function(){"undefined"!=typeof e.fn.inputmask&&e(".ur-masked-input").inputmask()},init_tooltipster:function(){if("undefined"!=typeof tooltipster){var i={theme:"tooltipster-borderless",maxWidth:200,multiple:!0,interactive:!0,position:"bottom",contentAsHTML:!0,functionInit:function(e,i){var r=jQuery(i.origin).attr("data-tip");r&&e.content(r)}};e(".user-registration-help-tip").tooltipster(i)}},add_validation_methods:function(){e.validator.addMethod("checkLimit",function(i,r,s){var t=parseInt(s||0,10),a="";if(e(r).closest(".field-checkbox").length){a=e(r).closest("ul").find('input[type="checkbox"]:checked')}else if(e(r).closest(".field-multi_select2").length)a=e(r).val();else if(e(r).closest(".field-multiple_choice").length){a=e(r).closest("ul").find('input[type="checkbox"]:checked')}return 0===t||a.length<=t},e.validator.format("Please select no more than {0} options."))},load_validation:function(){if("undefined"==typeof e.fn.validate)return!1;var i=e(document).find('[name="quantity"]');""===i.attr("max")&&i.removeAttr("max");var r=this;r.$user_registration.each(function(){var i=e(this),s=r.custom_validation(i);r.custom_validation_messages(),i.validate({errorClass:"user-registration-error",validClass:"user-registration-valid",ignore:function(i,r){return!!e(r).closest(".ur-field-item").is(":hidden")||(!!e(r).hasClass("ur-flatpickr-field")||r.id&&(r.id.startsWith("billing_")||r.id.startsWith("shipping_")||r.id.startsWith("quantity_")))},rules:s.rules,messages:s.messages,focusInvalid:!1,invalidHandler:function(i,r){r.numberOfInvalids()&&e(window).scrollTop(e(r.errorList[0].element).offset().top)},errorPlacement:function(i,r){if(r.is("#password_2"))r.parent().after(i);else if("radio"===r.attr("type")||"checkbox"===r.attr("type")||"password"===r.attr("type"))r.parent().parent().parent().append(i);else if(r.is("select")&&r.attr("class").match(/date-month|date-day|date-year/))0===r.parent().find("label.user-registration-error:visible").length&&r.parent().find("select:last").after(i);else if(r.hasClass("ur-smart-phone-field")){var s=r.closest(".form-row");s.find("#"+r.data("id")+"-error").remove(),s.append(i)}else"number"===r.attr("type")&&r.hasClass("ur-range-input")?i.insertAfter(r.closest(".ur-range-row").find(".ur-range-number")):"text"===r.attr("type")&&r.hasClass("input-timepicker")?r.hasClass("timepicker-end")||i.insertAfter(r.parent()):(e(document).trigger("user-registration-append-error-messages",r),r.hasClass("urfu-file-input")||r.closest(".field-multi_select2").length?i.insertAfter(r.parent().parent()):"number"===r.attr("type")&&r.hasClass("ur-quantity")?i.insertAfter(r.parent()):"text"===r.attr("type")&&r.hasClass("ur-payment-price")?i.insertAfter(r):"url"===r.attr("type")?i.insertAfter(r.parent()):i.insertAfter(r.parent().parent()))},highlight:function(i,r,s){var t=e(i);t.closest(".form-row"),t.attr("name");t.removeClass("ur-input-border-green").addClass("ur-input-border-red")},unhighlight:function(i,r,s){var t=e(i),a=t.closest(".form-row"),n=t.attr("name");t.removeClass("ur-input-border-red").addClass("ur-input-border-green"),"radio"===t.attr("type")||"checkbox"===t.attr("type")?a.find("input[name='"+n+"']").addClass(s).removeClass(r):t.addClass(s).removeClass(r),a.removeClass("user-registration-has-error")},submitHandler:function(i){return!(e(i).hasClass("register")||e(i).hasClass("edit-profile")&&urUsersl10n.ajax_submission_on_edit_profile)}})})},validate_field:function(i){e.extend(e.validator.messages,{required:urUsersl10n.message_required_fields,url:urUsersl10n.message_url_fields,email:urUsersl10n.message_email_fields,number:urUsersl10n.message_number_fields,confirmpassword:urUsersl10n.message_confirm_password_fields});var r=e(this),s=r.closest(".form-row"),t=!0,a=s.is(".validate-required"),n=s.is(".validate-email"),l=i.type;if("input"===l&&s.removeClass("user-registration-invalid user-registration-invalid-required-field user-registration-invalid-email user-registration-validated"),"validate"===l||"change"===l){if(a&&("checkbox"!==r.attr("type")||r.is(":checked")?""===r.val()&&(s.removeClass("user-registration-validated").addClass("user-registration-invalid user-registration-invalid-required-field"),t=!1):(s.removeClass("user-registration-validated").addClass("user-registration-invalid user-registration-invalid-required-field"),t=!1)),n&&r.val()){new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(r.val())||(s.removeClass("user-registration-validated").addClass("user-registration-invalid user-registration-invalid-email"),t=!1)}t&&s.removeClass("user-registration-invalid user-registration-invalid-required-field user-registration-invalid-email").addClass("user-registration-validated")}},custom_validation:function(i){var s={},t={},a=i.find("[data-min-words]");if(a.length&&e.each(a,function(i,r){var a={};$this=e(r),a.wordsValidator=$this.data("min-words");var n=$this.data("id");s[n]=a,t[n]={wordsValidator:urUsersl10n.message_min_words_fields.replace("%qty%",a.wordsValidator)}}),i.find("#user_confirm_email").length){var n=i.closest(".ur-frontend-form").attr("id");s.user_confirm_email={required:!0,equalTo:"#"+n+" #user_email"},t.user_confirm_email={required:urUsersl10n.message_required_fields,equalTo:urUsersl10n.message_confirm_email_fields}}if(i.hasClass("edit-password"))s.password_2={equalTo:"#password_1"},t.password_2=urUsersl10n.message_confirm_password_fields;else if(i.hasClass("register")&&i.find("#user_confirm_password").length){n=i.closest(".ur-frontend-form").attr("id");s.user_confirm_password={required:!0,equalTo:"#"+n+" #user_pass"},t.user_confirm_password={required:urUsersl10n.message_required_fields,equalTo:urUsersl10n.message_confirm_password_fields}}var l=i.find("#user_login"),u={};l.length&&void 0!==l.data("username-length")&&(u.lengthValidator=l.data("username-length")),"no"==l.data("username-character")&&(u.SpecialCharacterValidator=l.data("username-character")),s.user_login=u;var d=i.find(".field-checkbox"),o=i.find(".field-multi_select2"),f=i.find(".field-multiple_choice");return d.length&&d.each(function(){e(this).attr("data-field-id").indexOf("user_registration_")>-1&&(r=""),s[r+e(this).attr("data-field-id")+"[]"]={checkLimit:e(this).find("ul").data("choice-limit")?e(this).find("ul").data("choice-limit"):0}}),o.length&&o.each(function(){e(this).attr("data-field-id").indexOf("user_registration_")>-1&&(r=""),s[r+e(this).attr("data-field-id")+"[]"]={checkLimit:e(this).find("select").data("choice-limit")?e(this).find("select").data("choice-limit"):0}}),f.length&&f.each(function(){s[r+e(this).data("field-id")+"[]"]={checkLimit:e(this).find("ul").data("choice-limit")?e(this).find("ul").data("choice-limit"):0}}),{rules:s,messages:t}},custom_validation_messages:function(){e.validator.messages.required=urUsersl10n.message_required_fields,e.validator.messages.url=urUsersl10n.message_url_fields,e.validator.messages.email=urUsersl10n.message_email_fields,e.validator.messages.number=urUsersl10n.message_number_fields,e.validator.messages.confirmpassword=urUsersl10n.message_confirm_password_fields,e.validator.messages.max=function(e,i){return urUsersl10n.message_confirm_number_field_max.replace("%qty%",i.max)},e.validator.messages.min=function(e,i){return urUsersl10n.message_confirm_number_field_min.replace("%qty%",i.min)},e.validator.messages.step=function(e,i){return urUsersl10n.message_confirm_number_field_step.replace("%qty%",i.step)}}};e(window).on("load",function(){s.init()})}(jQuery);