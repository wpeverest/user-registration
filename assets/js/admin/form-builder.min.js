!function(e,t){e(function(){var i={init:function(){t.i18n_admin;i.init_user_profile_modal(),i.init_form_builder(),e(document).on("click",".ur-selected-item",function(){i.handle_selected_item(e(this))}),e(window).on("keydown",function(e){if((e.ctrlKey||e.metaKey)&&"s"===String.fromCharCode(e.which).toLowerCase())return e.preventDefault(),i.ur_save_form(),!1}),e(".ur_save_form_action_button").on("click",function(){i.ur_save_form()}),e(document).on("click",".ur-message .ur-message-close",function(){$message=e(this).closest(".ur-message"),i.removeMessage($message)}),i.init_choice_field_options()},init_user_profile_modal:function(){({init:function(){e(document.body).on("click",".column-data_link a",this.add_item).on("ur_backbone_modal_loaded",this.backbone.init).on("ur_backbone_modal_response",this.backbone.response)},add_item:function(t){return t.preventDefault(),e(this).URBackboneModal({template:"test-demo"}),!1},backbone:{init:function(e,t){},response:function(e,t){}}}).init()},ur_save_form:function(){var a=i.get_validation_status();if(!1!==a.validation_status){var r=i.get_form_data(),n=i.get_form_row_ids(),s=e("#ur_form_id").val(),l=t.post_id;i.ur_parse_int(l,0)!==i.ur_parse_int(s,0)&&(s=0);var d=e("#ur-field-settings :not(.urcl-user-role-field, .uret-override-content-field, .ur_mailerlite_settings)").serializeArray(),o=i.get_form_conditional_role_data(),u=i.get_form_email_content_override_data(),c=e("#ur-multi-part-page-settings").serializeArray(),f={action:"user_registration_form_save_action",security:t.ur_form_save,data:{form_data:JSON.stringify(r),form_row_ids:JSON.stringify(n),form_name:e("#ur-form-name").val(),form_id:s,form_setting_data:d,conditional_roles_settings_data:o,email_content_override_settings_data:u,multipart_page_setting:c}};e(document).trigger("user_registration_admin_before_form_submit",[f]),e.ajax({url:t.ajax_url,data:f,type:"POST",beforeSend:function(){e(".ur_save_form_action_button").append('<span class="ur-spinner is-active"></span>'),e(".ur-notices").remove()},complete:function(a){if(e(".ur_save_form_action_button").find(".ur-spinner").remove(),!0===a.responseJSON.success){var r=t.i18n_admin.i18n_form_successfully_saved;if("1"!==t.is_edit_form){message_body="<p>Want to create a login form as well? Check this <a target='_blank' href='https://docs.wpeverest.com/docs/user-registration/registration-form-and-login-form/how-to-show-login-form/'>link</a>. To know more about other cool features check our <a target='_blank' href='https://docs.wpeverest.com/docs/user-registration/'>docs</a>.</p>",Swal.fire({icon:"success",title:"Form successfully created.",html:message_body}).then(function(e){0===parseInt(s)&&(window.location=t.admin_url+a.responseJSON.data.post_id)})}else i.show_message(r,"success"),0===parseInt(s)&&(window.location=t.admin_url+a.responseJSON.data.post_id)}else{var n=a.responseJSON.data.message;i.show_message(n)}}})}else i.show_message(a.message)},get_validation_status:function(){var i=e.makeArray(t.form_one_time_draggable_fields),a=e.makeArray(t.form_required_fields),r={validation_status:!0,message:""};if(0===e(".ur-selected-item").length)return r.validation_status=!1,r.message=t.i18n_admin.i18n_at_least_one_field_need_to_select,r;if(""===e("#ur-form-name").val())return r.validation_status=!1,r.message=t.i18n_admin.i18n_empty_form_name,r;if(e(".ur_save_form_action_button").find(".ur-spinner").length>0)return r.validation_status=!1,r.message=t.i18n_admin.i18n_previous_save_action_ongoing,r;e.each(e(".ur-selected-item select.ur-settings-selected-countries"),function(){var i=e(this).val();if(!i||Array.isArray(i)&&0===i.length)return r.validation_status=!1,r.message=t.i18n_admin.i18n_select_countries,r}),e.each(e('.ur-input-grids .ur-general-setting-block input[data-field="field_name"]'),function(){var i,a=e(this),n=!1;try{var s=a.val();if(e(".ur-input-grids .ur-general-setting-block").find('input[data-field="field_name"][value="'+s+'"]').length>1)throw t.i18n_admin.i18n_duplicate_field_name;if(""===a.closest(".ur-general-setting-block").find('input[data-field="label"]').val())throw a=a.closest(".ur-general-setting-block").find('input[data-field="label"]'),t.i18n_admin.i18n_empty_field_label;var l=s.match(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/gm);if(null===l||1!==l.length||l[0]!==s)throw t.i18n_admin.i18n_invald_field_name}catch(d){r.validation_status=!1,r.message=d.message===undefined?d:d.message,a.closest(".ur-selected-item").trigger("click"),i=a.attr("data-field"),e("#ur-setting-form").find('input[data-field="'+i+'"]').css({border:"1px solid red"}),setTimeout(function(){e("#ur-setting-form").find('input[data-field="'+i+'"]').removeAttr("style")},2e3),n=!0}if(n)return!1});for(var n=0;n<i.length;n++)if(e(".ur-input-grids").find('.ur-field[data-field-key="'+i[n]+'"]').length>1){r.validation_status=!1,r.message=t.i18n_admin.i18n_multiple_field_key+i[n];break}for(var s=0;s<a.length;s++)if(0===e(".ur-input-grids").find('.ur-field[data-field-key="'+a[s]+'"]').length){if(r.validation_status=!1,0===s)var l=t.i18n_admin.i18n_user_email;else if(1===s)l=t.i18n_admin.i18n_user_password;r.message=l+" "+t.i18n_admin.i18n_field_is_required;break}return r},show_message:function(a,r){var n=e(".ur-form-container").find(".ur-builder-message-container"),s=e("#wpadminbar"),l="";0===n.length&&(e(".ur-form-container").append('<div class="ur-builder-message-container"></div>'),(n=e(".ur-form-container").find(".ur-builder-message-container")).css({top:s.height()+"px"})),l="success"===r?'<div class="ur-message"><div class="ur-success"><p><strong>'+t.i18n_admin.i18n_success+"! </strong>"+a+'</p><span class="dashicons dashicons-no-alt ur-message-close"></span></div></div>':'<div class="ur-message"><div class="ur-error"><p><strong>'+t.i18n_admin.i18n_error+"! </strong>"+a+'</p><span class="dashicons dashicons-no-alt ur-message-close"></span></div></div>';var d=e(l).prependTo(n);setTimeout(function(){d.addClass("entered")},50),setTimeout(function(){i.removeMessage(d)},2e3)},removeMessage:function(e){e.removeClass("entered").addClass("exiting"),setTimeout(function(){e.remove()},120)},get_form_data:function(){var t=[],a=e(".ur-input-grids .ur-single-row");return e.each(a,function(){var a=e(this).find(".ur-grid-list-item"),r=[];e.each(a,function(){var t=e(this),a=i.get_grid_wise_data(t);r.push(a)}),t.push(r)}),t},get_grid_wise_data:function(t){var a=t.find(".ur-selected-item"),r=[];return e.each(a,function(){var t=e(this),a=t.find(".ur-field").attr("data-field-key"),n=e("li[data-field-id ='"+("user_registration_"+a)+"']").find(".ur-icon").attr("class"),s={field_key:a,general_setting:i.get_field_general_setting(t),advance_setting:i.get_field_advance_setting(t),icon:n};r.push(s)}),r},get_field_general_setting:function(t){var a=t.find(".ur-general-setting-block").find(".ur-general-setting-field"),r={},n=[],s=[];return e.each(a,function(){var t=e(this).closest(".ur-general-setting").hasClass("ur-setting-checkbox");if("options"===e(this).attr("data-field")){if("multiple_choice"===e(this).attr("data-field-name")){var a=[];e(this).closest("ul").find("li").each(function(t,i){var n=e(i).find("input.ur-type-checkbox-label").val(),s=e(i).find("input.ur-type-checkbox-money-input").val();a.every(function(e){return e.label!==n})&&(r.options=a.push({label:n,value:s})),r.options=a})}else var l=i.get_ur_data(e(this)).trim();n.every(function(e){return e!==l})&&(r.options=n.push(l),r.options=n)}else"default_value"===e(this).attr("data-field")?!0===t?e(this).is(":checked")&&(r.default_value=s.push(i.get_ur_data(e(this))),r.default_value=s):e(this).is(":checked")&&(r.default_value=i.get_ur_data(e(this))):"html"===e(this).attr("data-field")?r[e(this).attr("data-field")]=i.get_ur_data(e(this)).replace(/"/g,"'"):r[e(this).attr("data-field")]=i.get_ur_data(e(this))}),r},get_field_advance_setting:function(t){var a=t.find(".ur-advance-setting-block").find(".ur_advance_setting"),r={};return e.each(a,function(){r[e(this).attr("data-advance-field")]=i.get_ur_data(e(this))}),r},get_ur_data:function(e){var t="";switch(e.get(0).tagName.toLowerCase()){case"input":switch(e.attr("type")){case"checkbox":e.is(":checked")&&(t=e.val());break;default:t=e.val()}break;case"select":case"textarea":t=e.val()}return t},get_form_row_ids:function(){var t=[],i=e(".ur-input-grids .ur-single-row");return e.each(i,function(){t.push(e(this).attr("data-row-id"))}),t},ur_parse_int:function(e){return parseInt(e,0)},ur_math_ceil:function(e){return Math.ceil(e,0)},get_form_conditional_role_data:function(){var t=[],i=e(".urcl-role-logic-wrap");return e.each(i,function(){var i=e(this).find(".urcl-user-role-field"),a=[],r=[],n="";e.each(i,function(){$field_key=e(this).attr("name").split("["),"user_registration_form_conditional_user_role"===$field_key[0]&&(n=e(this).val(),i.splice(e(this),1))});var s=e(this).find(".urcl-conditional-group");e.each(s,function(){var t=[],i=e(this).find(".urcl-user-role-field");e.each(i,function(){var i={field_key:e(this).attr("name"),field_value:e(this).val()};t.push(i)}),a.push(t)});var l=e(this).find(".urcl-or-groups");e.each(l,function(){var t=e(this).find(".urcl-conditional-or-group"),i=[];e.each(t,function(){var t=[],a=e(this).find(".urcl-user-role-field");e.each(a,function(){var i={field_key:e(this).attr("name"),field_value:e(this).val()};t.push(i)}),i.push(t)}),r.push(i)});var d={assign_role:n,conditions:a,or_conditions:r};t.push(d)}),t},get_form_email_content_override_data:function(){var t={},i=e(".user-registration-email-template-content-wrap");return e.each(i,function(){var i=e(this).find(".user-registration-card__header"),a=e(this).find(".user-registration-card__body");t[e(this).prop("id")]={title:i.find(".user-registration-card__title ").text(),description:i.find(".user-registration-help-tip").data("description"),override:i.find("#uret_override_"+e(this).prop("id")).hasClass("enabled")?1:0,subject:a.find(".uret_subject_input").val(),content:a.find("#user_registration_"+e(this).prop("id")+"_content").val()}}),t},init_form_builder:function(){e.fn.ur_form_builder=function(){var a={active_grid:t.active_grid,number_of_grid_list:t.number_of_grid,min_grid_height:70};return this.each(function(){var r=e(this),n={init:function(){this.single_row(),this.manage_required_fields()},single_row:function(){if("1"!==t.is_edit_form){var i=e("<div class='ur-single-row'/ data-row-id=\"0\">");i.append(e("<div class='ur-grids'/>"));var l=this.get_grid_button();i.find(".ur-grids").append(l),i.find(".ur-grids").find('span[data-id="'+a.active_grid+'"]').addClass("ur-active-grid");var d=this.get_grid_lists(a.active_grid);i.append('<div style="clear:both"></div>'),i.append(d),i.append('<div style="clear:both"></div>'),r.append(i),e(".ur-single-row").eq(0).find(".ur-grid-lists").eq(0).find(".ur-grid-list-item").eq(0).find(".user-registration-dragged-me").remove(),e(".ur-single-row").eq(0).find(".ur-grid-lists").eq(0).find(".ur-grid-list-item").eq(0).append(t.required_form_html)}if(0==r.find(".ur-add-new-row").length){r.append('<button type="button" class="button button-primary dashicons dashicons-plus-alt ur-add-new-row ui-sortable-handle" data-total-rows="0">'+t.add_new+"</button>");var o=r.find(".ur-add-new-row").siblings(".ur-single-row").last().prev().attr("data-row-id");r.find(".ur-add-new-row").attr("data-total-rows",o)}s.render_draggable_sortable(),n.manage_empty_grid(),n.manage_draggable_users_fields()},get_grid_button:function(){var t=e('<div class="ur-grid-containner"/>'),i='<button type="button" class="ur-edit-grid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M28,6V26H4V6H28m2-2H2V28H30V4Z"/></svg></button>';return i+='<button type="button" class="dashicons dashicons-no-alt ur-remove-row"></button>',i+='<div class="ur-toggle-grid-content" style="display:none">',i+="<small>Select the grid column.</small>",i+='<div class="ur-grid-selector" data-grid = "1">',i+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M28,6V26H4V6H28m2-2H2V28H30V4Z"/></svg>',i+="</div>",i+='<div class="ur-grid-selector" data-grid = "2">',i+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M17,4H2V28H30V4ZM4,26V6H15V26Zm24,0H17V6H28Z"/></svg>',i+="</div>",i+='<div class="ur-grid-selector" data-grid = "3">',i+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M22,4H2V28H30V4ZM4,26V6h6V26Zm8,0V6h8V26Zm16,0H22V6h6Z"/></svg>',i+="</div>",i+="</div>",t.html(i),t.html()},get_grid_lists:function(t){for(var i=e('<div class="ur-grid-lists"/>'),r=1;r<=t;r++){var n=e("<div ur-grid-id='"+r+"' class='ur-grid-list-item'></div>"),s=Math.floor(100/t)-t;n.css({width:s+"%","min-height":a.min_grid_height+"px"}),i.append(n)}return i.append('<div style="clear:both"></div>'),i.find(".ur-grid-list-item").eq("0").css({}),i},manage_required_fields:function(){var i=t.form_required_fields,a=e(".ur-input-grids");if(Array.isArray(i))for(var r=0;r<i.length;r++){var n=a.find('.ur-field[data-field-key="'+i[r]+'"]');n.closest(".ur-selected-item").find('select[data-field="required"]').val("yes").trigger("change"),n.closest(".ur-selected-item").find('select[data-field="required"]').find('option[value="yes"]').attr("selected","selected"),n.closest(".ur-selected-item").find('select[data-field="required"]').attr("disabled","disabled")}var s=a.find('select[data-field="required"]').find('option[selected="selected"][value="yes"]').closest(".ur-selected-item").find(".ur-label").find("label");s.find("span").remove(),s.append('<span style="color:red">*</span>')},manage_empty_grid:function(){var t=e(".ur-input-grids"),i=e('<div class="user-registration-dragged-me"/>');t.find(".user-registration-dragged-me").remove(),e.each(t.find(".ur-grid-list-item"),function(){var t=e(this);0===e(this).find(".ur-selected-item").length&&t.append(i.clone())})},manage_draggable_users_fields:function(){var i=t.form_one_time_draggable_fields,a=e("#ur-tab-registered-fields").find("ul.ur-registered-list");e.each(a.find("li"),function(){var t=e(this),a=e(this).attr("data-field-id").replace("user_registration_","");e.inArray(a,i)>=0&&(e(".ur-input-grids").find('.ur-field[data-field-key="'+a+'"]').length>0?t.draggable("disable"):t.draggable("enable"))})},populate_dropped_node:function(a,r){var s={action:"user_registration_user_input_dropped",security:t.user_input_dropped,form_field_id:r},l='<div class="ur-selected-item ajax_added"><div class="ur-action-buttons"><span title="Clone" class="dashicons dashicons-admin-page ur-clone"></span><span title="Trash" class="dashicons dashicons-trash ur-trash"></span></div>(content)</div>';a.closest(".ur-single-row").find(".user-registration-dragged-me").fadeOut(),e.ajax({url:t.ajax_url,data:s,type:"POST",beforeSend:function(){a.removeAttr("class").removeAttr("id").removeAttr("data-field-id").addClass("ur-selected-item").css({width:"auto"}),a.html('<small class="spinner is-active"></small>'),a.addClass("ur-item-dragged")},complete:function(t){if(n.manage_empty_grid(),!0===t.responseJSON.success){var r=e(l.replace("(content)",t.responseJSON.data.template));r.removeClass("ajax_added"),r.removeClass("ur-item-dragged"),a.find(".ajax_added").find(".spinner").remove(),a.find(".ajax_added").remove(),e(r).insertBefore(a),a.remove()}n.manage_draggable_users_fields();var s=r.closest(".ur-selected-item ").find("[data-field='field_name']").val();i.manage_conditional_field_options(s),e('.ur-input-type-select2 .ur-field[data-field-key="select2"] select, .ur-input-type-multi-select2 .ur-field[data-field-key="multi_select2"] select').selectWoo(),e(document.body).trigger("ur_new_field_created")}})}},s={register:function(){this.register_add_new_row(),this.register_remove_row(),this.change_ur_grids(),this.remove_selected_item(),this.clone_selected_item()},register_add_new_row:function(){var t=this;e("body").on("click",".ur-add-new-row",function(){var i=e(this).attr("data-total-rows");e(this).attr("data-total-rows",parseInt(i)+1);var r=e(this).closest(".ur-input-grids").find(".ur-single-row").eq(0).clone();r.attr("data-row-id",parseInt(i)+1),r.find(".ur-grid-lists").html(""),r.find(".ur-grids").find("span").removeClass("ur-active-grid"),r.find(".ur-grids").find('span[data-id="'+a.active_grid+'"]').addClass("ur-active-grid");var s=n.get_grid_lists(a.active_grid);r.find(".ur-grid-lists").append(s.html()),r.insertBefore(".ur-add-new-row"),r.show(),t.render_draggable_sortable(),n.manage_empty_grid(),e(document).trigger("user_registration_row_added",[r])})},register_remove_row:function(){var a=this;e("body").on("click",".ur-remove-row",function(){if(e(".ur-input-grids").find(".ur-single-row:visible").length>1){var r=e(this);ur_confirmation(t.i18n_admin.i18n_are_you_sure_want_to_delete_row,{title:t.i18n_admin.i18n_msg_delete,confirm:function(){var t,n=r.prev();(t=n.hasClass("ur-add-new-row")?n.clone():r.clone().attr("class","dashicons-minus ur-remove-row")).hasClass("ur-add-new-row")&&r.closest(".ur-single-row").prev().find(".ur-remove-row").before(t);var s=r.closest(".ur-single-row");e(document).trigger("user_registration_row_deleted",[s]);var l=s.find(".ur-grid-lists .ur-selected-item .ur-general-setting");e(l).each(function(){e(this).closest(".ur-selected-item").find(" .ur-admin-template .ur-label label").text();var t=e(this).closest(".ur-selected-item").find(" .ur-admin-template .ur-field").data("field-key");if("section_title"!=t&&"html"!=t&&"wysiwyg"!=t&&"billing_address_title"!=t&&"shipping_address_title"!=t){var i=e(this).find("[data-field='field_name']").val();void 0!==i&&(e('[class*="urcl-settings-rules_field_"] option[value="'+i+'"]').remove(),e('[class*="urcl-field-conditional-field-select"] option[value="'+i+'"]').remove())}}),s.remove(),a.check_grid(),i.manage_draggable_users_fields(),Swal.fire({icon:"success",title:"Successfully deleted!",customClass:"user-registration-swal2-modal user-registration-swal2-modal--center",showConfirmButton:!1,timer:1e3})},reject:function(){}})}else i.ur_alert(t.i18n_admin.i18n_at_least_one_row_is_required_to_create_a_registration_form,{title:t.i18n_admin.i18n_cannot_delete_row})})},change_ur_grids:function(){var t=this;e(document).on("click",".ur-grids .ur-edit-grid",function(t){t.stopPropagation(),e(this).siblings(".ur-toggle-grid-content").stop(!0).slideToggle(200)}),e(document).on("click",function(){e(".ur-toggle-grid-content").stop(!0).slideUp(200)}),e(document).on("click",".ur-grids .ur-toggle-grid-content .ur-grid-selector",function(){var i=e(this).closest(".ur-single-row"),a=e(this).attr("data-grid"),r=i.find(".ur-grid-lists .ur-grid-list-item").length,s=n.get_grid_lists(a),l=0;i.find(".ur-grid-lists .ur-grid-list-item").length!==parseInt(a)&&(i.find("button.ur-edit-grid").html(e(this).html()),e.each(i.find(".ur-grid-lists .ur-grid-list-item"),function(){e(this).children("*").each(function(){s.find(".ur-grid-list-item").eq(l).append(e(this).clone()),3===parseInt(e(this).parent().attr("ur-grid-id"))&&3===parseInt(r)&&2===parseInt(a)&&(l=Math.abs(--l))}),(parseInt(a)>r||e(this).children("*").length&&2<=parseInt(a))&&(l=parseInt(a)<=++l?0:l)}),i.find(".ur-grid-lists").eq(0).hide(),s.clone().insertAfter(i.find(".ur-grid-lists")),i.find(".ur-grid-lists").eq(0).remove(),t.render_draggable_sortable(),n.manage_empty_grid())})},render_draggable_sortable:function(){e(".ur-grid-list-item").sortable({containment:".ur-input-grids",over:function(){e(this).addClass("ur-sortable-active"),n.manage_empty_grid()},out:function(){e(this).removeClass("ur-sortable-active"),n.manage_empty_grid()},revert:!0,connectWith:".ur-grid-list-item"}).disableSelection(),e(".ur-input-grids").sortable({containment:".ur-builder-wrapper",tolerance:"pointer",revert:"invalid",placeholder:"ur-single-row",forceHelperSize:!0,over:function(){e(this).addClass("ur-sortable-active")},out:function(){e(this).removeClass("ur-sortable-active")}}),e("#ur-draggabled .draggable").draggable({connectToSortable:".ur-grid-list-item",containment:".ur-registered-from",helper:function(){return e(this).clone().insertAfter(e(this).closest(".ur-tab-contents").siblings(".ur-tab-lists"))},revert:"invalid",stop:function(i,a){if(0!==e(a.helper).closest(".ur-grid-list-item").length){var r=e(a.helper).attr("data-field-id").replace("user_registration_","").trim(),s=e(".ur-input-grids").find('.ur-field[data-field-key="'+r+'"]').length,l=e.makeArray(t.form_one_time_draggable_fields);if(s>0&&e.inArray(r,l)>=0)return show_message(t.i18n_admin.i18n_user_required_field_already_there),void e(a.helper).remove();var d=e(a.helper),o=e(d).attr("data-field-id");if(void 0!==o){var u=e(a.helper).closest(".ur-grid-list-item").find('li[data-field-id="'+e(this).attr("data-field-id")+'"]');n.populate_dropped_node(u,o)}}}}).disableSelection()},remove_selected_item:function(){var i=this;e("body").on("click",".ur-selected-item .ur-action-buttons .ur-trash",function(a){var r=e(this).closest(".ur-selected-item ").find("[data-field='field_name']").val(),s=i,l=e(this);ur_confirmation(t.i18n_admin.i18n_are_you_sure_want_to_delete_field,{title:t.i18n_admin.i18n_msg_delete,showCancelButton:!0,confirmButtonText:t.i18n_admin.i18n_choice_ok,cancelButtonText:t.i18n_admin.i18n_choice_cancel,ele:s,$ele:l,removed_item:r,confirm:function(){return l.closest(".ur-selected-item ").remove(),s.check_grid(),n.manage_empty_grid(),n.manage_draggable_users_fields(),e('[class*="urcl-settings-rules_field_"] option[value="'+r+'"]').remove(),e('[class*="urcl-field-conditional-field-select"] option[value="'+r+'"]').remove(),!1},reject:function(){return!1}})})},clone_selected_item:function(){e("body").on("click",".ur-selected-item .ur-action-buttons  .ur-clone",function(){var a=e(this).closest(".ur-selected-item ").find(".ur-field").attr("data-field-key");if(e(".ur-input-grids").find('.ur-field[data-field-key="'+a+'"]').length>0&&e.inArray(a,t.form_one_time_draggable_fields)>-1)i.show_message(t.i18n_admin.i18n_user_required_field_already_there_could_not_clone);else{var r=e(this).closest(".ur-selected-item ").clone(),n=r.find('input[data-field="field_name"]'),s=n.val().match(/\d+/g),l=s.length>0?s[s.length-1]:"",d=n.val().replace(l,"");r.find('input[data-field="field_name"]').attr("value",d+(new Date).getTime()),e(this).closest(".ur-grid-list-item").append(r);var o=r.find("[data-field='field_name']").val();i.manage_conditional_field_options(o)}})},check_grid:function(){e(".ur-tabs").tabs({disabled:[1]}),e(".ur-tabs").find("a").eq(0).trigger("click",["triggered_click"]),e(".ur-tabs").find('[aria-controls="ur-tab-field-options"]').addClass("ur-no-pointer"),e(".ur-selected-item").removeClass("ur-item-active")}};n.init(),s.register()})},e(".ur-input-grids").ur_form_builder(),e(".ur-tabs .ur-tab-lists").on("click","a.nav-tab",function(){e(".ur-tabs .ur-tab-lists").find("a.nav-tab").removeClass("active"),e(this).addClass("active")}),e(".ur-tabs").tabs(),e(".ur-tabs").find("a").eq(0).trigger("click",["triggered_click"]),e(".ur-tabs").tabs({disabled:[1]})},manage_conditional_field_options:function(t){e(".ur-grid-lists .ur-selected-item .ur-general-setting").each(function(){var i=e(this).closest(".ur-selected-item").find(" .ur-admin-template .ur-label label").text(),a=e(this).closest(".ur-selected-item").find(" .ur-admin-template .ur-field").data("field-key");if("section_title"!=a&&"html"!=a&&"wysiwyg"!=a&&"billing_address_title"!=a&&"shipping_address_title"!=a){var r=e(this).find("[data-field='field_name']").val();if(void 0!==r){!1===e(".urcl-field-conditional-field-select option[value='"+r+"']").length>0&&e('[class*="urcl-field-conditional-field-select"]').append('<option value ="'+r+'" data-type="'+a+'">'+i+" </option>");!1===e(".urcl-rules select.ur_advance_setting.urcl-settings-rules_field_1 option[value='"+r+"']").length>0?(e('[class*="urcl-settings-rules_field_"]').append('<option value ="'+r+'" data-type="'+a+'">'+i+" </option>"),r==t&&e('.urcl-rules select.ur_advance_setting.urcl-settings-rules_field_1.empty-fields option[value="'+t+'"]').remove()):e(".urcl-rules select.ur_advance_setting.urcl-settings-rules_field_1.empty-fields").append('<option value ="'+r+'" data-type="'+a+'">'+i+" </option>")}}}),e(".urcl-rules select.ur_advance_setting.urcl-settings-rules_field_1.empty-fields").removeClass("empty-fields")},handle_selected_item:function(t){e(".ur-registered-inputs").find("ul li.ur-no-pointer").removeClass("ur-no-pointer"),e(".ur-selected-item").removeClass("ur-item-active"),e(t).addClass("ur-item-active"),i.render_advance_setting(e(t)),i.init_events(),e(document).trigger("update_perfect_scrollbar");var n=e(t).find(".ur-field").data("field-key");if("country"===n||"billing_country"===n||"shipping_country"===n){var s=e("#ur-setting-form select.ur-settings-selected-countries");s.on("change",function(t){var i=e(this).val(),a="",r=this;Array.isArray(i)&&i.forEach(function(t){var i=e(r).find('option[value="'+t+'"]').html();a+='<option value="'+t+'">'+i+"</option>"}),e("#ur-setting-form select.ur-settings-default-value").html(a),e(".ur-selected-item.ur-item-active select.ur-settings-default-value").html(a)}).select2({placeholder:"Select countries...",selectionAdapter:a,dropdownAdapter:r,templateResult:function(t){return t.id?e("<div></div>").text(t.text).addClass("wrap"):t.text},templateSelection:function(e){if(!e.id)return e.text;var t=0;return s.val()&&(t=s.val().length),"Selected "+t+" country(s)"}}).on("change",function(t){e(".urcl-rules, .urcl-conditional-group").each(function(){var t=e(this).find(".urcl-field").length?e(this).find(".urcl-field"):e(this).find(".urcl-form-group"),i=t.find("select option:selected").data("type");if("country"===i||"billing_country"===i||"shipping_country"===i){var a=t.find("select option:selected").val(),r=e(this).find(".urcl-value select").val(),n=e('.ur-general-setting-field-name input[value="'+a+'"').closest(".ur-selected-item").find(".ur-advance-selected_countries select option:selected"),s=[];e(this).find(".urcl-value select").html('<option value="">--select--</option>'),n.each(function(){var t=e(this).val(),i=e(this).text();s.push('<option value="'+t+'">'+i+"</option>")}),e(this).find(".urcl-value select").append(s.join("")),e(this).find(".urcl-value select").val(r),e(this).find('.urcl-value select option[value="'+r+'"]').attr("selected","selected")}})}).on("select2:close",function(t){setTimeout(function(){e(":focus").trigger("blur")},1)})}e(document.body).trigger("ur_rendered_field_options"),e(document.body).trigger("init_tooltips")},render_advance_setting:function(t){var i=t.find(".ur-advance-setting-block").clone(),a=t.find(".ur-general-setting-block").clone(),r=e("<form id='ur-setting-form'/>");e("#ur-tab-field-options").html(""),r.append(a),r.append(i),e("#ur-tab-field-options").append(r),e("#ur-tab-field-options").find(".ur-advance-setting-block").show(),e("#ur-tab-field-options").find(".ur-general-setting-block").show(),1===e(".ur-item-active").length&&(e(".ur-tabs").tabs().tabs("enable",1),e(".ur-tabs").find("a").eq(1).trigger("click",["triggered_click"])),e(".ur-options-list").sortable({containment:".ur-general-setting-options"})},init_events:function(){var t=e(".ur-general-setting-field");e.each(t,function(){var t=e(this);switch(t.attr("data-field")){case"label":t.on("keyup",function(){i.trigger_general_setting_label(e(this))});break;case"field_name":case"max_files":case"input_mask":t.on("change",function(){i.trigger_general_setting_field_name(e(this))});case"default_value":t.on("change",function(){"default_value"===t.attr("data-field")&&(t.closest(".ur-general-setting-block").hasClass("ur-general-setting-select")?i.render_select_box(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-radio")?i.render_radio(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-checkbox")?i.render_check_box(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-multiple_choice")&&i.render_multiple_choice(e(this)))});break;case"options":t.on("keyup",function(){t.closest(".ur-general-setting-block").hasClass("ur-general-setting-select")&&t.siblings('input[data-field="default_value"]').is(":checked")?i.render_select_box(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-radio")?i.render_radio(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-checkbox")?i.render_check_box(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-multiple_choice")&&i.render_multiple_choice(e(this)),i.trigger_general_setting_options(e(this))});break;case"placeholder":t.on("keyup",function(){i.trigger_general_setting_placeholder(e(this))});break;case"required":t.on("change",function(){i.trigger_general_setting_required(e(this))});break;case"hide_label":t.on("change",function(){i.trigger_general_setting_hide_label(e(this))});break;case"description":case"html":t.on("keyup",function(){i.trigger_general_setting_description(e(this))})}});var a=e("#ur-setting-form .ur_advance_setting");e(".ur-settings-enable-min-max").on("change",function(){"true"===e(this).val()?(e(".ur-item-active .ur-advance-min_date, #ur-setting-form .ur-advance-min_date").show(),e(".ur-item-active .ur-advance-max_date, #ur-setting-form .ur-advance-max_date").show(),e("#ur-setting-form .ur-settings-min-date").addClass("flatpickr-field").flatpickr({disableMobile:!0,"static":!0,onChange:function(t,i,a){e(".ur-item-active .ur-settings-min-date").val(i)},onOpen:function(t,i,a){a.set("maxDate",e(".ur-item-active .ur-settings-max-date").val())}}),e("#ur-setting-form .ur-settings-max-date").addClass("flatpickr-field").flatpickr({disableMobile:!0,"static":!0,onChange:function(t,i,a){e(".ur-item-active .ur-settings-max-date").val(i)},onOpen:function(t,i,a){a.set("minDate",e(".ur-item-active .ur-settings-min-date").val())}})):(e(".ur-item-active .ur-advance-min_date, #ur-setting-form .ur-advance-min_date").hide(),e(".ur-item-active .ur-advance-max_date, #ur-setting-form .ur-advance-max_date").hide())}),e.each(a,function(){var t=e(this);switch(t.attr("data-advance-field")){case"date_format":t.on("change",function(){i.trigger_general_setting_date_format(e(this))});break;case"min_date":"true"===e(".ur-item-active").find(".ur-settings-enable-min-max").val()?e(this).addClass("flatpickr-field").flatpickr({disableMobile:!0,"static":!0,defaultDate:new Date(e(".ur-item-active").find(".ur-settings-min-date").val()),onChange:function(t,i,a){e(".ur-item-active").find(".ur-settings-min-date").val(i)},onOpen:function(t,i,a){a.set("maxDate",new Date(e(".ur-item-active").find(".ur-settings-max-date").val()))}}):e(".ur-item-active .ur-advance-min_date, #ur-setting-form .ur-advance-min_date").hide();break;case"max_date":"true"===e(".ur-item-active").find(".ur-settings-enable-min-max").val()?e(this).addClass("flatpickr-field").flatpickr({disableMobile:!0,"static":!0,defaultDate:new Date(e(".ur-item-active").find(".ur-settings-max-date").val()),onChange:function(t,i,a){e(".ur-item-active").find(".ur-settings-max-date").val(i)},onOpen:function(t,i,a){a.set("minDate",new Date(e(".ur-item-active .ur-settings-min-date").val()))}}):e(".ur-item-active .ur-advance-max_date, #ur-setting-form .ur-advance-max_date").hide()}var a=t.get(0).tagName.toLowerCase();"country_advance_setting_default_value"===t.attr("data-id")&&e(".ur-builder-wrapper #ur-input-type-country").find('option[value="'+t.val()+'"]').attr("selected","selected");var r="change";switch(a){case"input":r="keyup";break;case"select":r="change";break;case"textarea":r="keyup";break;default:r="change"}"valid_file_type"!==t.attr("data-advance-field")&&"payment_methods"!==t.attr("data-advance-field")||t.select2(),e(this).on(r,function(){i.trigger_advance_setting(t,a)}),e(this).on("paste",function(){i.trigger_advance_setting(t,a)})})},trigger_general_setting_label:function(t){var i=e(".ur-selected-item.ur-item-active");i.find(".ur-label").find("label").text(t.val()),i.find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').attr("value",t.val());var a=e(".ur-selected-item.ur-item-active .ur-general-setting").find("[data-field='field_name']").val();e('[class*="urcl-settings-rules_field_"] option[value="'+a+'"]').text(t.val()),e('[class*="urcl-field-conditional-field-select"] option[value="'+a+'"]').text(t.val())},trigger_general_setting_field_name:function(t){var i=e(".ur-selected-item.ur-item-active"),a=i.find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').attr("value");i.find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').attr("value",t.val()),e('[class*="urcl-settings-rules_field_"] option[value="'+a+'"]').attr("value",t.val()),e('[class*="urcl-field-conditional-field-select"] option[value="'+a+'"]').attr("value",t.val())},render_text_area:function(t){switch(e(".ur-selected-item.ur-item-active").find(".ur-field").attr("data-field-key")){case"select":i.render_select_box(t);break;case"checkbox":i.render_check_box(t);break;case"radio":i.render_radio(t);break;case"multiple_choice":i.render_multiple_choice(t)}},render_select_box:function(t){var i=t.val().trim(),a=e(".ur-selected-item.ur-item-active"),r=t.closest("li").index(),n=a.find(".ur-field").find("select");n.html(""),n.append("<option value='"+i+"'>"+i+"</option>"),a.find(".ur-general-setting-options > ul.ur-options-list > li").each(function(t,i){var a=e(i).find('[data-field="default_value"]');t===r?a.prop("checked",!0):a.prop("checked",!1)})},render_radio:function(t){var i=t.closest("ul").find("li"),a=undefined,r=[];i.each(function(t,i){var n=e(i).find("input.ur-type-radio-label").val();n=n.trim(),!0===(s=e(i).find("input.ur-type-radio-value").is(":checked"))&&(a=t),r.every(function(e){return e.value!==n})&&r.push({value:n,radio:s})});var n=e(".ur-selected-item.ur-item-active"),s=n.find(".ur-field");s.html("");for(var l=0;l<r.length;l++)""!==r[l]&&s.append('<label><input value="'+r[l].value.trim()+'" type="radio" '+(r[l].radio?"checked":"")+" disabled>"+r[l].value.trim()+"</label>");n.find(".ur-general-setting-options > ul.ur-options-list > li").each(function(t,i){var r=e(i).find('[data-field="default_value"]');t===a?r.prop("checked",!0):r.prop("checked",!1)})},render_check_box:function(t){var i=[],a=t.closest("ul").find("li"),r=t.closest("li").index();a.each(function(t,a){var r=e(a).find("input.ur-type-checkbox-label").val();r=r.trim(),s=e(a).find("input.ur-type-checkbox-value").is(":checked"),i.every(function(e){return e.value!==r})&&i.push({value:r,checkbox:s})});var n=e(".ur-selected-item.ur-item-active"),s=n.find(".ur-field");s.html("");for(var l=0;l<i.length;l++)""!==i[l]&&s.append('<label><input value="'+i[l].value.trim()+'" type="checkbox" '+(i[l].checkbox?"checked":"")+" disabled>"+i[l].value.trim()+"</label>");"checkbox"===t.attr("type")&&(t.is(":checked")?n.find(".ur-general-setting-options li:nth("+r+') input[data-field="default_value"]').prop("checked",!0):n.find(".ur-general-setting-options li:nth("+r+') input[data-field="default_value"]').prop("checked",!1))},render_multiple_choice:function(t){var i=[],a=t.closest("ul").find("li"),r=t.closest("li").index();a.each(function(t,a){var r=e(a).find("input.ur-type-checkbox-label").val(),n=e(a).find("input.ur-type-checkbox-money-input").val(),l=e(a).find("input.ur-type-checkbox-money-input").attr("data-currency");r=r.trim(),n=n.trim(),l=l.trim(),s=e(a).find("input.ur-type-checkbox-value").is(":checked"),i.every(function(e){return e.label!==r})&&i.push({label:r,value:n,currency:l,checkbox:s})});var n=e(".ur-selected-item.ur-item-active"),s=n.find(".ur-field");s.html("");for(var l=0;l<i.length;l++)""!==i[l]&&s.append('<label><input value="'+i[l].label.trim()+'" type="checkbox" '+(i[l].checkbox?"checked":"")+" disabled>"+i[l].label.trim()+" - "+i[l].currency.trim()+" "+i[l].value.trim()+"</label>");"checkbox"===t.attr("type")&&(t.is(":checked")?n.find(".ur-general-setting-options li:nth("+r+') input[data-field="default_value"]').prop("checked",!0):n.find(".ur-general-setting-options li:nth("+r+') input[data-field="default_value"]').prop("checked",!1))},trigger_general_setting_options:function(t){var i=e(".ur-selected-item.ur-item-active"),a=t.closest("li").index();"multiple_choice"===t.attr("data-field-name")?i.find(".ur-general-setting-block li:nth("+a+') input[name="'+t.attr("name")+'"]').val(t.val()):i.find(".ur-general-setting-block li:nth("+a+') input[data-field="'+t.attr("data-field")+'"]').val(t.val()),i.find(".ur-general-setting-block li:nth("+a+') input[data-field="default_value"]').val(t.val()),t.closest("li").find('[data-field="default_value"]').val(t.val())},trigger_general_setting_description:function(t){var i=e(".ur-selected-item.ur-item-active");i.find(".ur-field").find("textarea").attr("description",t.val()),i.find(".ur-general-setting-block").find('textarea[data-field="'+t.attr("data-field")+'"]').val(t.val())},trigger_general_setting_placeholder:function(t){var i=e(".ur-selected-item.ur-item-active");i.find(".ur-field").find("input").attr("placeholder",t.val()),i.find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').val(t.val())},trigger_general_setting_required:function(t){var i=e(".ur-selected-item.ur-item-active");i.find(".ur-label").find("label").find("span").remove(),"yes"===t.val()&&i.find(".ur-label").find("label").append('<span style="color:red">*</span>'),i.find(".ur-general-setting-block").find('select[data-field="'+t.attr("data-field")+'"]').find('option[value="'+t.val()+'"]').attr("selected","selected")},trigger_general_setting_date_format:function(t){e(".ur-selected-item.ur-item-active").find(".ur-field").find("input").attr("placeholder",t.val())},trigger_general_setting_hide_label:function(t){e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find('select[data-field="'+t.attr("data-field")+'"]').find('option[value="'+t.val()+'"]').attr("selected","selected")},trigger_advance_setting:function(t,a){var r=e(".ur-selected-item.ur-item-active"),n=t.attr("data-id"),s=r.find(".ur-advance-setting-block").find('[data-id="'+n+'"]');switch(a){case"input":s.val(t.val());break;case"select":if(s.find("option").prop("selected",!1),t.prop("multiple")){var l=t.val();s.val(l)}else s.find('option[value="'+t.val()+'"]').attr("selected","selected");break;case"textarea":s.val(t.val()),i.render_text_area(t.val())}},ur_alert:function(e,t){void 0===t&&(t={}),Swal.fire({icon:"error",title:t.title,text:e,customClass:"user-registration-swal2-modal user-registration-swal2-modal--center"})},init_choice_field_options:function(){e(document).on("sortstop",".ur-options-list",function(t,a){var r=e(this);i.handle_options_sort(r)}),e(document).on("click",".ur-options-list .add",function(t){t.preventDefault();var a=e(this);i.add_choice_field_option(a)}),e(document).on("click",".ur-options-list .remove",function(t){t.preventDefault();var a=e(this);i.remove_choice_field_option(a)})},handle_options_sort:function(e){i.ur_clone_options(e),$this.closest(".ur-general-setting-block").hasClass("ur-general-setting-radio")?i.render_radio(e):$this.closest(".ur-general-setting-block").hasClass("ur-general-setting-checkbox")?i.render_check_box(e):$this.closest(".ur-general-setting-block").hasClass("ur-general-setting-multiple_choice")&&i.render_multiple_choice(e)},ur_clone_options:function(t){var i=t.clone(!0,!0),a=e(".ur-selected-item.ur-item-active").find(".ur-general-setting-options .ur-options-list");a.html(""),a.replaceWith(i)},add_choice_field_option:function(t){var a=e(".ur-selected-item.ur-item-active"),r=t.parent("li").index(),n=t.parent("li").clone(!0,!0);n.find('input[data-field="options"]').val(""),n.find('input[data-field="default_value"]').prop("checked",!1),t.parent("li").after(n),a.find(".ur-general-setting-options .ur-options-list > li:nth( "+r+" )").after(n.clone(!0,!0)),t.closest(".ur-general-setting-block").hasClass("ur-general-setting-radio")?i.render_radio(t):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-checkbox")?i.render_check_box(t):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-multiple_choice")&&i.render_multiple_choice(t)},remove_choice_field_option:function(t){var a=t.closest("ul"),r=a.find("li"),n=e(".ur-selected-item.ur-item-active"),s=t.parent("li").index();a.find("li").length>1&&(t.parent("li").remove(),n.find(".ur-general-setting-options .ur-options-list > li:nth( "+s+" )").remove(),r.closest(".ur-general-setting-block").hasClass("ur-general-setting-radio")?i.render_radio(r):r.closest(".ur-general-setting-block").hasClass("ur-general-setting-checkbox")?i.render_check_box(r):r.closest(".ur-general-setting-block").hasClass("ur-general-setting-multiple_choice")&&i.render_multiple_choice(r))}};i.init(),e(document).ready(function(){var t={};e(document.body).on("click","#load_flatpickr",function(){var i=e(this).data("id"),a=t[i];if(!a){var r=e(this).siblings("#formated_date").val()?e(this).siblings("#formated_date").val():e(this).closest(".ur-field-item").find("#formatted_date").val(),n=e(".ur-frontend-form #"+i+", #fieldset-user_registration #"+i).attr("type","text").val(r);e(this).attr("data-date-format",n.data("date-format")),e(this).attr("data-mode",n.data("mode")),e(this).attr("data-min-date",n.data("min-date")),e(this).attr("data-max-date",n.data("max-date")),e(this).attr("data-default-date",r),a=e(this).flatpickr({disableMobile:!0,onChange:function(t,a,r){e("#"+i).val(a)},onOpen:function(e,t,i){i.set("minDate",n.data("min-date")),i.set("maxDate",n.data("max-date"))}}),t[i]=a}a&&a.open()})}),e(document).on("click",".ur-toggle-heading",function(){e(this).hasClass("closed")?e(this).removeClass("closed"):e(this).addClass("closed");var t=e(this).find(" ~ .ur-registered-list")[0];e(t).slideToggle(),e(this).siblings(".ur-toggle-content").slideToggle()}),e(document.body).on("click",".ur-quick-links-content",function(e){e.stopPropagation()}),e(document.body).on("click",".ur-button-quick-links",function(t){t.stopPropagation(),e(".ur-quick-links-content").slideToggle()}),e(document.body).on("click",function(t){e(".ur-quick-links-content").is(":hidden")||e(".ur-quick-links-content").slideToggle()});var a,r;e.fn.select2.amd.require(["select2/selection/single","select2/selection/placeholder","select2/dropdown","select2/dropdown/search","select2/dropdown/attachBody","select2/utils","select2/selection/eventRelay"],function(t,i,n,s,l,d,o){function u(){}function c(){}a=d.Decorate(t,i),a=d.Decorate(a,o),r=d.Decorate(n,s),r=d.Decorate(r,l),u.prototype.render=function(t){var i=this,a=t.call(this),r=e('<button class="button button-secondary button-medium ur-unselect-all-countries-button" type="button">Unselect All</button>');return r.on("click",function(){i.$element.val([]),i.$element.trigger("change"),i.trigger("close")}),a.find(".select2-dropdown").prepend(r),a},r=d.Decorate(r,u),c.prototype.render=function(t){var i=this,a=t.call(this),r=e('<button class="button button-secondary button-medium ur-select-all-countries-button" type="button">Select All</button>');return r.on("click",function(){var t=[];i.$element.find("option").each(function(){t.push(e(this).val())}),i.$element.val(t),i.$element.trigger("change"),i.trigger("close")}),a.find(".select2-dropdown").prepend(r),a},r=d.Decorate(r,c)})})}(jQuery,window.user_registration_form_builder_data);