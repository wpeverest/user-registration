!function(e,t){e(function(){function i(t,i){active_field=e(".ur-item-active"),target_input_field=e(active_field).find(".user-registration-field-option-group.ur-advance-setting-block"),ur_toggle_content=target_input_field.find(".ur-advance-setting.ur-advance-default_value"),target_input=e(ur_toggle_content).find('input[data-advance-field="'+t+'"]'),target_textarea=e(ur_toggle_content).find('input[data-advance-field="'+t+'"]'),target_input_hidden_field=e(active_field).find(".ur-general-setting-block"),ur_toggle_hidden_content=target_input_hidden_field.find(".ur-general-setting.ur-general-setting-hidden-value"),target_hidden_input=e(ur_toggle_hidden_content).find('input[data-field="'+t+'"]'),ur_toggle_pattern_content=target_input_field.find(".ur-advance-setting.ur-advance-pattern_value"),target_pattern_input=e(ur_toggle_pattern_content).find('input[data-advance-field="'+t+'"]'),target_input.val(i),target_textarea.val(i),target_hidden_input.val(i),target_pattern_input.val(i)}function a(e,i){var a=t.isPro,n=!0;if("user_pass"===e)if(a)var r=t.i18n_admin.i18n_auto_generate_password,s=t.i18n_admin.i18n_learn_more,l=t.ur_remove_password_field_link;else r=t.i18n_admin.i18n_delete_pass_available_in_pro,s=ur_setup_params.upgrade_button,l=t.ur_upgrade_plan_link;else if("user_email"===e){r=t.i18n_admin.i18n_default_cannot_delete_message,s=t.i18n_admin.i18n_ok;n=!1}else{r=t.i18n_admin.i18n_user_email_and_password_fields_are_required_to_create_a_registration_form,s=t.i18n_admin.i18n_ok;n=!1}var o='<i class="dashicons dashicons-trash" ></i>';if(""!==i)var d=o+'<span class="user-registration-swal2-modal__title">'+i+t.i18n_admin.i18n_this_field_is_required;else d=o+'<span class="user-registration-swal2-modal__title">'+t.i18n_admin.i18n_cannot_delete_row;Swal.fire({customClass:"user-registration-swal2-modal user-registration-swal2-modal--centered user-registration-upgrade",title:d,text:r,showCancelButton:n,cancelButtonText:t.i18n_admin.i18n_choice_cancel,showConfirmButton:!0,confirmButtonText:s,confirmButtonColor:"#475bb2 !important"}).then(function(e){e.isConfirmed&&l&&window.open(l,"_blank")})}var n={init:function(){t.i18n_admin;n.init_user_profile_modal(),n.init_form_builder(),e(document).on("click",'ul.ur-tab-lists li[aria-controls="ur-tab-field-options"]',function(){e(".ur-selected-inputs").find("form#ur-field-settings").hide(),e(".ur-builder-wrapper-content").show(),e(".ur-builder-wrapper-footer").show(),0==e(".ur-selected-item.ur-item-active").length&&n.handle_selected_item(e(".ur-selected-item:first"))}),e(document).on("click",".ur-selected-item",function(){n.handle_selected_item(e(this))}),t.is_form_builder&&(e(window).on("keydown",function(e){if((e.ctrlKey||e.metaKey)&&("s"===String.fromCharCode(e.which).toLowerCase()||83===e.which))return e.preventDefault(),n.ur_save_form(),!1}),e(window).on("keydown",function(e){(e.ctrlKey||e.metaKey)&&("p"!==String.fromCharCode(e.which).toLowerCase()&&80!==e.which||(e.preventDefault(),window.open(t.ur_preview)))}),e(window).on("keydown",function(e){(e.ctrlKey||e.metaKey)&&("u"!==String.fromCharCode(e.which).toLowerCase()&&85!==e.which||(e.preventDefault(),window.open(t.ur_user_list_table)))}),e(window).on("keydown",function(e){if((e.ctrlKey||e.metaKey)&&("h"===String.fromCharCode(e.which).toLowerCase()||85===e.which))return e.preventDefault(),n.ur_show_help(),!1})),e("#ur-keyboard-shortcut-link").on("click",function(t){t.preventDefault(),e(".ur-quick-links-content").slideToggle(),n.ur_show_help()}),e(".ur_save_form_action_button").on("click",function(){n.ur_save_form()}),e(".ur-embed-form-button").on("click",function(){e(this).find(".ur-spinner").length>0||n.ur_embed_form(e(this))}),e(document).on("click",".ur-message .ur-message-close",function(){$message=e(this).closest(".ur-message"),n.removeMessage($message)}),n.init_choice_field_options(),e(document).ready(function(){var i=window.location.search,a=new URLSearchParams(i),r=a.get("page"),s=a.get("edit-registration"),l=a.get("form_id"),o=e(".user-registration-setup").length,d=document.referrer.split("page=")[1],c="true"===localStorage.getItem("formUpdated_"+s);"add-new-registration"!==r||null!==s&&(null===s||"add-new-registration"!==d||null===l)||0!==o||c||(e(".ur_save_form_action_button").text(t.i18n_publish_form_button_text),n.ur_show_help())}),e(document.body).on("click",".ur-toggle-bulk-options",function(t){t.preventDefault(),$this=e(this);var i="";i+='<div class="ur-bulk-options-container">',i+='<div class="ur-general-setting ur-setting-textarea ur-general-setting-bulk-options ur-bulk-options-container"><label for="ur-type-textarea">'+$this.data("bulk-options-label")+'<span class="ur-portal-tooltip tooltipstered" data-tip="'+$this.data("bulk-options-tip")+'"></span></label>',i+='<textarea data-field="description" class="ur-general-setting-field ur-type-textarea"></textarea></div>',i+='<a class="button button-small ur-add-bulk-options" href="#">'+$this.data("bulk-options-button")+"</a></div>",$this.parent().next(".ur-bulk-options-container").length?"none"===$this.parent().next(".ur-bulk-options-container").css("display")?$this.parent().next(".ur-bulk-options-container").show():$this.parent().next(".ur-bulk-options-container").hide():e(i).insertAfter($this.parent()).trigger("init_tooltips")}),e(document.body).on("click",".ur-add-bulk-options",function(t){t.preventDefault();var i=e(this).parent().next(".ur-options-list"),a=e(this).parent(".ur-bulk-options-container");if(i.length){var r=a.find(".ur-type-textarea").val().replace(/<\/?[^>]+(>|$)/g,"").split("\n");(r=e.unique(r)).forEach(function(e){if(""!==e){var t=i.find("li").last().find("a.add");n.add_choice_field_option(t,e.trim())}}),a.find(".ur-type-textarea").val("")}})},init_user_profile_modal:function(){({init:function(){e(document.body).on("click",".column-data_link a",this.add_item).on("ur_backbone_modal_loaded",this.backbone.init).on("ur_backbone_modal_response",this.backbone.response)},add_item:function(t){return t.preventDefault(),e(this).URBackboneModal({template:"test-demo"}),!1},backbone:{init:function(e,t){},response:function(e,t){}}}).init()},ur_save_form:function(){var i=n.get_validation_status();if(!1!==i.validation_status){"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave();var a=n.get_form_data(),r=n.get_form_row_data(),s=!1;if(e.each(r,function(){e(this)[0].fields&&e(this)[0].fields.length<1&&(n.show_message(t.form_repeater_row_empty),s=!0)}),!s){var l=n.get_form_row_ids(),o=e("#ur_form_id").val(),d=t.post_id;n.ur_parse_int(d,0)!==n.ur_parse_int(o,0)&&(o=0);var c=e("#ur-field-settings :not(.urcl-user-role-field, .uret-override-content-field, .ur_mailerlite_settings)").serializeArray(),u=n.get_form_conditional_role_data(),_=n.get_form_conditional_submit_data(),f=n.get_form_email_content_override_data(),g=n.get_form_restriction_submit_data(),p=e("#ur-multi-part-page-settings").serializeArray(),m=e("#user_registration_profile_completeness_custom_percentage_field input, #user_registration_profile_completeness_custom_percentage_field select").serializeArray(),h=e("#urfr_max_limit_user_registration_value, #urfr_max_limit_user_registration_period, #urfr_password_restriction, #urfr_age_criteria_equation").serializeArray(),v={action:"user_registration_form_save_action",security:t.ur_form_save,data:{form_data:JSON.stringify(a),row_data:JSON.stringify(r),form_row_ids:JSON.stringify(l),form_name:e("#ur-form-name").val(),form_id:o,form_setting_data:c,conditional_roles_settings_data:u,conditional_submit_settings_data:_,email_content_override_settings_data:f,multipart_page_setting:p,profile_completeness__custom_percentage:m,form_restriction_extra_settings_data:h,form_restriction_submit_data:g}};if(e(document).trigger("user_registration_admin_before_form_submit",[v]),"undefined"==typeof v.data.ur_payment_disabled||!1!==v.data.ur_payment_disabled[0].validation_status)if("undefined"==typeof v.data.ur_invalid_currency_status||!1!==v.data.ur_invalid_currency_status[0].validation_status){if(v.data.ur_google_sheets_integration!==undefined&&(google_sheets_connections=v.data.ur_google_sheets_integration,google_sheets_connections.length>0&&google_sheets_connections[0].hasOwnProperty("mapped_fields"))){var b=google_sheets_connections[0].mapped_fields;if(e.isEmptyObject(b))return void n.show_message(t.i18n_admin.i18n_google_sheets_sheet_empty_error);var k=!1;for(var y in b)if(b.hasOwnProperty(y)&&"user_email"===b[y]){k=!0;break}if(!k)return void n.show_message(t.i18n_admin.i18n_google_sheets_user_email_missing_error)}if(0!=e("#user_registration_profile_completeness_completion_percentage",e(document)).length){var w=parseFloat(e("#user_registration_profile_completeness_completion_percentage",e(document)).val().replace(/[^\d\.]/g,"").replace(/\.(([^\.]*)\.)*/g,".$2"));if(w<=0)return void n.show_message(t.i18n_admin.i18n_pc_profile_completion_error);var x=0;if(e.each(m,function(e,t){"user_registration_profile_completeness_custom_percentage_field[]"==t.name&&""!==t.value&&(x+=parseFloat(m[e+1].value))}),x>w)return void n.show_message(t.i18n_admin.i18n_pc_custom_percentage_filed_error)}e.ajax({url:t.ajax_url,data:v,type:"POST",beforeSend:function(){e(".ur_save_form_action_button").append('<span class="ur-spinner is-active"></span>'),e(".ur-notices").remove()},complete:function(i){if(e(".ur_save_form_action_button").find(".ur-spinner").remove(),!0===i.responseJSON.success){var a=t.i18n_admin.i18n_form_successfully_saved;if(t.is_edit_form)n.show_message(a,"success"),0===parseInt(o)&&(window.location=t.admin_url+i.responseJSON.data.post_id);else{message_body="<p>Want to create a login form as well? Check this <a rel='noreferrer noopener' target='_blank' href='https://docs.wpuserregistration.com/registration-form-and-login-form/how-to-show-login-form/'>link</a>. To know more about other cool features check our <a rel='noreferrer noopener' target='_blank' href='https://docs.wpuserregistration.com/'>docs</a>.</p>",Swal.fire({icon:"success",title:"Form successfully created.",html:message_body}).then(function(e){0===parseInt(o)&&(window.location=t.admin_url+i.responseJSON.data.post_id)})}}else{var r=i.responseJSON.data.message;n.show_message(r)}e(".ur_save_form_action_button").text(t.i18n_update_form_button_text),localStorage.setItem("formUpdated_"+o,!0)}}).fail(function(){Swal.fire({icon:"error",title:t.ajax_form_submit_error_title,html:"<br />"+t.ajax_form_submit_error,customClass:"user-registration-swal2-modal user-registration-swal2-modal--center",confirmButtonText:"Troubleshoot",allowOutsideClick:!1,showCloseButton:!0}).then(function(e){e.isConfirmed&&window.open(t.ajax_form_submit_troubleshooting_link)})})}else n.show_message(v.data.ur_invalid_currency_status[0].validation_message);else n.show_message(v.data.ur_payment_disabled[0].validation_message)}}else n.show_message(i.message)},ur_embed_form:function(i){var a={action:"user_registration_embed_page_list",security:t.ur_embed_page_list};e.ajax({url:t.ajax_url,data:a,type:"POST",beforeSend:function(){i.append('<span class="ur-spinner is-active"></span>'),e(".ur-notices").remove()},success:function(a){function n(){var i='<div class=""><p>'+t.i18n_admin.i18n_embed_description+"</p></div>";Swal.fire({icon:"info",title:t.i18n_admin.i18n_embed_form_title,html:i,showCancelButton:!0,confirmButtonText:t.i18n_admin.i18n_embed_to_existing_page,cancelButtonText:t.i18n_admin.i18n_embed_to_new_page,showCloseButton:!0,customClass:"user-registration-swal2-modal  user-registration user-registration-swal2-modal--center user-registrationswal2-icon-content-info user-registration-info swal2-show"}).then(function(i){var r=e(".ur-embed-form-button").attr("data-form_id");i.isConfirmed?function(i,a){var r='<div class="ur-embed-select-existing-page-container"><p>'+t.i18n_admin.i18n_embed_existing_page_description+'</p><select name="ur-embed-select-existing-page-name" id="ur-embed-select-existing-page-name">',s="<option disabled selected>Select Page</option>";i.data.forEach(function(e){s+='<option data-id="'+e.ID+'" value="'+e.ID+'">'+e.post_title+"</option>"});modelContent=r+s+"</select>",Swal.fire({icon:"info",title:t.i18n_admin.i18n_embed_form_title,html:modelContent,showCloseButton:!0,showCancelButton:!0,cancelButtonText:t.i18n_admin.i18n_embed_go_back_btn,confirmButtonText:t.i18n_admin.i18n_embed_lets_go_btn,cancelButtonText:t.i18n_admin.i18n_embed_go_back_btn,customClass:"user-registration-swal2-modal  user-registration user-registration-swal2-modal--center user-registration-info swal2-show"}).then(function(i){if(i.isDismissed)n();else if(i.isConfirmed){var r=e("#ur-embed-select-existing-page-name").val(),s={action:"user_registration_embed_form_action",security:t.ur_embed_action,page_id:r,form_id:a};e.ajax({url:t.ajax_url,type:"POST",data:s,success:function(e){e.success&&(window.location=e.data)}})}})}(a,r):i.dismiss===Swal.DismissReason.cancel&&function(i){var a='<div class="ur-embed-new-page-container"><p>'+t.i18n_admin.i18n_embed_new_page_description+"</p>";modelContent=a+'<div style="min-width:400px; width:100%;"><input type="text" name="page_title" /></div>',Swal.fire({icon:"info",title:t.i18n_admin.i18n_embed_form_title,html:modelContent,showCancelButton:!0,confirmButtonText:t.i18n_admin.i18n_embed_lets_go_btn,cancelButtonText:t.i18n_admin.i18n_embed_go_back_btn,customClass:"user-registration-swal2-modal  user-registration user-registration-swal2-modal--center user-registration-info swal2-show"}).then(function(a){if(a.isDismissed)n();else if(a.isConfirmed){var r=e("[name='page_title']").val(),s={action:"user_registration_embed_form_action",security:t.ur_embed_action,page_title:r,form_id:i};e.ajax({url:t.ajax_url,type:"POST",data:s,success:function(e){e.success&&(window.location=e.data)}})}})}(r)})}i.find(".ur-spinner").remove(),n()}})},ur_show_help:function(){if(e(".jconfirm").length)jc.close();else{var i="<ul>";e.each(t.i18n_shortcut_keys,function(e,t){i+='<li class="ur-shortcut-keyword"><div class="ur-shortcut-title">'+t+'</div><div class="ur-key"><span class="ur-key-ctrl">'+e.split("+")[0]+'</span><i class="ur-key-plus"> + </i><span class="ur-key-character"><b>'+e.split("+")[1]+"</b></span></div></li>"}),i+="</ul>",jc=e.dialog({title:t.i18n_shortcut_key_title,content:i,icon:"dashicons dashicons-info",type:"blue",useBootstrap:"false",boxWidth:"550px",buttons:{confirm:{text:t.i18n_close,btnClass:"btn-confirm",keys:["enter"]}},escapeKey:!0,backgroundDismiss:function(){return!0},theme:"material"})}},get_validation_status:function(){var i=e.makeArray(t.form_one_time_draggable_fields),a=e.makeArray(t.form_required_fields);e("#user_registration_pro_auto_password_activate").is(":checked")&&a.splice(a.indexOf("user_pass"),1);var n={validation_status:!0,message:""};if(0===e(".ur-selected-item").length)return n.validation_status=!1,n.message=t.i18n_admin.i18n_at_least_one_field_need_to_select,n;if(""===e("#ur-form-name").val())return n.validation_status=!1,n.message=t.i18n_admin.i18n_empty_form_name,n;if(e("#user_registration_enable_stripe").is(":checked")&&e("#user_registration_enable_stripe_recurring").is(":checked")&&e(".ur-input-type-coupon-field").length>0)return e("#user_registration_enable_stripe_recurring").prop("checked",!1),n.validation_status=!1,n.message=t.i18n_admin.i18n_no_stripe_for_coupon,n;if(e(".ur_save_form_action_button").find(".ur-spinner").length>0)return n.validation_status=!1,n.message=t.i18n_admin.i18n_previous_save_action_ongoing,n;if(e("#user_registration_form_setting_minimum_password_strength_Custom").is(":checked")){if(e("#user_registration_form_setting_form_minimum_pass_length").val()<6)return n.validation_status=!1,n.message=t.i18n_admin.i18n_min_custom_password_length_error,n;["minimum_uppercase","minimum_digits","minimum_special_chars","max_char_repeat_length"].forEach(function(i){if(e("#user_registration_form_setting_form_"+i).val()<0){n.validation_status=!1;var a=i.replace(/_/g," ");return a=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(a),n.message=a+" "+t.i18n_admin.i18n_custom_password_negative_value_error,n}})}e.each(e(".ur-selected-item select.ur-settings-selected-countries"),function(){var i=e(this).val();if(!i||Array.isArray(i)&&0===i.length)return n.validation_status=!1,n.message=t.i18n_admin.i18n_select_countries,n}),e.each(e('.ur-input-grids .ur-general-setting-block input[data-field="field_name"]'),function(){var i,a=e(this),r=!1;try{var s=a.val();if(e(".ur-input-grids .ur-general-setting-block").find('input[data-field="field_name"][value="'+s+'"]').length>1)throw t.i18n_admin.i18n_duplicate_field_name;if(""===a.closest(".ur-general-setting-block").find('input[data-field="label"]').val())throw a=a.closest(".ur-general-setting-block").find('input[data-field="label"]'),t.i18n_admin.i18n_empty_field_label;var l=s.match(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/gm);if(null===l||1!==l.length||l[0]!==s)throw t.i18n_admin.i18n_invald_field_name}catch(o){n.validation_status=!1,n.message=o.message===undefined?o:o.message,a.closest(".ur-selected-item").trigger("click"),i=a.attr("data-field"),e("#ur-setting-form").find('input[data-field="'+i+'"]').css({border:"1px solid red"}),setTimeout(function(){e("#ur-setting-form").find('input[data-field="'+i+'"]').removeAttr("style")},2e3),r=!0}if(r)return!1});for(var r=0;r<i.length;r++)if(e(".ur-input-grids").find('.ur-field[data-field-key="'+i[r]+'"]').length>1){n.validation_status=!1,n.message=t.i18n_admin.i18n_multiple_field_key+i[r];break}if("sms_verification"===e("#user_registration_form_setting_login_options").val()){a=a.concat(["phone_fields"])}var s=e("#user_registration_enable_paypal_standard"),l=e("#user_registration_enable_stripe"),o=e("#user_registration_enable_authorize_net");if(s.is(":checked")){a=a.concat(["payment_fields"])}else if(l.is(":checked")){a=a.concat(["payment_fields","stripe_gateway"])}else if(o.is(":checked")){a=a.concat(["payment_fields","authorize_net_gateway"])}for(var d=0;d<a.length;d++){if("phone_fields"===a[d]){if(e(".ur-input-grids").find('.ur-field[data-field-key="phone"]').length<1){n.validation_status=!1;var c=t.i18n_admin.i18n_phone_field;n.message=c+" "+t.i18n_admin.i18n_field_is_required;break}var u=e("#user_registration_form_setting_default_phone_field option:selected").attr("data-phone-format");if(void 0===u||"smart"===u)continue;n.validation_status=!1,n.message=t.i18n_admin.i18n_smart_phone_field;break}if("payment_fields"===a[d]){var _=e(".ur-input-grids").find('.ur-field[data-field-key="multiple_choice"]').length,f=e(".ur-input-grids").find('.ur-field[data-field-key="subscription_plan"]').length,g=e(".ur-input-grids").find('.ur-field[data-field-key="single_item"]').length,p=e(".ur-input-grids").find(".ur-payment-slider-sign:visible").length;if(f<1&&_<1&&g<1&&p<1){n.validation_status=!1;c=t.i18n_admin.i18n_payment_field;n.message=c+" "+t.i18n_admin.i18n_field_is_required;break}}else if(0===e(".ur-input-grids").find('.ur-field[data-field-key="'+a[d]+'"]').length){if(n.validation_status=!1,0===d)c=t.i18n_admin.i18n_user_email;else if(1===d)c=t.i18n_admin.i18n_user_password;else if("authorize_net_gateway"===a[d])c=t.i18n_admin.i18n_anet_field;else c=t.i18n_admin.i18n_stripe_field;n.message=c+" "+t.i18n_admin.i18n_field_is_required;break}}return e.each(e(".ur-input-grids").find('.ur-field[data-field-key="text"]'),function(){var i=e(this).closest(".ur-selected-item").find(".ur-advance-setting-block .ur-settings-size").val(),a=e(this).closest(".ur-selected-item").find(".ur-label label").html();i<1&&(n.validation_status=!1,n.message=a+" "+t.i18n_admin.i18n_input_size)}),e.each(e(".ur-input-grids").find('.ur-field[data-field-key="password"]'),function(){var i=e(this).closest(".ur-selected-item").find(".ur-advance-setting-block .ur-settings-size").val(),a=e(this).closest(".ur-selected-item").find(".ur-label label").html();i<1&&(n.validation_status=!1,n.message=a+" "+t.i18n_admin.i18n_input_size)}),e.each(e(".ur-input-grids").find('.ur-field[data-field-key="file"]'),function(){var i=e(this).closest(".ur-selected-item").find(".ur-general-setting-block .ur-general-setting-maximum-number-limit-on-uploads input").val(),a=e(this).closest(".ur-selected-item").find(".ur-label label").html();i<1&&(n.validation_status=!1,n.message=a+" "+t.i18n_admin.i18n_input_size);var r=e(this).closest(".ur-selected-item").find(".ur-advance-setting-block input[data-id='file_advance_setting_max_upload_size']").val(),s=t.max_upload_size_ini;parseInt(r)>parseInt(s)&&(n.validation_status=!1,n.message=a+" "+t.i18n_admin.i18n_max_upload_size)}),e.each(e(".ur-input-grids").find('.ur-field[data-field-key="number"]'),function(){var i=e(this).closest(".ur-selected-item").find(".ur-advance-setting-block .ur-settings-size").val(),a=e(this).closest(".ur-selected-item").find(".ur-label label").html();i<1&&(n.validation_status=!1,n.message=a+" "+t.i18n_admin.i18n_input_size);var r=e(this).closest(".ur-selected-item").find(".ur-advance-setting-block .ur-settings-min").val(),s=e(this).closest(".ur-selected-item").find(".ur-advance-setting-block .ur-settings-max").val();parseFloat(r)>parseFloat(s)&&(n.validation_status=!1,n.message=a+" "+t.i18n_admin.i18n_min_max_input)}),e.each(e(".ur-input-grids").find('.ur-field[data-field-key="timepicker"]'),function(){var i=e(this).closest(".ur-selected-item").find(".ur-advance-setting-block .ur-settings-time_interval").val(),a=(e(this).closest(".ur-selected-item").find(".ur-advance-setting-block .ur-settings-time_format").val(),e(this).closest(".ur-selected-item").find(".ur-label label").html());i<1&&(n.validation_status=!1,n.message=a+" "+t.i18n_admin.i18n_input_size)}),e.each(e(".ur-input-grids").find('.ur-field[data-field-key="range"]'),function(){var i=e(this).closest(".ur-selected-item").find(".ur-advance-setting-block .ur-settings-step").val(),a=e(this).closest(".ur-selected-item").find(".ur-label label").html();i<1&&(n.validation_status=!1,n.message=a+" "+t.i18n_admin.i18n_input_size);var r=e(this).closest(".ur-selected-item").find(".ur-advance-setting-block .ur-settings-min").val(),s=e(this).closest(".ur-selected-item").find(".ur-advance-setting-block .ur-settings-max").val();parseFloat(r)>parseFloat(s)&&(n.validation_status=!1,n.message=a+" "+t.i18n_admin.i18n_min_max_input)}),e("#urfr_enable_verification").is(":checked")&&"qna"===e("#urfr_verification_type").val()&&(e(".urfr-qna-question-wrapper").length<1&&(n.validation_status=!1,n.message=t.i18n_admin.i18n_urfr_field_required_error),e.each(e(".urfr-qna-block"),function(){var i=e(this).find("input[name='urfr_qna_question']").val(),a=e(this).find("input[name='urfr_qna_answer']").val();""!==i&&""!==a||(n.validation_status=!1,n.message=t.i18n_admin.i18n_urfr_qna_field_empty_error)})),n},show_message:function(i,a){var r=e(".ur-form-container").find(".ur-builder-message-container"),s=e("#wpadminbar"),l="";0===r.length&&(e(".ur-form-container").append('<div class="ur-builder-message-container"></div>'),(r=e(".ur-form-container").find(".ur-builder-message-container")).css({top:s.height()+"px"})),"success"===a?l='<div class="ur-message"><div class="ur-success"><p><strong>'+t.i18n_admin.i18n_success+"! </strong>"+i+'</p><span class="dashicons dashicons-no-alt ur-message-close"></span></div></div>':(e(".ur-error").remove(),l='<div class="ur-message"><div class="ur-error"><p><strong>'+t.i18n_admin.i18n_error+"! </strong>"+i+'</p><span class="dashicons dashicons-no-alt ur-message-close"></span></div></div>');var o=e(l).prependTo(r);setTimeout(function(){o.addClass("entered")},50),1==e(".ur-error").find(".ur-captcha-error").length?(e(".ur-error").css("width","490px"),setTimeout(function(){n.removeMessage(o)},5e3)):setTimeout(function(){n.removeMessage(o)},3e3)},removeMessage:function(e){e.removeClass("entered").addClass("exiting"),setTimeout(function(){e.remove()},120)},get_form_data:function(){var t=[],i=e(".ur-input-grids .ur-single-row");return e.each(i,function(){var i=e(this).find(".ur-grid-list-item"),a=[];e.each(i,function(){var t=e(this),i=n.get_grid_wise_data(t);a.push(i)}),t.push(a)}),t},get_form_row_data:function(){var t=[],i=e(".ur-input-grids .ur-single-row");return e.each(i,function(){var i={},a=e(this).attr("data-row-id");if(e(".ur-individual-row-settings[data-row-id='"+a+"']").length){i.row_id=e(this).attr("data-row-id");var n=e(document).find(".ur-individual-row-settings[data-row-id='"+a+"']"),r=n.find("#user_registration_row_setting_enable_conditional_logic").is(":checked");if(n.find(".urcl-row-logic-wrap").length){i.type="normal",i.conditional_logic_enabled=r;var s,l,o=n.find(".urcl-row-logic-wrap"),d={action:o.find(".urcl-row-field").val(),logic_map:{type:"group",logic_gate:o.find(".urcl-root-logic-gate").val(),conditions:[]}},c=[],u=null;o.find(".urcl-row-conditional-logic-conditions-container").each(function(){s=[],l=e(this).find(".urcl-logic-gate").hasClass("is-active")?e(this).find(".urcl-logic-gate.is-active").data("value"):"OR",e(this).find(".urcl-field").each(function(){s.push({type:"field",triggerer_id:e(this).find(".urcl-field-conditional-field-select").val(),operator:e(this).find(".urcl-select-operator").val(),value:e(this).find(".urcl-row-field-value").val()})}),c.push({type:"group",logic_gate:l||"",conditions:s})}),d.logic_map.conditions=c,u=JSON.stringify(d),i.cl_map=u}if(n.find(".ur-repeater-row-option").attr("data-repeater-id")){var _=n.find(".ur-repeater-row-option").attr("data-repeater-id");i.type="repeater",i.repeater_id=_,i.title=n.find(".ur-repeater-row-option").find("input[name='user_registration_repeater_row_title_"+_+"']").val(),i.field_name=n.find(".ur-repeater-row-option").find("input[name='user_registration_repeater_row_field_name_"+_+"']").val(),i.add_new_label=n.find(".ur-repeater-row-option").find("input[name='user_registration_repeater_row_add_new_label_"+_+"']").val(),i.remove_label=n.find(".ur-repeater-row-option").find("input[name='user_registration_repeater_row_remove_label_"+_+"']").val(),i.repeat_limit=n.find(".ur-repeater-row-option").find("input[name='user_registration_repeater_row_repeat_limit_"+_+"']").val();var f=[];e(this).find("input[data-field='field_name']").each(function(){f.push(e(this).val())}),i.fields=f}i&&t.push(i)}}),t},get_grid_wise_data:function(t){var i=t.find(".ur-selected-item"),a=[];return e.each(i,function(){var t=e(this),i=t.find(".ur-field").attr("data-field-key"),r=e("li[data-field-id ='"+("user_registration_"+i)+"']").find(".ur-icon").attr("class"),s={field_key:i,general_setting:n.get_field_general_setting(t),advance_setting:n.get_field_advance_setting(t),icon:r};a.push(s)}),a},get_field_general_setting:function(t){var i=t.find(".ur-general-setting-block").find(".ur-general-setting-field"),a={},r=[],s=[],l=[];return e.each(i,function(){var t=e(this).closest(".ur-general-setting").hasClass("ur-setting-checkbox");if("options"===e(this).attr("data-field")){if("multiple_choice"===e(this).attr("data-field-name")){var i=[];(u=e(this).closest("ul").find("li")).each(function(t,n){var r=e(n).find("input.ur-type-checkbox-label").val(),s=e(n).find("input.ur-type-checkbox-money-input").val(),l=e(n).find("input.ur-checkbox-selling-price-input").val(),o=e(n).find("input.ur-type-image-choice").val();i.every(function(e){return e.label!==r})&&(a.options=i.push({label:r,value:s,sell_value:l,image:o})),a.options=i})}else if("image-choice"===e(this).attr("data-field-name")){i=[];(u=e(this).closest("ul").find("li")).each(function(t,a){var n=e(a).find("input.ur-type-radio-label,input.ur-type-checkbox-label").val(),r=e(a).find("input.ur-type-image-choice").val();i.every(function(e){return e.label!==n})&&i.push({label:n,image:r})}),a.image_options=i;var o=n.get_ur_data(e(this)).trim();r.every(function(e){return e!==o})&&(a.options=r.push(o));var d=r.filter(Boolean);a.options=d}else if("subscription_plan"===e(this).attr("data-field-name")){i=[];(u=e(this).closest("ul").find("li")).each(function(t,n){var r=e(n).find("input.ur-type-radio-label").val(),s=e(n).find("input.ur-type-radio-money-input").val(),l=e(n).find("input.ur-radio-selling-price-input").val(),o=e(n).find("input.ur-radio-interval-count-input").val(),d=e(n).find(".ur-radio-recurring-period").val(),c=e(n).find("input.ur-radio-trail-interval-count-input").val(),u=e(n).find("input.ur-subscription-expiry-date").val().toString(),_=e(n).find(".ur-radio-trail-recurring-period").val(),f=e(n).find(".ur-radio-enable-expiry-date").val(),g=e(n).find(".ur-radio-enable-trail-period").val();i.every(function(e){return e.label!==r})&&i.push({label:r,value:s,sell_value:l,interval_count:o,recurring_period:d,trail_period_enable:g,trail_interval_count:c,trail_recurring_period:_,subscription_expiry_date:u,subscription_expiry_enable:f}),a.options=i})}else if("captcha"===e(this).attr("data-field-name")){var c=[];(u=e(this).closest("ul").find("li")).each(function(t,i){var n=e(i).find("input.ur-type-captcha-question").val(),r=e(i).find(".ur-type-captcha-answer").val();c.every(function(e){return e.question!==n})&&(a.options=c.push({question:n,answer:r})),a.options=c})}else o=n.get_ur_data(e(this)).trim();r.every(function(e){return e!==o})&&(a.options=r.push(o),a.options=r)}else if("default_value"===e(this).attr("data-field"))!0===t?e(this).is(":checked")&&(a.default_value=s.push(n.get_ur_data(e(this))),a.default_value=s):e(this).is(":checked")&&(a.default_value=n.get_ur_data(e(this)));else if("html"===e(this).attr("data-field"))a[e(this).attr("data-field")]=n.get_ur_data(e(this)).replace(/"/g,"'");else if("image_captcha_options"===e(this).attr("data-field")){var u=e(this).closest("ul").find("li"),_=e(this).closest("ul").attr("data-unique-captcha"),f=[];e.each(u,function(t,i){if("undefined"==typeof l[t]||"undefined"==typeof l[t].icon_tag||"undefined"==typeof l[t]["icon-2"]||"undefined"==typeof l[t]["icon-1"]||"undefined"==typeof l[t]["icon-3"]){var a=e(i).find(".icons-group").find(".icon-wrap");f.correct_icon=e(i).find('input[name="ur_general_setting[captcha_image]['+t+"][correct_icon]["+_+']"]:checked').val(),f.icon_tag=e(i).find('input[name="ur_general_setting[captcha_image]['+t+'][icon_tag]"]').val(),e.each(a,function(i,a){var n=i+1;f["icon-"+n]=e(a).find('input:hidden[name="ur_general_setting[captcha_image]['+t+"][icon-"+n+']"]').val()}),l.push({"icon-1":f["icon-1"],"icon-2":f["icon-2"],"icon-3":f["icon-3"],icon_tag:f.icon_tag,correct_icon:f.correct_icon})}}),a.image_captcha_options=l}else a[e(this).attr("data-field")]=n.get_ur_data(e(this))}),a},get_field_advance_setting:function(t){var i=t.find(".ur-advance-setting-block").find(".ur_advance_setting"),a={};return e.each(i,function(){a[e(this).attr("data-advance-field")]=n.get_ur_data(e(this))}),a},get_ur_data:function(e){var t="";switch(e.get(0).tagName.toLowerCase()){case"input":switch(e.attr("type")){case"checkbox":t=e.is(":checked"),e.hasClass("ur-type-checkbox-value")&&(t=e.val()),e.hasClass("ur-type-toggle")&&!t&&(t="false");break;default:e.hasClass("ur-type-image-choice")||e.hasClass("ur-subscription-expiry-date")||(t=e.val())}break;case"select":case"textarea":t=e.val()}return t},get_form_row_ids:function(){var t=[],i=e(".ur-input-grids .ur-single-row");return e.each(i,function(){t.push(e(this).attr("data-row-id"))}),t},ur_parse_int:function(e){return parseInt(e,0)},ur_math_ceil:function(e){return Math.ceil(e,0)},get_form_restriction_submit_data:function(){var t=e(".urfr-qna-block").map(function(t,i){return{question:e(i).find('input[name="urfr_qna_question"]').val(),answer:e(i).find('input[name="urfr_qna_answer"]').val()}}).get();return JSON.stringify(t)},get_form_conditional_role_data:function(){var t=[],i=e(".urcl-role-logic-wrap");return e.each(i,function(){var i=e(this).find(".urcl-user-role-field"),a=[],n=[],r="";e.each(i,function(){$field_key=e(this).attr("name").split("["),"user_registration_form_conditional_user_role"===$field_key[0]&&(r=e(this).val(),i.splice(e(this),1))});var s=e(this).find(".urcl-conditional-group");e.each(s,function(){var t=[],i=e(this).find(".urcl-user-role-field");e.each(i,function(){var i={field_key:e(this).attr("name"),field_value:e(this).val()};t.push(i)}),a.push(t)});var l=e(this).find(".urcl-or-groups");e.each(l,function(){var t=e(this).find(".urcl-conditional-or-group"),i=[];e.each(t,function(){var t=[],a=e(this).find(".urcl-user-role-field");e.each(a,function(){var i={field_key:e(this).attr("name"),field_value:e(this).val()};t.push(i)}),i.push(t)}),n.push(i)});var o={assign_role:r,conditions:a,or_conditions:n};t.push(o)}),t},get_form_conditional_submit_data:function(){var t=[],i=e(".urcl-submit-logic-wrap");return e.each(i,function(){var i=e(this).find(".urcl-submit-field"),a=[],n=[],r="";e.each(i,function(){$field_key=e(this).attr("name").split("["),"user_registration_form_conditional_submit"===$field_key[0]&&(r=e(this).val(),i.splice(e(this),1))});var s=e(this).find(".urcl-conditional-group");e.each(s,function(){var t=[],i=e(this).find(".urcl-submit-field");e.each(i,function(){var i={field_key:e(this).attr("name"),field_value:e(this).val()};t.push(i)}),a.push(t)});var l=e(this).find(".urcl-or-groups");e.each(l,function(){var t=e(this).find(".urcl-conditional-or-group"),i=[];e.each(t,function(){var t=[],a=e(this).find(".urcl-submit-field");e.each(a,function(){var i={field_key:e(this).attr("name"),field_value:e(this).val()};t.push(i)}),i.push(t)}),n.push(i)});var o={action:r,conditions:a,or_conditions:n};t.push(o)}),t},get_form_email_content_override_data:function(){var t={},i=e(".user-registration-email-template-content-wrap");return e.each(i,function(){var i=e(this).find(".user-registration-card__header"),a=e(this).find(".user-registration-card__body");t[e(this).prop("id")]={title:i.find(".user-registration-card__title ").text(),description:i.find(".user-registration-help-tip").data("description"),override:i.find("#uret_override_"+e(this).prop("id")).hasClass("enabled")?1:0,subject:a.find(".uret_subject_input").val(),content:a.find("#user_registration_"+e(this).prop("id")+"_content").val()}}),t},init_form_builder:function(){e.fn.ur_form_builder=function(){var i={active_grid:t.active_grid,number_of_grid_list:t.number_of_grid,min_grid_height:70};return this.each(function(){var r=e(this),s={init:function(){this.single_row(),this.manage_required_fields(),this.manage_label_hidden_fields(),this.manage_image_choice_class()},single_row:function(){if(!t.is_edit_form){var a=e("<div class='ur-single-row'/ data-row-id=\"0\">");a.append(e("<div class='ur-grids'/>"));var n=this.get_grid_button();a.find(".ur-grids").append(n),a.find(".ur-grids").find('span[data-id="'+i.active_grid+'"]').addClass("ur-active-grid");var o=this.get_grid_lists(i.active_grid);a.append('<div style="clear:both"></div>'),a.append(o),a.append('<div style="clear:both"></div>'),r.append(a),e(".ur-single-row").eq(0).find(".ur-grid-lists").eq(0).find(".ur-grid-list-item").eq(0).find(".user-registration-dragged-me").remove(),e(".ur-single-row").eq(0).find(".ur-grid-lists").eq(0).find(".ur-grid-list-item").eq(0).append(t.required_form_html)}if(0==r.find(".ur-add-new-row").length){r.append('<button type="button" class="button button-primary dashicons dashicons-plus-alt ur-add-new-row ui-sortable-handle">'+t.add_new+"</button>");var d=r.find(".ur-add-new-row").siblings(".ur-single-row").last().prev().attr("data-row-id");r.find(".ur-row-buttons").attr("data-total-rows",d)}l.render_draggable_sortable(),s.manage_empty_grid(),s.manage_draggable_users_fields()},get_grid_button:function(){var t=e('<div class="ur-grid-containner"/>'),i='<button type="button" class="ur-edit-grid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M28,6V26H4V6H28m2-2H2V28H30V4Z"/></svg></button>';return i+='<button type="button" class="dashicons dashicons-no-alt ur-remove-row"></button>',i+='<div class="ur-toggle-grid-content" style="display:none">',i+="<small>Select the grid column.</small>",i+='<div class="ur-grid-selector" data-grid = "1">',i+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M28,6V26H4V6H28m2-2H2V28H30V4Z"/></svg>',i+="</div>",i+='<div class="ur-grid-selector" data-grid = "2">',i+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M17,4H2V28H30V4ZM4,26V6H15V26Zm24,0H17V6H28Z"/></svg>',i+="</div>",i+='<div class="ur-grid-selector" data-grid = "3">',i+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M22,4H2V28H30V4ZM4,26V6h6V26Zm8,0V6h8V26Zm16,0H22V6h6Z"/></svg>',i+="</div>",i+="</div>",t.html(i),t.html()},get_grid_lists:function(t){for(var a=e('<div class="ur-grid-lists"/>'),n=1;n<=t;n++){var r=e("<div ur-grid-id='"+n+"' class='ur-grid-list-item'></div>"),s=Math.floor(100/t)-t;r.css({width:s+"%","min-height":i.min_grid_height+"px"}),a.append(r)}return a.append('<div style="clear:both"></div>'),a.find(".ur-grid-list-item").eq("0").css({}),a},manage_label_hidden_fields:function(){e('input[data-field="hide_label"]').each(function(){e(this).is(":checked")?e(this).closest(".ur-selected-item").find(".ur-label").find("label").hide():e(this).closest(".ur-selected-item").find(".ur-label").find("label").show()})},manage_image_choice_class:function(){e('input[data-field="image_choice"]').each(function(){e(this).is(":checked")?e(this).closest(".ur-selected-item").find(".ur-admin-template").find(".ur-field").addClass("user-registration-image-options"):e(this).closest(".ur-selected-item").find(".ur-admin-template").find(".ur-field").removeClass("user-registration-image-options")})},manage_required_fields:function(){var i=t.form_required_fields,a=e(".ur-input-grids");if(Array.isArray(i))for(var n=0;n<i.length;n++){var r=a.find('.ur-field[data-field-key="'+i[n]+'"]');r.closest(".ur-selected-item").find('input[data-field="required"]').trigger("change"),r.closest(".ur-selected-item").find('input[data-field="required"]').attr("disabled","disabled")}a.find(".ur-selected-item").each(function(){if(e(this).find('input[data-field="required"]').is(":checked")){var t=e(this).find(".ur-label").find("label");t.find("span:contains('*')").remove(),t.append('<span style="color:red">*</span>')}})},manage_empty_grid:function(){var t=e(".ur-input-grids"),i=e('<div class="user-registration-dragged-me"/>');t.find(".user-registration-dragged-me").remove(),e.each(t.find(".ur-grid-list-item"),function(){var t=e(this);0===e(this).find(".ur-selected-item").length&&t.append(i.clone())})},manage_draggable_users_fields:function(){var i=t.form_one_time_draggable_fields,a=e("#ur-tab-registered-fields").find("ul.ur-registered-list");e.each(a.find("li"),function(){var t=e(this),a=e(this).attr("data-field-id").replace("user_registration_","");e.inArray(a,i)>=0&&(!t.hasClass("ur-locked-field")||t.hasClass("ur-locked-field")&&t.hasClass("ur-one-time-draggable-disabled"))&&(e(".ur-input-grids").find('.ur-field[data-field-key="'+a+'"]').length>0?(t.draggable("disable"),t.addClass("ur-locked-field"),t.addClass("ur-one-time-draggable-disabled")):(t.draggable("enable"),t.removeClass("ur-locked-field"),t.removeClass("ur-one-time-draggable-disabled")))});var n=a.find(".ur-locked-field");e.each(n,function(){(r=e(this)).draggable("disable")})},populate_dropped_node:function(i,a){var r=e("#ur_form_id").val(),l={action:"user_registration_user_input_dropped",security:t.user_input_dropped,form_field_id:a,form_id:r},o='<div class="ur-selected-item ajax_added"><div class="ur-action-buttons"><span title="Clone" class="dashicons dashicons-admin-page ur-clone"></span><span title="Trash" class="dashicons dashicons-trash ur-trash"></span></div>(content)</div>';i.closest(".ur-single-row").find(".user-registration-dragged-me").fadeOut(),e.ajax({url:t.ajax_url,data:l,type:"POST",beforeSend:function(){i.removeAttr("class").removeAttr("id").removeAttr("data-field-id").addClass("ur-selected-item").css({width:"auto"}),i.html('<small class="spinner is-active"></small>'),i.addClass("ur-item-dragged")},complete:function(t){if(s.manage_empty_grid(),!0===t.responseJSON.success){var a=e(o.replace("(content)",t.responseJSON.data.template));a.removeClass("ajax_added"),a.removeClass("ur-item-dragged"),i.find(".ajax_added").find(".spinner").remove(),i.find(".ajax_added").remove(),e(a).insertBefore(i),i.remove()}s.manage_draggable_users_fields();var r=a.closest(".ur-selected-item ").find("[data-field='field_name']").val();n.manage_conditional_field_options(r),e('.ur-input-type-select2 .ur-field[data-field-key="select2"] select, .ur-input-type-multi-select2 .ur-field[data-field-key="multi_select2"] select').selectWoo();var l=e(a),d=l.find(".ur-field").data("field-key"),c=l.find('.ur-general-setting.ur-general-setting-field-name input[name="ur_general_setting[field_name]"]').val(),u=l.find(".ur-label label").contents().filter(function(){return 3===this.nodeType}).text().trim(),_=l.find('select.ur_advance_setting.ur-settings-field-visibility[name="'+d+'_advance_setting[field_visibility]"]').val();e(document.body).trigger("ur_new_field_created",[{fieldKey:d,fieldName:c,label:u,visibleTo:_}])}}).fail(function(){n.show_message(t.ajax_form_submit_error_on_field_drag,"error")})}},l={register:function(){this.register_add_new_row(),this.register_remove_row(),this.change_ur_grids(),this.remove_selected_item(),this.clone_selected_item()},register_add_new_row:function(){var a=this;e("body").on("click",".ur-add-new-row",function(){var n=e(this).closest(".ur-row-buttons").attr("data-total-rows");n=void 0!==n?parseInt(n):0,e(this).closest(".ur-row-buttons").attr("data-total-rows",n+1);var r=e(this).closest(".ur-input-grids").find(".ur-single-row").eq(0).clone();r.attr("data-row-id",n+1),r.find(".ur-grid-lists").html(""),r.find(".ur-grids").find("span").removeClass("ur-active-grid"),r.find(".ur-grids").find('span[data-id="'+i.active_grid+'"]').addClass("ur-active-grid");var l=s.get_grid_lists(i.active_grid);if(r.find(".ur-grid-lists").append(l.html()),r.insertBefore(".ur-row-buttons"),r.show(),a.render_draggable_sortable(),s.manage_empty_grid(),e(this).hasClass("ur-add-repeater-row")){r.addClass("ur-repeater-row");var o=e(this).closest(".ur-input-grids").find(".ur-repeater-row").length,d='<div class="ur-repeater-label"  id="user_registration_repeater_row_title_'+o+'"><label>Repeater Row</label></div>';r.attr("data-repeater-id",o),e(d).insertBefore(r.find(".ur-grid-lists"))}var c=e("#ur_form_id").val(),u=e(r).attr("data-row-id"),_={action:"user_registration_generate_row_settings",security:t.ur_new_row_added,form_id:c,row_id:u};e.ajax({url:t.ajax_url,data:_,type:"POST",complete:function(t){if(!0===t.responseJSON.success){var i=t.responseJSON.data;e("form#ur-row-settings").append(i),e(".ur-individual-row-settings").each(function(){e(this).attr("data-row-id")===u?e(this).show():e(this).hide()}),e(r).trigger("click")}}}),e(document).trigger("user_registration_row_added",[r])})},register_remove_row:function(){var i=this;e("body").on("click",".ur-remove-row",function(){var r=e(this).closest(".ur-single-row"),l=[],o=[];if(r.find(".ur-selected-item .ur-field").each(function(){var t=e(this).data("field-key"),i=e(this).closest(".ur-selected-item").find('.ur-general-setting-field-name input[data-field="field_name"]').val(),a=e(this).closest(".ur-selected-item").find('.ur-general-setting-label input[data-field="label"]').val();l.push(t);var n={fieldName:i,fieldLabel:a};o.push(n)}),l.includes("user_pass")&&l.includes("user_email"))a("","");else if(l.includes("user_pass"))a("user_pass","");else if(l.includes("user_email"))a("user_email","");else{var d={delete_item:!0,fields:o};e(document).trigger("user_registration_before_admin_row_remove",[d]),e(".ur-input-grids").find(".ur-single-row:visible").length>1?d.delete_item&&ur_confirmation(t.i18n_admin.i18n_are_you_sure_want_to_delete_row,{title:t.i18n_admin.i18n_msg_delete,confirm:function(){var t,a=r.prev();(t=a.hasClass("ur-add-new-row")?a.clone():r.clone().attr("class","dashicons-minus ur-remove-row")).hasClass("ur-add-new-row")&&r.closest(".ur-single-row").prev().find(".ur-remove-row").before(t);var n=r.closest(".ur-single-row");e(document).trigger("user_registration_row_deleted",[n]);var l=n.find(".ur-grid-lists .ur-selected-item .ur-general-setting");e(l).each(function(){e(this).closest(".ur-selected-item").find(" .ur-admin-template .ur-label label").text();var t=e(this).closest(".ur-selected-item").find(" .ur-admin-template .ur-field").data("field-key");if("section_title"!=t&&"html"!=t&&"wysiwyg"!=t&&"billing_address_title"!=t&&"shipping_address_title"!=t){var i=e(this).find("[data-field='field_name']").val();void 0!==i&&(e('[class*="urcl-settings-rules_field_"] option[value="'+i+'"]').remove(),e('[class*="urcl-field-conditional-field-select"] option[value="'+i+'"]').remove(),e('[id="user_registration_form_setting_default_phone_field"] option[value="'+i+'"]').remove())}}),n.remove(),i.check_grid(),s.manage_draggable_users_fields(),Swal.fire({icon:"success",title:"Successfully deleted!",customClass:"user-registration-swal2-modal user-registration-swal2-modal--center user-registration-swal2-no-button",showConfirmButton:!1,timer:1e3})},reject:function(){}}):n.ur_alert(t.i18n_admin.i18n_at_least_one_row_is_required_to_create_a_registration_form,{title:t.i18n_admin.i18n_cannot_delete_row})}})},change_ur_grids:function(){var t=this;e(document).on("click",".ur-grids .ur-edit-grid",function(t){t.stopPropagation(),e(this).siblings(".ur-toggle-grid-content").stop(!0).slideToggle(200)}),e(document).on("click",function(){e(".ur-toggle-grid-content").stop(!0).slideUp(200)}),e(document).on("click",".ur-grids .ur-toggle-grid-content .ur-grid-selector",function(){var i=e(this).closest(".ur-single-row"),a=e(this).attr("data-grid"),n=i.find(".ur-grid-lists .ur-grid-list-item").length,r=s.get_grid_lists(a),l=0;i.find(".ur-grid-lists .ur-grid-list-item").length!==parseInt(a)&&(i.find("button.ur-edit-grid").html(e(this).html()),e.each(i.find(".ur-grid-lists .ur-grid-list-item"),function(){e(this).children("*").each(function(){r.find(".ur-grid-list-item").eq(l).append(e(this).clone()),3===parseInt(e(this).parent().attr("ur-grid-id"))&&3===parseInt(n)&&2===parseInt(a)&&(l=Math.abs(--l))}),(parseInt(a)>n||e(this).children("*").length&&2<=parseInt(a))&&(l=parseInt(a)<=++l?0:l)}),i.find(".ur-grid-lists").eq(0).hide(),r.clone().insertAfter(i.find(".ur-grid-lists")),i.find(".ur-grid-lists").eq(0).remove(),t.render_draggable_sortable(),s.manage_empty_grid())})},render_draggable_sortable:function(){e(".ur-grid-list-item").sortable({containment:".ur-input-grids",over:function(){e(this).addClass("ur-sortable-active"),s.manage_empty_grid()},out:function(){e(this).removeClass("ur-sortable-active"),s.manage_empty_grid()},connectWith:".ur-grid-list-item"}).disableSelection(),e(".ur-input-grids").sortable({containment:".ur-builder-wrapper",tolerance:"pointer",placeholder:"ur-single-row",forceHelperSize:!0,over:function(){e(this).addClass("ur-sortable-active")},out:function(){e(this).removeClass("ur-sortable-active")}}),e("#ur-draggabled .draggable").draggable({connectToSortable:".ur-grid-list-item",containment:".ur-registered-from",helper:function(){return e(this).clone().insertAfter(e(this).closest(".ur-tab-contents").siblings(".ur-tab-lists"))},stop:function(i,a){if(0!==e(a.helper).closest(".ur-grid-list-item").length){var r=e(a.helper).attr("data-field-id").replace("user_registration_","").trim(),l=e(".ur-input-grids").find('.ur-field[data-field-key="'+r+'"]').length,o=e.makeArray(t.form_one_time_draggable_fields),d=e.makeArray(t.form_repeater_row_not_droppable_fields_lists);if(l>0&&e.inArray(r,o)>=0)return show_message(t.i18n_admin.i18n_user_required_field_already_there),void e(a.helper).remove();if(a.helper.closest(".ur-repeater-row").length>0&&e.inArray(r,d)>=0)return n.show_message(t.i18n_admin.i18n_repeater_fields_not_droppable.replace("%field%",e("li[data-field-id='user_registration_"+r+"']:first").text())),void e(a.helper).remove();var c=e(a.helper),u=e(c).attr("data-field-id");if(void 0!==u){var _=e(a.helper).closest(".ur-grid-list-item").find('li[data-field-id="'+e(this).attr("data-field-id")+'"]');s.populate_dropped_node(_,u)}}}}).disableSelection()},remove_selected_item:function(){var i=this;e("body").on("click",".ur-selected-item .ur-action-buttons .ur-trash",function(n){var r=e(this).closest(".ur-selected-item ").find("[data-field='field_name']").val(),l=i,o=e(this),d=o.closest(".ur-selected-item").find(".ur-field").data("field-key"),c=o.closest(".ur-selected-item").find('.ur-general-setting.ur-general-setting-field-name input[name="ur_general_setting[field_name]"]').val(),u=o.closest(".ur-selected-item").find(".ur-label label").contents().filter(function(){return 3===this.nodeType}).text().trim(),_=e("#user_registration_pro_auto_password_activate").is(":checked");if(e.inArray(d,t.ur_form_non_deletable_fields)>-1){if("user_pass"===d&&!_)return void a(d,u);if("user_pass"!==d)return void a(d,u)}var f={delete_item:!0,removed_item:r,label:u};e(document).trigger("user_registration_before_admin_field_remove",[f]),f.delete_item&&ur_confirmation(t.i18n_admin.i18n_are_you_sure_want_to_delete_field,{title:t.i18n_admin.i18n_msg_delete,showCancelButton:!0,confirmButtonText:t.i18n_admin.i18n_choice_ok,cancelButtonText:t.i18n_admin.i18n_choice_cancel,ele:l,$ele:o,removed_item:r,confirm:function(){return o.closest(".ur-selected-item ").remove(),l.check_grid(),s.manage_empty_grid(),s.manage_draggable_users_fields(),e('[class*="urcl-settings-rules_field_"] option[value="'+r+'"]').remove(),e('[class*="urcl-field-conditional-field-select"] option[value="'+r+'"]').remove(),e('[id="user_registration_form_setting_default_phone_field"] option[value="'+r+'"]').remove(),e(document.body).trigger("ur_field_removed",[{fieldName:c,fieldKey:d,label:u}]),!1},reject:function(){return!1}})})},clone_selected_item:function(){e("body").on("click",".ur-selected-item .ur-action-buttons  .ur-clone",function(){var i=e(this).closest(".ur-selected-item ").find(".ur-field").attr("data-field-key");if(e(".ur-input-grids").find('.ur-field[data-field-key="'+i+'"]').length>0&&e.inArray(i,t.form_one_time_draggable_fields)>-1)n.show_message(t.i18n_admin.i18n_user_required_field_already_there_could_not_clone);else{var a=e(this).closest(".ur-selected-item ").clone(),r=a.find('input[data-field="field_name"]'),s=r.val().match(/\d+/g),l=s.length>0?s[s.length-1]:"",o=r.val().replace(l,"");a.find('input[data-field="field_name"]').attr("value",o+(new Date).getTime()),e(this).closest(".ur-grid-list-item").append(a);var d=a.find("[data-field='field_name']").val();n.manage_conditional_field_options(d)}})},check_grid:function(){e(".ur-tabs").tabs({disabled:[1]}),e(".ur-tabs").find("a").eq(0).trigger("click",["triggered_click"])}};s.init(),l.register()})},e(".ur-input-grids").ur_form_builder(),e(".ur-tabs .ur-tab-lists").on("click","a.nav-tab",function(){e(".ur-tabs .ur-tab-lists").find("a.nav-tab").removeClass("active"),e(this).addClass("active")}),e(".ur-tabs").tabs(),e(".ur-tabs").find("a").eq(0).trigger("click",["triggered_click"]),e(".ur-tabs").tabs({disabled:[1]})},manage_conditional_field_options:function(i){e(".ur-grid-lists .ur-selected-item .ur-general-setting").each(function(){var a=e(this).closest(".ur-selected-item").find(" .ur-admin-template .ur-label label").text(),n=e(this).closest(".ur-selected-item").find(" .ur-admin-template .ur-field").data("field-key");if("section_title"!=n&&"html"!=n&&"wysiwyg"!=n&&"billing_address_title"!=n&&"shipping_address_title"!=n){var r=e(this).find("[data-field='field_name']").val();if(void 0!==r){!1===e(".urcl-field-conditional-field-select option[value='"+r+"']").length>0&&e('[class*="urcl-field-conditional-field-select"]').append('<option value ="'+r+'" data-type="'+n+'">'+a+" </option>");if(!1===e(".urcl-rules select.ur_advance_setting.urcl-settings-rules_field_1 option[value='"+r+"']").length>0?(e('[class*="urcl-settings-rules_field_"]').append('<option value ="'+r+'" data-type="'+n+'">'+a+" </option>"),r==i&&e('.urcl-rules select.ur_advance_setting.urcl-settings-rules_field_1.empty-fields option[value="'+i+'"]').remove()):e(".urcl-rules select.ur_advance_setting.urcl-settings-rules_field_1.empty-fields").append('<option value ="'+r+'" data-type="'+n+'">'+a+" </option>"),"phone"===n){var s=e(this).parent().find(".ur-general-setting-select-format").find("[data-field='phone_format']").val();if(0>=e("#user_registration_form_setting_default_phone_field").length){var l='<div class="form-row ur-enhanced-select" id="user_registration_form_setting_default_phone_field_field" data-priority="">';l+='<label for="user_registration_form_setting_default_phone_field" class="ur-label">'+t.i18n_admin.i18n_default_phone_field+"</label>",l+='<select data-rules="" data-id="user_registration_form_setting_default_phone_field" name="user_registration_form_setting_default_phone_field" id="user_registration_form_setting_default_phone_field" class="select " data-allow_clear="true" data-placeholder="">',l+='<option value="'+r+'" data-phone-format="'+s+'">'+a+"</option>",l+="</select></div>",e("#user_registration_form_setting_login_options_field").after(l),"sms_verification"===e("#user_registration_form_setting_login_options").val()?e("#user_registration_form_setting_default_phone_field").parent().show():e("#user_registration_form_setting_default_phone_field").parent().hide()}else e('#user_registration_form_setting_default_phone_field option[value="'+r+'"]').remove(),e("#user_registration_form_setting_default_phone_field").append('<option value ="'+r+'" data-phone-format="'+s+'">'+a+" </option>")}}}}),e(".urcl-rules select.ur_advance_setting.urcl-settings-rules_field_1.empty-fields").removeClass("empty-fields")},handle_selected_item:function(t){e(".ur-selected-item").removeClass("ur-item-active"),e(t).addClass("ur-item-active"),n.render_advance_setting(e(t)),n.init_events(),e(document).trigger("update_perfect_scrollbar");var i=e(t).find(".ur-field").data("field-key");if(e(document).trigger("user_registration_handle_selected_item",[t]),"country"===i||"billing_country"===i||"shipping_country"===i){var a=e("#ur-setting-form select.ur-settings-selected-countries");a.on("change",function(t){var i=e(this).val(),a="<option value=''>"+user_registration_form_settings_params.ur_default_country_value_option+"</option>",n=this;Array.isArray(i)&&i.forEach(function(t){var i=e(n).find('option[value="'+t+'"]').html();a+='<option value="'+t+'">'+i+"</option>"}),e("#ur-setting-form select.ur-settings-default-value").html(a),e(".ur-selected-item.ur-item-active select.ur-settings-default-value").html(a)}).select2({placeholder:"Select countries...",selectionAdapter:r,dropdownAdapter:s,templateResult:function(t){return t.id?e("<div></div>").text(t.text).addClass("wrap"):t.text},templateSelection:function(e){if(!e.id)return e.text;var t=0;return a.val()&&(t=a.val().length),"Selected "+t+" country(s)"}}).on("change",function(t){e(".urcl-rules, .urcl-conditional-group").each(function(){var t=e(this).find(".urcl-field").length?e(this).find(".urcl-field"):e(this).find(".urcl-form-group"),i=t.find("select option:selected").data("type");if("country"===i||"billing_country"===i||"shipping_country"===i){var a=t.find("select option:selected").val(),n=e(this).find(".urcl-value select").val(),r=e('.ur-general-setting-field-name input[value="'+a+'"').closest(".ur-selected-item").find(".ur-advance-selected_countries select option:selected"),s=[];e(this).find(".urcl-value select").html('<option value="">--select--</option>'),r.each(function(){var t=e(this).val(),i=e(this).text();s.push('<option value="'+t+'">'+i+"</option>")}),e(this).find(".urcl-value select").append(s.join("")),e(this).find(".urcl-value select").val(n),e(this).find('.urcl-value select option[value="'+n+'"]').attr("selected","selected")}})}).on("select2:close",function(t){setTimeout(function(){e(":focus").trigger("blur")},1)})}e(document.body).trigger("ur_rendered_field_options"),e(document.body).trigger("init_tooltips"),e(document.body).trigger("init_field_options_toggle")},render_advance_setting:function(t){var i=t.find(".ur-advance-setting-block").clone(),a=t.find(".ur-general-setting-block").clone(),n=e("<form id='ur-setting-form'/>");e("#ur-tab-field-options").html(""),n.append(a),n.append(i),e("#ur-tab-field-options").append(n),e("#ur-tab-field-options").find(".ur-advance-setting-block").show(),e("#ur-tab-field-options").find(".ur-general-setting-block").show(),1===e(".ur-item-active").length&&(e(".ur-tabs").tabs().tabs("enable",1),e(".ur-tabs").find("a").eq(1).trigger("click",["triggered_click"])),e(".ur-options-list").sortable({containment:".ur-general-setting-options"})},init_events:function(){var t=e(".ur-general-setting-field");e.each(t,function(){var t=e(this);switch(t.attr("data-field")){case"label":t.on("keyup",function(){n.trigger_general_setting_label(e(this))});break;case"field_name":case"max_files":case"input_mask":case"hidden_value":case"custom_class":t.on("change",function(){n.trigger_general_setting_field_name(e(this))});case"phone_format":t.on("change",function(){var i=e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find('input[data-field="field_name"]').attr("value");e('[id="user_registration_form_setting_default_phone_field"] option[value="'+i+'"]').attr("data-phone-format",t.val())});case"default_value":t.on("change",function(){"default_value"===t.attr("data-field")&&(t.closest(".ur-general-setting-block").hasClass("ur-general-setting-select")?n.render_select_box(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-radio")?n.render_radio(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-checkbox")?n.render_check_box(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-multiple_choice")?n.render_multiple_choice(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-subscription_plan")&&n.render_subscription_plan(e(this)))});break;case"options":t.on("keyup",function(){(t.closest(".ur-general-setting-block").hasClass("ur-general-setting-select")||t.closest(".ur-general-setting-block").hasClass("ur-general-setting-select2"))&&t.siblings('input[data-field="default_value"]').length>0?n.render_select_box(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-multi_select2")&&t.siblings('input[data-field="default_value"]').length>0?n.render_multi_select_box(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-radio")?n.render_radio(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-checkbox")?n.render_check_box(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-multiple_choice")?n.render_multiple_choice(e(this)):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-subscription_plan")&&n.render_subscription_plan(e(this)),n.trigger_general_setting_options(e(this))}),t.on("change",function(){t.closest(".ur-general-setting-block").hasClass("ur-general-setting-subscription_plan")&&n.render_subscription_plan(e(this))}),e(".ur-radio-enable-trail-period").each(function(){e(this).is(":checked")?e(this).closest(".ur-subscription-plan").find(".ur-subscription-trail-period-option").show():e(this).closest(".ur-subscription-plan").find(".ur-subscription-trail-period-option").hide(),e(this).on("change",function(){e(this).is(":checked")?e(this).closest(".ur-subscription-plan").find(".ur-subscription-trail-period-option").show():e(this).closest(".ur-subscription-plan").find(".ur-subscription-trail-period-option").hide()})}),e(".ur-radio-enable-expiry-date").each(function(){e(this).is(":checked")?e(this).closest(".ur-subscription-plan").find(".ur-subscription-expiry-option").show():(e(this).closest(".ur-subscription-plan").find(".ur-subscription-expiry-option").hide(),e(this).closest(".ur-subscription-plan").find(".ur-subscription-expiry-option").find(".ur-subscription-expiry-date").val("")),e(this).on("change",function(){e(this).is(":checked")?(e(this).closest(".ur-subscription-plan").find(".ur-subscription-expiry-option").show(),e(this).closest(".ur-subscription-plan").find(".ur-subscription-expiry-option").find(".ur-subscription-expiry-date").val("")):(e(this).closest(".ur-subscription-plan").find(".ur-subscription-expiry-option").hide(),e(this).closest(".ur-subscription-plan").find(".ur-subscription-expiry-option").find(".ur-subscription-expiry-date").val(""))})});break;case"selling_price":t.is(":checked")||e(this).closest(".ur-general-setting-block").find(".ur-selling-price").hide(),t.on("change",function(){e(this).closest(".ur-general-setting-block").find(".ur-selling-price").toggle(),e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find(".ur-selling-price").toggle()}),t.on("change",function(){n.trigger_general_setting_selling_price(e(this))});break;case"trail_period":t.is(":checked")||e(this).closest(".ur-general-setting-block").find(".ur-subscription-trail-period-option").hide(),t.on("change",function(){e(this).closest(".ur-general-setting-block").find(".ur-subscription-trail-period-option").toggle(),e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find(".ur-subscription-trail-period-option").toggle()}),t.on("change",function(){n.trigger_general_setting_trail_period(e(this))});break;case"placeholder":t.on("keyup",function(){n.trigger_general_setting_placeholder(e(this))});break;case"required":t.on("change",function(){n.trigger_general_setting_required(e(this))});break;case"hide_label":t.on("change",function(){n.trigger_general_setting_hide_label(e(this))});break;case"description":case"html":t.on("keyup",function(){n.trigger_general_setting_description(e(this))})}e(document.body).trigger("ur_general_field_settings_to_update_form_fields_in_builder",[t])});var i=e("#ur-setting-form .ur_advance_setting");e(".ur-settings-enable-min-max").on("change",function(){e(this).is(":checked")?(e(".ur-item-active .ur-advance-min_date, #ur-setting-form .ur-advance-min_date").show(),e(".ur-item-active .ur-advance-max_date, #ur-setting-form .ur-advance-max_date").show(),e("#ur-setting-form .ur-settings-min-date").addClass("flatpickr-field").flatpickr({disableMobile:!0,onChange:function(t,i,a){e(".ur-item-active .ur-settings-min-date").val(i)},onOpen:function(t,i,a){a.set("maxDate",e(".ur-item-active .ur-settings-max-date").val())}}),e("#ur-setting-form .ur-settings-max-date").addClass("flatpickr-field").flatpickr({disableMobile:!0,onChange:function(t,i,a){e(".ur-item-active .ur-settings-max-date").val(i)},onOpen:function(t,i,a){a.set("minDate",e(".ur-item-active .ur-settings-min-date").val())}})):(e(".ur-item-active .ur-advance-min_date, #ur-setting-form .ur-advance-min_date").hide(),e(".ur-item-active .ur-advance-max_date, #ur-setting-form .ur-advance-max_date").hide())}),e.each(i,function(){var t=e(this);switch(t.attr("data-advance-field")){case"step":t.on("keyup keydown",function(){t.attr("step",t.val())});break;case"limit_length":case"minimum_length":t.on("change",function(){n.handle_min_max_length(t)}),n.handle_min_max_length(t);break;case"date_format":t.on("change",function(){n.trigger_general_setting_date_format(e(this))});break;case"min_date":e(".ur-item-active").find(".ur-settings-enable-min-max").is(":checked")?e(this).addClass("flatpickr-field").flatpickr({disableMobile:!0,defaultDate:new Date(e(".ur-item-active").find(".ur-settings-min-date").val()),onChange:function(t,i,a){e(".ur-item-active").find(".ur-settings-min-date").val(i)},onOpen:function(t,i,a){a.set("maxDate",new Date(e(".ur-item-active").find(".ur-settings-max-date").val()))}}):e(".ur-item-active .ur-advance-min_date, #ur-setting-form .ur-advance-min_date").hide();break;case"max_date":e(".ur-item-active").find(".ur-settings-enable-min-max").is(":checked")?e(this).addClass("flatpickr-field").flatpickr({disableMobile:!0,defaultDate:new Date(e(".ur-item-active").find(".ur-settings-max-date").val()),onChange:function(t,i,a){e(".ur-item-active").find(".ur-settings-max-date").val(i)},onOpen:function(t,i,a){a.set("minDate",new Date(e(".ur-item-active .ur-settings-min-date").val()))}}):e(".ur-item-active .ur-advance-max_date, #ur-setting-form .ur-advance-max_date").hide();break;case"enable_prepopulate":t.is(":checked")?e(this).closest(".ur-advance-setting-block").find(".ur-advance-parameter_name").show():e(this).closest(".ur-advance-setting-block").find(".ur-advance-parameter_name").hide(),t.on("click",function(){var t=e(".ur-selected-item.ur-item-active"),i=e(this).closest("#ur-setting-form").find("[data-field='field_name']").val(),a=t.find("[data-field='field_name']").val();t.find(".ur-advance-setting-block").find('input[data-field="'+e(this).attr("data-field")+'"]').prop("checked",e(this).is(":checked")),i===a&&(e(this).is(":checked")?(e(this).closest(".ur-advance-setting-block").find(".ur-advance-parameter_name").show(),e(".ur-selected-item.ur-item-active").find(".ur-advance-parameter_name").show()):(e(this).closest(".ur-advance-setting-block").find(".ur-advance-parameter_name").hide(),e(".ur-selected-item.ur-item-active").find(".ur-advance-parameter_name").hide()))});break;case"autocomplete_address":t.is(":checked")?e(this).closest(".ur-advance-setting-block").find(".ur-advance-address_style").show():e(this).closest(".ur-advance-setting-block").find(".ur-advance-address_style").hide(),t.on("click",function(){var t=e(".ur-selected-item.ur-item-active"),i=e(this).closest("#ur-setting-form").find("[data-field='field_name']").val(),a=t.find("[data-field='field_name']").val();t.find(".ur-advance-setting-block").find('input[data-field="'+e(this).attr("data-field")+'"]').prop("checked",e(this).is(":checked")),i===a&&(e(this).is(":checked")?(e(this).closest(".ur-advance-setting-block").find(".ur-advance-address_style").show(),e(".ur-selected-item.ur-item-active").find(".ur-advance-address_style").show()):(e(this).closest(".ur-advance-setting-block").find(".ur-advance-address_style").hide(),e(".ur-selected-item.ur-item-active").find(".ur-advance-address_style").hide()))});break;case"validate_unique":t.is(":checked")?e(this).closest(".ur-advance-setting-block").find(".ur-advance-validation_message").show():e(this).closest(".ur-advance-setting-block").find(".ur-advance-validation_message").hide(),t.on("click",function(){var t=e(".ur-selected-item.ur-item-active"),i=e(this).closest("#ur-setting-form").find("[data-field='field_name']").val(),a=t.find("[data-field='field_name']").val();t.find(".ur-advance-setting-block").find('input[data-field="'+e(this).attr("data-field")+'"]').prop("checked",e(this).is(":checked")),i===a&&(e(this).is(":checked")?(e(this).closest(".ur-advance-setting-block").find(".ur-advance-validation_message").show(),e(".ur-selected-item.ur-item-active").find(".ur-advance-validation_message").show()):(e(this).closest(".ur-advance-setting-block").find(".ur-advance-validation_message").hide(),e(".ur-selected-item.ur-item-active").find(".ur-advance-validation_message").hide()))});break;case"enable_selling_price_single_item":t.is(":checked")||e(this).closest(".ur-advance-setting-block").find(".ur-advance-selling_price").hide(),t.on("change",function(){e(this).closest(".ur-advance-setting-block").find(".ur-advance-selling_price").toggle(),e(".ur-selected-item.ur-item-active").find(".ur-advance-selling_price").toggle()});break;case"enable_pattern":t.is(":checked")||(e(this).closest(".ur-advance-setting-block").find(".ur-advance-pattern_value").hide(),e(this).closest(".ur-advance-setting-block").find(".ur-advance-pattern_message").hide()),t.on("change",function(){e(this).closest(".ur-advance-setting-block").find(".ur-advance-pattern_value").toggle(),e(this).closest(".ur-advance-setting-block").find(".ur-advance-pattern_message").toggle()});break;case"enable_time_slot_booking":var i=t.closest("form").find(".ur-general-setting-timepicker").find(".ur-general-setting-required").find("input");t.is(":checked")||e(this).closest(".ur-advance-setting-block").find(".ur-advance-target_date_field").hide(),t.is(":checked")&&(i.is(":checked")||(i.trigger("click"),i.attr("checked",!0)),e(this).closest(".ur-advance-setting-block").find(".ur-settings-time_range").is(":checked")||(e(this).closest(".ur-advance-setting-block").find(".ur-settings-time_range").trigger("click"),e(this).closest(".ur-advance-setting-block").find(".ur-settings-time_range").attr("checked",!0)),e(this).closest(".ur-advance-setting-block").find(".ur-advance-time_range").hide()),t.on("change",function(){t.is(":checked")&&(i.is(":checked")||(i.trigger("click"),i.attr("checked",!0))),e(this).closest(".ur-advance-setting-block").find(".ur-advance-target_date_field").toggle(),e(this).is(":checked")?(e(this).closest(".ur-advance-setting-block").find(".ur-settings-time_range").is(":checked")||(e(this).closest(".ur-advance-setting-block").find(".ur-settings-time_range").trigger("click"),e(this).closest(".ur-advance-setting-block").find(".ur-settings-time_range").attr("checked",!0)),e(this).closest(".ur-advance-setting-block").find(".ur-advance-time_range").hide()):e(this).closest(".ur-advance-setting-block").find(".ur-advance-time_range").show()});break;case"enable_date_slot_booking":i=t.closest("form").find(".ur-general-setting-date").find(".ur-general-setting-required").find("input");t.is(":checked")&&(i.is(":checked")||(i.trigger("click"),i.attr("checked",!0))),t.on("change",function(){t.is(":checked")&&(i.is(":checked")||(i.trigger("click"),i.attr("checked",!0)))})}var a=t.get(0).tagName.toLowerCase();"country_advance_setting_default_value"===t.attr("data-id")&&e(".ur-builder-wrapper #ur-input-type-country").find('option[value="'+t.val()+'"]').attr("selected","selected");var r="change";switch(a){case"input":r="keyup click";break;case"select":r="change";break;case"textarea":r="keyup";break;default:r="change"}"valid_file_type"!==t.attr("data-advance-field")&&"payment_methods"!==t.attr("data-advance-field")||t.select2(),e(this).on(r,function(){n.trigger_advance_setting(t,a)}),e(this).on("paste",function(){n.trigger_advance_setting(t,a)})})},handle_min_max_length:function(e){var t=e.closest(".ur-advance-setting").next(".ur-advance-setting");e.is(":checked")?(t.show(),t.next(".ur-advance-setting").show()):(t.hide(),t.next(".ur-advance-setting").hide())},trigger_general_setting_label:function(t){var i=e(".ur-selected-item.ur-item-active");i.find(".ur-label").find("label").text(t.val()),e(".ur-selected-item.ur-item-active .ur-general-setting").find("[name='ur_general_setting[required]']").filter(function(){return e(this).is(":checked")||"1"===e(this).val()}).length&&i.find(".ur-label").find("label").append('<span style="color:red">*</span>'),i.find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').attr("value",t.val());var a=e(".ur-selected-item.ur-item-active .ur-general-setting").find("[data-field='field_name']").val();e('[class*="urcl-settings-rules_field_"] option[value="'+a+'"]').text(t.val()),e('[class*="urcl-field-conditional-field-select"] option[value="'+a+'"]').text(t.val()),e('[id="user_registration_form_setting_default_phone_field"] option[value="'+a+'"]').text(t.val())},trigger_general_setting_field_name:function(t){var i=e(".ur-selected-item.ur-item-active"),a=i.find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').attr("value");i.find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').attr("value",t.val()),e('[class*="urcl-settings-rules_field_"] option[value="'+a+'"]').attr("value",t.val()),e('[class*="urcl-field-conditional-field-select"] option[value="'+a+'"]').attr("value",t.val()),e('[id="user_registration_form_setting_default_phone_field"] option[value="'+a+'"]').attr("value",t.val())},render_text_area:function(t){var i=e(".ur-selected-item.ur-item-active").find(".ur-field");switch(i.attr("data-field-key")){case"select":n.render_select_box(t);break;case"checkbox":n.render_check_box(t);break;case"radio":n.render_radio(t);break;case"multiple_choice":n.render_multiple_choice(t);break;case"subscription_plan":n.render_subscription_plan(t)}e(document.body).trigger("ur_sync_textarea_field_settings_in_selected_field_of_form_builder",[i,t])},render_select_box:function(t){var i="";if(t.is(":checked"))i=t.val().trim();var a=e(".ur-selected-item.ur-item-active"),n=t.closest("li").index(),r=a.find(".ur-field").find("select");t.hasClass("ur-type-radio-label")&&(i=r.val());var s=t.closest(".ur-general-setting-options").find("input.ur-general-setting-field.ur-type-radio-label").map(function(){return e(this).val()});r.html(""),e.each(s,function(e,t){r.append("<option value='"+t+"' "+(i===t?"selected":"")+">"+t+"</option>")}),a.find(".ur-general-setting-options > ul.ur-options-list > li").each(function(t,i){var a=e(i).find('[data-field="default_value"]');t===n?a.prop("checked",!0):a.prop("checked",!1)})},render_multi_select_box:function(t){var i="";if(t.is(":checked"))i=t.val().trim();var a=e(".ur-selected-item.ur-item-active"),n=t.closest("li").index(),r=a.find(".ur-field").find("select");t.hasClass("ur-type-checkbox-label")&&(i=r.val());var s=t.closest(".ur-general-setting-options").find("input.ur-general-setting-field.ur-type-checkbox-label").map(function(){return e(this).val()});r.html(""),e.each(s,function(e,t){r.append("<option value='"+t+"' "+(i===t?"selected":"")+">"+t+"</option>")}),a.find(".ur-general-setting-options > ul.ur-options-list > li").each(function(t,i){var a=e(i).find('[data-field="default_value"]');t===n?a.prop("checked",!0):a.prop("checked",!1)})},render_radio:function(i){var a=i.closest("ul").find("li"),n=undefined,r=i.closest(".ur-general-setting-options").siblings(".ur-general-setting-image_choice").find("input"),s=[];a.each(function(t,i){var a=e(i).find("input.ur-type-radio-label").val();a=(a=a.trim()).replace(/<\/?[^>]+(>|$)/g,""),o=e(i).find("input.ur-type-radio-value").is(":checked");var r=e(i).find("input.ur-type-image-choice").val();!0===o&&(n=t),s.every(function(e){return e.value!==a})&&s.push({value:a,radio:o,image:r})});var l=e(".ur-selected-item.ur-item-active"),o=l.find(".ur-field");o.html("");for(var d=0;d<s.length;d++){var c="";r.is(":checked")&&(c=s[d].image&&""!==s[d].image.trim()?'<img src="'+s[d].image+'" width="200px">':'<img src="'+t.ur_placeholder+'" width="200px">'),""!==s[d]&&($checked_class="",r.is(":checked")&&($checked_class=s[d].radio?"ur-image-choice-checked":""),o.append('<label class="'+$checked_class+'"><span class="user-registration-image-choice">'+c+'</span><input value="'+s[d].value.trim()+'" type="radio" '+(s[d].radio?"checked":"")+" disabled>"+s[d].value.trim()+"</label>"))}l.find(".ur-general-setting-options > ul.ur-options-list > li").each(function(t,i){var a=e(i).find('[data-field="default_value"]');t===n?a.prop("checked",!0):a.prop("checked",!1)})},render_check_box:function(i){var a=[],n=i.closest("ul").find("li"),r=i.closest("li").index(),s=i.closest(".ur-general-setting-options").siblings(".ur-general-setting-image_choice").find("input");n.each(function(t,i){var n=e(i).find("input.ur-type-checkbox-label").val();n=(n=(n=n.trim()).replace(/<(?!\/?a\b)[^>]+>/gi,"")).replace(/(?!href|target|download|rel|hreflang|type|name|accesskey|tabindex|title)\b\w+=['"][^'"]*['"]/g,""),/<a(?:(?!<\/a>).)*$/.test(n)&&(n+="</a>"),o=e(i).find("input.ur-type-checkbox-value").is(":checked");var r=e(i).find("input.ur-type-image-choice").val();a.every(function(e){return e.value!==n})&&a.push({value:n,checkbox:o,image:r})});var l=e(".ur-selected-item.ur-item-active"),o=l.find(".ur-field");o.html("");for(var d=0;d<a.length;d++){var c="";s.is(":checked")&&(c=a[d].image&&""!==a[d].image.trim()?'<img src="'+a[d].image+'" width="200px">':'<img src="'+t.ur_placeholder+'" width="200px">'),""!==a[d]&&(a[d].value=a[d].value.replaceAll('"',"'"),$checked_class="",s.is(":checked")&&($checked_class=a[d].checkbox?"ur-image-choice-checked":""),o.append('<label class="'+$checked_class+'"><span class="user-registration-image-choice">'+c+'</span><input value="'+a[d].value.trim()+'" type="checkbox" '+(a[d].checkbox?"checked":"")+" disabled>"+a[d].value.trim()+"</label>"))}"checkbox"===i.attr("type")&&(i.is(":checked")?l.find(".ur-general-setting-options li:nth("+r+') input[data-field="default_value"]').prop("checked",!0):l.find(".ur-general-setting-options li:nth("+r+') input[data-field="default_value"]').prop("checked",!1))},render_multiple_choice:function(i){var a=[],n=i.closest("ul").find("li"),r=i.closest("li").index(),s=i.closest(".ur-general-setting-options").siblings(".ur-general-setting-image_choice").find("input");n.each(function(t,i){var n=e(i).find("input.ur-type-checkbox-label").val(),r=e(i).find("input.ur-type-checkbox-money-input").val(),s=e(i).find("input.ur-checkbox-selling-price-input").val(),l=e(i).find("input.ur-type-image-choice").val(),d=e(i).find("input.ur-type-checkbox-money-input").attr("data-currency");n=n.trim(),r=r.trim(),s=s.trim(),l=l.trim(),d=d.trim(),o=e(i).find("input.ur-type-checkbox-value").is(":checked"),a.every(function(e){return e.label!==n})&&a.push({label:n,value:r,sell_value:s,image:l,currency:d,checkbox:o})});var l=e(".ur-selected-item.ur-item-active"),o=l.find(".ur-field");o.html("");for(var d=0;d<a.length;d++){var c="";s.is(":checked")&&(c=a[d].image&&""!==a[d].image.trim()?'<img src="'+a[d].image+'" width="200px">':'<img src="'+t.ur_placeholder+'" width="200px">'),""!==a[d]&&($checked_class="",s.is(":checked")&&($checked_class=a[d].checkbox?"ur-image-choice-checked":""),o.append('<label class="'+$checked_class+'"><span class="user-registration-image-choice">'+c+'</span><input value="'+a[d].label.trim()+'" type="checkbox" '+(a[d].checkbox?"checked":"")+" disabled>"+a[d].label.trim()+" - "+a[d].currency.trim()+" "+a[d].value.trim()+"</label>"))}"checkbox"===i.attr("type")&&(i.is(":checked")?l.find(".ur-general-setting-options li:nth("+r+') input[data-field="default_value"]').prop("checked",!0):l.find(".ur-general-setting-options li:nth("+r+') input[data-field="default_value"]').prop("checked",!1))},render_subscription_plan:function(t){var i=[],a=e(".ur-selected-item.ur-item-active"),n=t.closest("ul").find("li"),r=t.closest("li").index();n.each(function(t,n){var r=e(n).find("input.ur-type-radio-label").val(),l=e(n).find("input.ur-type-radio-money-input").val(),o=e(n).find("input.ur-radio-selling-price-input").val(),d=e(n).find("input.ur-radio-interval-count-input").val(),c=e(n).find(".ur-radio-recurring-period").val(),u=e(n).find("input.ur-radio-trail-interval-count-input").val(),_=e(n).find("input.ur-subscription-expiry-date").val(),f=e(n).find(".ur-radio-trail-recurring-period").val(),g=e(n).find(".ur-radio-enable-trail-period").prop("checked")?"on":"false";a.find(".ur-general-setting-options li:nth("+t+") .ur-radio-enable-trail-period").val(g);var p=e(n).find(".ur-radio-enable-expiry-date").prop("checked")?"on":"false";a.find(".ur-general-setting-options li:nth("+t+") .ur-radio-enable-expiry-date").val(p);var m=a.find(".ur-general-setting-options li:nth("+t+") .ur-radio-enable-expiry-date");"on"===m.val()?m.prop("checked",!0):m.prop("checked",!1),a.find(".ur-general-setting-options li:nth("+t+") .ur-radio-recurring-period").val(c),a.find(".ur-general-setting-options li:nth("+t+") .ur-radio-trail-recurring-period").val(f),a.find(".ur-general-setting-options li:nth("+t+") .ur-subscription-expiry-date").val(_);var h=e(n).find("input.ur-type-radio-money-input").attr("data-currency");r=r.trim(),l=l.trim(),o=o.trim(),h=h.trim(),s=e(n).find("input.ur-type-radio-value").is(":checked"),i.every(function(e){return e.label!==r})&&i.push({label:r,value:l,sell_value:o,interval_count:d,recurring_period:c,trail_interval_count:u,trail_recurring_period:f,trail_period_enable_val:g,subscription_expiry_enable:p,subscription_expiry_date:_,currency:h,checkbox:s})});var s=a.find(".ur-field");s.html("");for(var l=0;l<i.length;l++)""!==i[l]&&s.append('<label><input value="'+i[l].label.trim()+'" type="radio" '+(i[l].checkbox?"checked":"")+" disabled>"+i[l].label.trim()+" - "+i[l].currency.trim()+" "+i[l].value.trim()+"</label>");"radio"===t.attr("type")&&(t.is(":checked")?a.find(".ur-general-setting-options li:nth("+r+') input[data-field="default_value"]').prop("checked",!0):a.find(".ur-general-setting-options li:nth("+r+') input[data-field="default_value"]').prop("checked",!1))},trigger_general_setting_options:function(t){var i=e(".ur-selected-item.ur-item-active"),a=t.closest("li").index(),n=t.attr("data-field-name");"multiple_choice"===n||"subscription_plan"===n?i.find(".ur-general-setting-block li:nth("+a+') input[name="'+t.attr("name")+'"]').val(t.val()):"captcha"===t.attr("data-field-name")?i.find(".ur-general-setting-block li:nth("+a+') input[name="'+t.attr("name")+'"]').val(t.val()):i.find(".ur-general-setting-block li:nth("+a+') input[data-field="'+t.attr("data-field")+'"]').val(t.val()),i.find(".ur-general-setting-block li:nth("+a+') input[data-field="default_value"]').val(t.val()),t.closest("li").find('[data-field="default_value"]').val(t.val())},trigger_general_setting_selling_price:function(t){e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').prop("checked",t.is(":checked"))},trigger_general_setting_trail_period:function(t){e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').prop("checked",t.is(":checked"))},trigger_general_setting_description:function(t){var i=e(".ur-selected-item.ur-item-active");i.find(".ur-field").find("textarea").attr("description",t.val()),i.find(".ur-general-setting-block").find('textarea[data-field="'+t.attr("data-field")+'"]').val(t.val())},trigger_general_setting_placeholder:function(t){var i=e(".ur-selected-item.ur-item-active");i.find(".ur-field").find("input").attr("placeholder",t.val()),i.find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').val(t.val())},trigger_general_setting_required:function(t){var i=e(".ur-selected-item.ur-item-active");i.find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').prop("checked",t.is(":checked")),i.find(".ur-label").find("label").find("span:contains(*)").remove(),t.is(":checked")&&i.find(".ur-label").find("label").append('<span style="color:red">*</span>')},trigger_general_setting_date_format:function(t){e(".ur-selected-item.ur-item-active").find(".ur-field").find("input").attr("placeholder",t.val())},trigger_general_setting_hide_label:function(t){var i=e(".ur-selected-item.ur-item-active");i.find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').prop("checked",t.is(":checked")),t.is(":checked")?i.find(".ur-label").find("label").hide():i.find(".ur-label").find("label").show()},trigger_advance_setting:function(t,i){var a=e(".ur-selected-item.ur-item-active"),r=t.attr("data-id"),s=a.find(".ur-advance-setting-block").find('[data-id="'+r+'"]');switch(i){case"input":"checkbox"===t.attr("type")?s.prop("checked",t.is(":checked")):s.val(t.val());break;case"select":if(s.find("option").prop("selected",!1),t.prop("multiple")){var l=t.val();s.val(l)}else s.find('option[value="'+t.val()+'"]').prop("selected",!0);break;case"textarea":s.val(t.val()),n.render_text_area(t.val())}},ur_alert:function(e,t){void 0===t&&(t={}),Swal.fire({icon:"error",title:t.title,text:e,customClass:"user-registration-swal2-modal user-registration-swal2-modal--center"})},init_choice_field_options:function(){e(document).on("sortstop",".ur-options-list",function(t,i){var a=e(this);n.handle_options_sort(a)}),e(document).on("click",".ur-options-list .add",function(t){t.preventDefault();var i=e(this);n.add_choice_field_option(i)}),e(document).on("click",".ur-options-list .remove",function(t){t.preventDefault();var i=e(this);n.remove_choice_field_option(i)})},handle_options_sort:function(e){n.ur_clone_options(e),e.closest(".ur-general-setting-block").hasClass("ur-general-setting-radio")?n.render_radio(e):e.closest(".ur-general-setting-block").hasClass("ur-general-setting-checkbox")?n.render_check_box(e):e.closest(".ur-general-setting-block").hasClass("ur-general-setting-multiple_choice")?n.render_multiple_choice(e):e.closest(".ur-general-setting-block").hasClass("ur-general-setting-subscription_plan")&&n.render_subscription_plan(e)},ur_clone_options:function(t){var i=t.clone(!0,!0),a=e(".ur-selected-item.ur-item-active").find(".ur-general-setting-options .ur-options-list");a.html(""),a.replaceWith(i)},add_choice_field_option:function(t,i){$this_obj=e(this);var a=e(".ur-selected-item.ur-item-active"),r=t.closest("li").index(),s=t.closest("li").clone(!0,!0);if(s.find("input.ur-subscription-expiry-date").attr("data-id","expiry-date-index-"+r+Math.floor(900*Math.random())+100),s.find('input[data-field="options"]').val(void 0!==i?i:""),s.find('input[data-field="default_value"]').prop("checked",!1),s.find('select[data-field="options"]').val(""),s.find(".ur-thumbnail-image img").attr("src",""),t.closest(".ur-general-setting-image-captcha-options").length>0)n.handle_add_image_captcha_group(t,a);else{r=t.closest("li").index();(s=t.closest("li").clone(!0,!0)).find('input[data-field="options"]').val(void 0!==i?i:""),s.find('input[data-field="default_value"]').prop("checked",!1),s.find('select[data-field="options"]').val(""),s.find(".ur-thumbnail-image img").attr("src",""),t.closest("li").after(s),a.find(".ur-general-setting-options .ur-options-list > li:nth( "+r+" )").after(s.clone(!0,!0)),t.closest(".ur-general-setting-block").hasClass("ur-general-setting-radio")?n.render_radio(t):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-checkbox")?n.render_check_box(t):t.closest(".ur-general-setting-block").hasClass("ur-general-setting-multiple_choice")&&n.render_multiple_choice(t)}e(document.body).trigger("ur_field_option_changed",[{action:"add",wrapper:a},n,t])},remove_choice_field_option:function(t){var i=t.closest("ul"),a=i.find("li"),r=e(".ur-selected-item.ur-item-active"),s=t.closest("li").index();i.find("li").length>1&&(t.closest(".ur-general-setting-image-captcha-options").length>0?n.handle_remove_image_captcha_group(t,r,s):(r.find(".ur-general-setting-options .ur-options-list > li:nth( "+s+" )").remove(),t.closest("li").remove()),a.closest(".ur-general-setting-block").hasClass("ur-general-setting-radio")?n.render_radio(a):a.closest(".ur-general-setting-block").hasClass("ur-general-setting-checkbox")?n.render_check_box(a):a.closest(".ur-general-setting-block").hasClass("ur-general-setting-multiple_choice")?n.render_multiple_choice(a):a.closest(".ur-general-setting-block").hasClass("ur-general-setting-subscription_plan")&&n.render_subscription_plan(a)),e(document.body).trigger("ur_field_option_changed",[{action:"remove",wrapper:r},n,t])},handle_add_image_captcha_group:function(t,i){var a=parseInt(t.attr("data-last-group")),n=a+1;captcha_unique=t.closest("ul").attr("data-unique-captcha"),cloning_element=t.closest("ul").find('li[data-group="'+a+'"]').clone(!0,!0),cloning_element_icons=cloning_element.find(".icon-wrap"),cloning_element.attr("data-group",n),cloning_element.find(".ur-type-captcha-icon-tag").attr("name","ur_general_setting[captcha_image]["+n+"][icon_tag]"),cloning_element.find(".ur-type-captcha-icon-tag").val(""),cloning_element.find(".ur-type-captcha-icon-tag").attr("placeholder","Icon Tag"),e.each(cloning_element_icons,function(t,i){var a=t+1;e(i).find(".ur-captcha-icon-radio").attr("name","ur_general_setting[captcha_image]["+n+"][correct_icon]["+captcha_unique+"]"),e(i).find(".ur-captcha-icon-radio").prop("checked",!1),e(i).find(".captcha-icon").attr("name","ur_general_setting[captcha_image]["+n+"][icon-"+a+"]"),e(i).find(".captcha-icon").val(""),e(i).find(".captcha-icon").siblings("span").attr("class",""),e(i).find(".dashicons-picker").attr("data-icon-key","icon-"+a),e(i).find(".dashicons-picker").attr("data-group-id",n)}),t.closest("ul").find('li[data-group="'+a+'"]').after(cloning_element),t.attr("data-last-group",n),i.find(".ur-general-setting-image-captcha-options .ur-options-list > li:nth( "+a+" )").after(cloning_element.clone(!0,!0)),i.find(".ur-general-setting-image-captcha-options .ur-options-list .add-icon-group").attr("data-last-group",n)},handle_remove_image_captcha_group:function(t,i,a){i.find(".ur-general-setting-image-captcha-options .ur-options-list > li:nth( "+a+" )").remove();var n=i.find(".ur-general-setting-image-captcha-options .ur-options-list li.ur-custom-captcha"),r=t.closest("li").siblings(".ur-custom-captcha");t.closest("ul.ur-options-list").find(".add-icon-group").attr("data-last-group",parseInt(r.length)-1),t.closest("li").remove();var s=t.closest("ul.ur-options-list").attr("data-unique-captcha");e.each(n,function(t,i){e(i).attr("data-group",t),e(i).find(".ur-type-captcha-icon-tag").attr("name","ur_general_setting[captcha_image]["+t+"][icon_tag]");var a=e(i).find(".icon-wrap");e.each(a,function(i,a){var n=i+1;e(a).find(".captcha-icon").attr("name","ur_general_setting[captcha_image]["+t+"][icon-"+n+"]"),e(a).find(".ur-captcha-icon-radio").attr("name","ur_general_setting[captcha_image]["+t+"][correct_icon]["+s+"]"),e(a).find(".dashicons-picker").attr("data-icon-key","icon-"+n),e(a).find(".dashicons-picker").attr("data-group-id",t)})}),e.each(r,function(t,i){e(i).attr("data-group",t),e(i).find(".ur-type-captcha-icon-tag").attr("name","ur_general_setting[captcha_image]["+t+"][icon_tag]");var a=e(i).find(".icon-wrap");e.each(a,function(i,a){var n=i+1;e(a).find(".captcha-icon").attr("name","ur_general_setting[captcha_image]["+t+"][icon-"+n+"]"),e(a).find(".ur-captcha-icon-radio").attr("name","ur_general_setting[captcha_image]["+t+"][correct_icon]["+s+"]"),e(a).find(".dashicons-picker").attr("data-icon-key","icon-"+n),e(a).find(".dashicons-picker").attr("data-group-id",t)})}),i.find(".ur-general-setting-image-captcha-options .ur-options-list .add-icon-group").attr("data-last-group",parseInt(n.length)-1)}};n.init(),e(document).ready(function(){var t={};e(document.body).on("click",".ur-flatpickr-field",function(){var i=e(this).data("id"),a=t[i];if(!a){var n=e(this).closest(".ur-field-item").find("#formated_date").val();if(0<e(".ur-frontend-form").length)var r=e(".ur-frontend-form #"+i).attr("type","text").val(n);else r=e(".woocommerce-MyAccount-content #"+i).attr("type","text").val(n);e(this).attr("data-date-format",r.data("date-format")),e(this).attr("data-mode",r.data("mode")),e(this).attr("data-locale",r.data("locale")),e(this).attr("data-min-date",r.data("min-date")),e(this).attr("data-max-date",r.data("max-date")),e(this).attr("data-default-date",n),a=e(this).flatpickr({disableMobile:!0,onChange:function(t,a,n){e("#"+i).val(a)},onOpen:function(e,t,i){i.set("minDate",r.data("min-date")),i.set("maxDate",r.data("max-date"))}}),t[i]=a}a&&a.open()})}),e(document).on("click",".ur-toggle-heading",function(){e(this).hasClass("closed")?e(this).removeClass("closed"):e(this).addClass("closed"),e(this).parent(".user-registration-field-option-group").toggleClass("closed").toggleClass("open");var t=e(this).find(" ~ .ur-registered-list")[0];e(t).slideToggle(),e(this).siblings(".ur-toggle-content").stop().slideToggle()}),e(document.body).on("init_field_options_toggle",function(){e(".user-registration-field-option-group.closed").each(function(){e(this).find(".ur-toggle-content").hide()})}).trigger("init_field_options_toggle"),e(document.body).on("click",".ur-quick-links-content",function(e){e.stopPropagation()}),e(document.body).on("click",".ur-button-quick-links",function(t){t.stopPropagation(),e(".ur-quick-links-content").slideToggle()}),e(document.body).on("click",function(t){e(".ur-quick-links-content").is(":hidden")||e(".ur-quick-links-content").slideToggle()}),e(document).find("input[name='user_registration_form_setting_minimum_password_strength']").each(function(){e(this).on("click",function(){e(this).closest(".ur-radio-group-list").find(".active").removeClass("active"),e(this).closest(".ur-radio-group-list").find("input[name='user_registration_form_setting_minimum_password_strength']").prop("checked",!1),e(this).closest(".ur-radio-group-list--item").addClass("active"),e(this).prop("checked",!0)})}),e(document).on("click",function(){e(document).find(".ur-smart-tags-list").is(":visible")&&e(".ur-smart-tags-list").hide()}),e(".ur-smart-tags-list").hide(),e(document.body).on("click",".ur-smart-tags-list-button",function(t){t.stopPropagation(),e(".ur-smart-tags-list").hide(),e(this).parent().find(".ur-smart-tags-list").toggle("show")}),e(document.body).on("click",".ur-select-smart-tag",function(t){t.preventDefault();var a;input_value=e(this).parent().parent().parent().find("input").val(),a=e(this).data("key"),input_value=a;var n=e(this).parent().parent().parent().find("input"),r=n.data("advance-field"),s=n.data("field");i(r!==undefined?r:s,input_value),e(this).parent().parent().parent().find("input").val(input_value),e(document.body).find(".ur-smart-tags-list").hide()}),e(document.body).on("change",".ur_advance_setting.ur-settings-default-value",function(){input_value=e(this).val(),field_name=e(this).data("advance-field"),i(input_value)}),e(document.body).on("change",".ur-general-setting.ur-general-setting-hidden-value input",function(){input_value=e(this).val(),field_name=e(this).data("field"),i(input_value)}),e(document.body).on("change",".ur_advance_setting.ur-settings-pattern_value",function(){input_value=e(this).val(),field_name=e(this).data("advance-field"),i(input_value)});var r,s;e.fn.select2.amd.require(["select2/selection/single","select2/selection/placeholder","select2/dropdown","select2/dropdown/search","select2/dropdown/attachBody","select2/utils","select2/selection/eventRelay"],function(t,i,a,n,l,o,d){function c(){}function u(){}r=o.Decorate(t,i),r=o.Decorate(r,d),s=o.Decorate(a,n),s=o.Decorate(s,l),c.prototype.render=function(t){var i=this,a=t.call(this),n=e('<button class="button button-secondary button-medium ur-unselect-all-countries-button" type="button">Unselect All</button>');return n.on("click",function(){i.$element.val([]),i.$element.trigger("change"),i.trigger("close")}),a.find(".select2-dropdown").prepend(n),a},s=o.Decorate(s,c),u.prototype.render=function(t){var i=this,a=t.call(this),n=e('<button class="button button-secondary button-medium ur-select-all-countries-button" type="button">Select All</button>');return n.on("click",function(){var t=[];i.$element.find("option").each(function(){t.push(e(this).val())}),i.$element.val(t),i.$element.trigger("change"),i.trigger("close")}),a.find(".select2-dropdown").prepend(n),a},s=o.Decorate(s,u)}),e(document.body).on("input",'[data-advance-field="max_upload_size"], [data-field="max_files"]',function(){var t=e(this),i=t.val();i=i.replace(/[^0-9]/g,""),t.val(i)}),e(document).on("click",".ur-input-type-subscription_plan",function(){e(this).next(".ur-general-setting-subscription_plan").find(".ur-subscription-plan").each(function(t){var i="expiry-date-index-"+t;e(this).find(".ur-subscription-expiry-date").attr("data-id",i)})}),e(document.body).on("focusout",'[data-advance-field="max_upload_size"], [data-field="max_files"]',function(){var t=e(this),i=t.val();i=""===i||0===parseInt(i)?"":parseInt(i),t.val(i)})})}(jQuery,window.user_registration_form_builder_data);