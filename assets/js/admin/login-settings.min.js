!function(e){var i={init:function(){i.init_form_builder(),e(document).on("click",".clickable-login-fields",function(){i.handle_selected_item(e(this))}),e(document).on("click",".ur-toggle-heading",function(){e(this).toggleClass("closed"),e(this).parent(".user-registration-field-option-group").toggleClass("closed").toggleClass("open");var i=e(this).find(" ~ .ur-registered-list")[0];e(i).slideToggle(),e(this).siblings(".ur-toggle-content").stop().slideToggle()}),e(document).on("click",'.user-registration-login-form-container ul.ur-tab-lists li[aria-controls="ur-tab-field-options"]',function(){e("form#ur-field-settings").hide(),e(".ur-login-form-wrapper").show()}),e(document).on("click",'.user-registration-login-form-container ul.ur-tab-lists li[aria-controls="ur-tab-login-form-settings"]',function(){e(".ur-login-form-wrapper").hide(),e("form#ur-field-settings").show()}),e('.clickable-login-fields[data-field="username"]').trigger("click"),e('input[name^="user_registration_hide_label_"]').on("change",function(){i.hide_show_field_label(e(this))}).each(function(){i.hide_show_field_label(e(this))})},init_form_builder:function(){e(".ur-tabs .ur-tab-lists").on("click","a.nav-tab",function(){e(".ur-tabs .ur-tab-lists").find("a.nav-tab").removeClass("active"),e(this).addClass("active")}),e(".ur-tabs").tabs(),e(".ur-tabs").find("a").eq(0).trigger("click",["triggered_click"])},handle_selected_item:function(i){var r=e(".clickable-login-fields"),n=e("#ur-tab-field-options div[data-field-key]"),o=i.data("field");r.removeClass("active"),i.addClass("active"),n.each(function(){e(this).addClass("ur-d-none"),e(this).data("field-key")===o&&e(this).removeClass("ur-d-none")})},hide_show_field_label:function(i){var r={password:"password"}[(i.attr("id")||"").replace("user_registration_hide_label_","")]||"username";e("#ur-frontend-form").find('[data-field="'+r+'"] label').show(),i.is(":checked")&&e("#ur-frontend-form").find('[data-field="'+r+'"] label').hide()}};function r(i){var r=i.closest(".user-registration-login-form-global-settings--field"),n=r.closest(".user-registration-login-form-global-settings"),o=i.val(),t=i.attr("id"),s={action:"user_registration_login_settings_page_validation",security:ur_login_form_params.ur_login_settings_save,page_id:o,type:t};0===r.length||r.find(".ur-spinner").length>0||void 0===o||void 0===t||("user_registration_login_options_login_redirect_url"===t&&(n=n.find("span.select2")),n.find(".error.inline").remove(),e.ajax({url:ur_login_form_params.ajax_url,data:s,type:"POST",beforeSend:function(){r.append('<span class="ur-spinner is-active"></span>')},success:function(e){if(!e.success){var i=e.data.message;n.append('<span class="error inline">'+i+"</span>")}},complete:function(e){r.find(".ur-spinner").remove()}}))}function n(){var i=e(".user-registration-login-form-global-settings .error.inline, form#ur-field-settings .user-registration-login-form-global-settings .error.inline").first();if(0===i.length)return null;var r=null,n=null;if(i.closest("#ur-tab-field-options").length>0)r="ur-tab-field-options";else if(i.closest("form#ur-field-settings, #ur-field-all-settings").length>0){r="ur-tab-login-form-settings";var o=i.closest("div[id$='-settings']");0!==o.length&&o.closest("#ur-field-all-settings").length||e("form#ur-field-settings #ur-field-all-settings > div[id$='-settings']").each(function(){if(i.closest("#"+e(this).attr("id")).length>0)return o=e(this),!1}),o.length>0&&(n=o.attr("id"))}return r&&function(i,r){var n=e('.user-registration-login-form-container ul.ur-tab-lists li[aria-controls="'+i+'"]');if(0!==n.length&&(n.find("a.nav-tab").trigger("click"),"ur-tab-login-form-settings"===i&&r)){var o=e("a[href='#"+r+"'], li#"+r+" a, [data-section='"+r+"']").first();if(o.length>0)o.trigger("click");else{e("form#ur-field-settings #ur-field-all-settings > div").hide();var t=e("form#ur-field-settings #ur-field-all-settings > div#"+r);t.length>0&&t.show()}}}(r,n),setTimeout(function(){var r=i.closest(".user-registration-login-form-global-settings");r.length&&r.is(":visible")&&(e("html, body").animate({scrollTop:r.offset().top-100},500),r.addClass("ur-error-highlight"),setTimeout(function(){r.removeClass("ur-error-highlight")},2e3))},300),i}function o(){e(".user-registration-login-form-global-settings .error.inline, form#ur-field-settings .user-registration-login-form-global-settings .error.inline").length>0?n():function(){var i=function(i){var r=[];return e.each(i,function(e,i){r.push({option:i.id,type:i.type})}),r}(ur_login_form_params.login_settings),o=[];e.each(i,function(i,r){if("toggle"===r.type)var n=e("#"+r.option).is(":checked");else if("html"===r.type)n=e("#"+r.option+" :input").serializeArray();else n=e("#"+r.option).val();o.push({option:r.option,value:n})});var s={action:"user_registration_login_settings_save_action",security:ur_login_form_params.ur_login_settings_save,data:{setting_data:o}};e.ajax({url:ur_login_form_params.ajax_url,data:s,type:"POST",beforeSend:function(){var i='<span class="ur-spinner is-active"></span>';e(".ur_save_login_form_action_button").append(i)},complete:function(i){e(".ur_save_login_form_action_button").find(".ur-spinner").remove();var o=ur_login_form_params.i18n_admin.i18n_settings_successfully_saved;if(i.responseJSON&&!0===i.responseJSON.success)t(o,"success");else{var s=null;if(i.responseJSON)s=i.responseJSON;else if(i.responseText)try{s=JSON.parse(i.responseText)}catch(e){s=null}var a=ur_login_form_params.i18n_admin.i18n_error_occurred_while_saving;s&&s.data&&s.data.message&&(a=s.data.message),t(a,"error");var l=function(e){if(!e)return null;var i=e.toLowerCase();return-1!==i.indexOf("lost password shortcode")||-1!==i.indexOf("lost password page")?"user_registration_lost_password_page_id":-1!==i.indexOf("reset password page")||-1!==i.indexOf("reset password")?"user_registration_reset_password_page_id":-1!==i.indexOf("redirect")||-1!==i.indexOf("login redirect")?"user_registration_login_options_login_redirect_url":null}(a);if(l){var _=e("#"+l);_.length&&r(_)}n()}}})}()}function t(i,r){var n=e(".ur-form-container").find(".ur-builder-message-container"),o=e("#wpadminbar"),t="";0===n.length&&(e(".ur-form-container").append('<div class="ur-builder-message-container"></div>'),(n=e(".ur-form-container").find(".ur-builder-message-container")).css({top:o.height()+"px"})),"success"===r?t='<div class="ur-message"><div class="ur-success"><p><strong>'+ur_login_form_params.i18n_admin.i18n_success+"! </strong>"+i+'</p><span class="dashicons dashicons-no-alt ur-message-close"></span></div></div>':(e(".ur-error").remove(),t='<div class="ur-message"><div class="ur-error"><p><strong>'+ur_login_form_params.i18n_admin.i18n_error+"! </strong>"+i+'</p><span class="dashicons dashicons-no-alt ur-message-close"></span></div></div>');var a=e(t).prependTo(n);setTimeout(function(){a.addClass("entered")},50),1==e(".ur-error").find(".ur-captcha-error").length?(e(".ur-error").css("width","490px"),setTimeout(function(){s(a)},5e3)):setTimeout(function(){s(a)},3e3)}function s(e){e.removeClass("entered").addClass("exiting"),setTimeout(function(){e.remove()},120)}function a(){var i=e("#user_registration_login_title").is(":checked"),r=e(".ur-login-form-wrapper").find(".ur-frontend-form.login"),n=e("#ur-field-settings").find("#user_registration_general_setting_login_form_title"),o=e("#ur-field-settings").find("#user_registration_general_setting_login_form_desc");i?(r.find(".user-registration-login-title").show(),r.find(".user-registration-login-description").show(),n.closest(".user-registration-login-form-global-settings").show(),o.closest(".user-registration-login-form-global-settings").show(),e(document).on("change keyup keydown","#user_registration_general_setting_login_form_title",function(){r.find(".user-registration-login-title").text(n.val())}),e(document).on("change keyup keydown","#user_registration_general_setting_login_form_desc",function(){r.find(".user-registration-login-description").text(o.val())})):(r.find(".user-registration-login-description").hide(),r.find(".user-registration-login-title").hide(),n.closest(".user-registration-login-form-global-settings").hide(),o.closest(".user-registration-login-form-global-settings").hide())}function l(){var i=e("#user_registration_login_options_remember_me").is(":checked");e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find("#rememberme").parent("label").css({opacity:i?1:.5}),i?e("#user_registration_label_remember_me").closest(".user-registration-login-form-global-settings").show().css("display","block"):e("#user_registration_label_remember_me").closest(".user-registration-login-form-global-settings").hide()}function _(){var i=e("#user_registration_login_options_lost_password").is(":checked");e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-LostPassword").css({opacity:i?1:.5})}function g(){var i=e("#user_registration_login_options_enable_recaptcha"),r=i.is(":checked");if(ur_login_form_params.no_captcha_set&&r)return i.prop("checked",!1),e("#user_registration_login_options_configured_captcha_type").closest(".user-registration-login-form-global-settings").hide(),void t(ur_login_form_params.i18n_admin.i18n_captcha_not_set_error,"error");r?e("#user_registration_login_options_configured_captcha_type").closest(".user-registration-login-form-global-settings").show():e("#user_registration_login_options_configured_captcha_type").closest(".user-registration-login-form-global-settings").hide()}function d(){e("#user_registration_pro_general_setting_prevent_active_login").is(":checked")?e("#user_registration_pro_general_setting_limited_login").closest(".user-registration-login-form-global-settings").show():e("#user_registration_pro_general_setting_limited_login").closest(".user-registration-login-form-global-settings").hide()}function u(){var i=e("#user_registration_pro_passwordless_login").is(":checked"),r=e(".ur-login-form-wrapper").find(".ur-frontend-form.login");i?(r.find(".user-registration-passwordless-login").show(),e("#user_registration_pro_passwordless_login_default_login_area").closest(".user-registration-login-form-global-settings").show()):(r.find(".user-registration-passwordless-login").hide(),e("#user_registration_pro_passwordless_login_default_login_area").closest(".user-registration-login-form-global-settings").hide()),c(e("#user_registration_pro_passwordless_login_default_login_area"))}function c(i){var r=i.is(":checked"),n=e(".ur-login-form-wrapper").find(".ur-frontend-form.login");e("#user_registration_pro_passwordless_login").is(":checked")&&r?(n.find(".user-registration-passwordless-login").hide(),n.find(".password-input-group").closest(".form-row").hide(),n.find(".user-registration-before-login-btn").hide()):e("#user_registration_pro_passwordless_login").is(":checked")&&!r?(n.find(".user-registration-passwordless-login").show(),n.find(".password-input-group").closest(".form-row").show(),n.find(".user-registration-before-login-btn").show()):(n.find(".user-registration-passwordless-login").hide(),n.find(".password-input-group").closest(".form-row").show(),n.find(".user-registration-before-login-btn").show())}function f(){var i=e("#user_registration_pro_general_setting_login_form").is(":checked"),r=e(".ur-login-form-wrapper").find(".ur-frontend-form.login");i?r.find(".user-registration-form-row span.ur-icon").show():r.find(".user-registration-form-row span.ur-icon").hide()}i.init(),e(document).ready(function(){(g(),e(document).on("change","#user_registration_login_options_enable_recaptcha",function(){g()}),e(document).on("change","#user_registration_pro_general_setting_login_form",function(){f()}),f(),d(),e(document).on("change","#user_registration_pro_general_setting_prevent_active_login",function(){d()}),u(),e(document).on("change","#user_registration_pro_passwordless_login",function(){u()}),e(document).on("change","#user_registration_pro_passwordless_login_default_login_area",function(){c(e(this))}),e("#user_registration_login_options_form_template").on("change",function(){var i=e("#user_registration_login_options_form_template").val(),r=e(".ur-login-form-wrapper").find(".ur-frontend-form.login");r.removeClass("ur-frontend-form--rounded-edge"),r.removeClass("ur-frontend-form--rounded"),r.removeClass("ur-frontend-form--flat"),r.removeClass("ur-frontend-form--bordered"),"default"!==i&&(i="rounded_edge"===i?"rounded ur-frontend-form--rounded-edge":i,r.addClass("ur-frontend-form--"+i))}),e(document).on("change","#user_registration_login_title",function(e){a()}),a(),e(document).on("change","#user_registration_login_options_remember_me",function(e){l()}),l(),e(document).on("change","#user_registration_login_options_lost_password",function(e){_()}),_(),e("#user_registration_general_setting_registration_label").on("keyup",function(){var i=e("#user_registration_general_setting_registration_label").val();e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-register a").html(i)}),e("#user_registration_label_lost_your_password").on("keyup",function(){var i=e("#user_registration_label_lost_your_password").val();e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-LostPassword a").html(i)}),e("#user_registration_label_login").on("keyup",function(){var i=e("#user_registration_label_login").val();e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-Button").html(i)}),e("#user_registration_label_remember_me").on("keyup",function(){var i=e("#user_registration_label_remember_me").val();e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-form__label-for-checkbox span").html(i)}),e("#user_registration_label_password").on("keyup",function(){var i=e("#user_registration_label_password").val();e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-form-row label[for='password']").html(i+'<span class="required">*</span>')}),e("#user_registration_label_username_or_email").on("keyup",function(){var i=e("#user_registration_label_username_or_email").val();e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-form-row label[for='username']").html(i+'<span class="required">*</span>')}),e("#user_registration_placeholder_username_or_email").on("keyup",function(){var i=e("#user_registration_placeholder_username_or_email").val();e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-form-row #username").attr("placeholder",i)}),e("#user_registration_placeholder_password").on("keyup",function(){var i=e("#user_registration_placeholder_password").val();e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-form-row #password").attr("placeholder",i)}),e(".ur-redirect-to-login-page").ready(function(){var i=e(".ur-redirect-to-login-page"),r=e("#user_registration_login_options_prevent_core_login"),n=e("#user_registration_login_options_login_redirect_url");if(r.is(":checked")){var o=r.closest(".ur-login-form-setting-block").find(".ur-redirect-to-login-page").val(),t=r.closest(".user-registration-login-form-container"),s=e(t).closest("#wpbody-content");""===o?r.closest(".ur-login-form-setting-block").find(".ur-redirect-to-login-page").closest(".user-registration-login-form-global-settings--field").append('<div class="error inline" style="padding:10px;">'+ur_login_form_params.user_registration_membership_redirect_default_page_message+"</div>"):(e(s).find("#ur-lists-page-topnav").find(".ur_save_login_form_action_button").prop("disabled",!1),r.closest(".ur-login-form-setting-block").find(".ur-redirect-to-login-page").closest(".user-registration-login-form-global-settings--field").find(".error.inline").remove()),n.prop("required",!0)}else i.val("").closest(".single_select_page").css("display","none");e('select[name="user_registration_login_options_login_redirect_url"]').on("select2:unselect",function(){r.closest(".ur-login-form-setting-block").find(".ur-redirect-to-login-page").closest(".user-registration-login-form-global-settings--field").append('<div class="error inline" style="padding:10px;">'+ur_login_form_params.user_registration_membership_redirect_default_page_message+"</div>"),n.prop("required",!0)})}),e("#user_registration_login_options_prevent_core_login").on("change",function(){var i=e("#user_registration_login_options_prevent_core_login");e("#user_registration_login_options_login_redirect_url").closest(".single_select_page").toggle(),e("#user_registration_login_options_login_redirect_url").prop("required",function(){return"checked"===i.prop("checked")})}),e(document).ready(function(){e("#user_registration_login_options_enable_custom_redirect").trigger("change")}),e(document).on("change","#user_registration_login_options_enable_custom_redirect",function(){var i=e("#user_registration_login_options_redirect_after_login"),r=e("#user_registration_login_options_redirect_after_logout");e(this).is(":checked")?(i.closest(".user-registration-login-form-global-settings").show(),r.closest(".user-registration-login-form-global-settings").show()):(i.closest(".user-registration-login-form-global-settings").hide(),r.closest(".user-registration-login-form-global-settings").hide()),i.trigger("change"),r.trigger("change")}),e(document).on("change","#user_registration_login_options_redirect_after_login",function(){var i=e("#user_registration_login_options_enable_custom_redirect").is(":checked")?e(this).val():"hidden",r=e("#user_registration_login_options_after_login_redirect_external_url").closest(".user-registration-login-form-global-settings"),n=e("#user_registration_login_options_after_login_redirect_page").closest(".user-registration-login-form-global-settings");switch(i){case"no-redirection":case"previous-page":default:r.hide(),n.hide();break;case"internal-page":r.hide(),n.show();break;case"external-url":r.show(),n.hide()}}),e(document).on("change","#user_registration_login_options_redirect_after_logout",function(){var i=e("#user_registration_login_options_enable_custom_redirect").is(":checked")?e(this).val():"hidden",r=e("#user_registration_login_options_after_logout_redirect_external_url").closest(".user-registration-login-form-global-settings"),n=e("#user_registration_login_options_after_logout_redirect_page").closest(".user-registration-login-form-global-settings");switch(i){case"no-redirection":case"previous-page":default:r.hide(),n.hide();break;case"internal-page":r.hide(),n.show();break;case"external-url":r.show(),n.hide()}}),ur_login_form_params.is_login_settings_page)&&(e(window).on("keydown",function(e){if((e.ctrlKey||e.metaKey)&&("s"===String.fromCharCode(e.which).toLowerCase()||83===e.which))return e.preventDefault(),o(),!1}),e("#toplevel_page_user-registration").find(".wp-submenu").find('li a[href="admin.php?page=user-registration-login-forms"]').addClass("current"));var i=function(i){var r=window.ur_login_form_params||{},n={action:"user_registration_embed_page_list",security:r.ur_embed_page_list||""};e.ajax({url:r.ajax_url,data:n,type:"POST",beforeSend:function(){i.append('<span class="ur-spinner is-active"></span>'),e(".ur-notices").remove()},success:function(n){function o(){var e='<div class=""><p>'+(r.i18n_admin&&r.i18n_admin.i18n_embed_description?r.i18n_admin.i18n_embed_description:"")+"</p></div>";Swal.fire({icon:"info",title:r.i18n_admin&&r.i18n_admin.i18n_embed_form_title?r.i18n_admin.i18n_embed_form_title:"",html:e,showCancelButton:!0,confirmButtonText:r.i18n_admin&&r.i18n_admin.i18n_embed_to_existing_page?r.i18n_admin.i18n_embed_to_existing_page:"Embed to existing page",cancelButtonText:r.i18n_admin&&r.i18n_admin.i18n_embed_to_new_page?r.i18n_admin.i18n_embed_to_new_page:"Embed to new page",showCloseButton:!0,customClass:"user-registration-swal2-modal  user-registration user-registration-swal2-modal--center user-registrationswal2-icon-content-info swal2-show"}).then(function(e){var r=i.attr("data-form_id");e.isConfirmed?t(n,r):e.dismiss===Swal.DismissReason.cancel&&s(r)})}function t(i,n){var t='<div class="ur-embed-select-existing-page-container"><p>'+(r.i18n_admin&&r.i18n_admin.i18n_embed_existing_page_description?r.i18n_admin.i18n_embed_existing_page_description:"")+'</p><select style="width:100%; line-height:30px;" name="ur-embed-select-existing-page-name" id="ur-embed-select-existing-page-name">',s="<option disabled selected>Select Page</option>";(i.data||[]).forEach(function(e){s+='<option data-id="'+e.ID+'" value="'+e.ID+'">'+e.post_title+"</option>"});modelContent=t+s+"</select>",Swal.fire({icon:"info",title:r.i18n_admin&&r.i18n_admin.i18n_embed_form_title?r.i18n_admin.i18n_embed_form_title:"",html:modelContent,showCloseButton:!0,showCancelButton:!0,cancelButtonText:r.i18n_admin&&r.i18n_admin.i18n_embed_go_back_btn?r.i18n_admin.i18n_embed_go_back_btn:"Go Back",confirmButtonText:r.i18n_admin&&r.i18n_admin.i18n_embed_lets_go_btn?r.i18n_admin.i18n_embed_lets_go_btn:"Let's go",customClass:"user-registration-swal2-modal  user-registration user-registration-swal2-modal--center swal2-show"}).then(function(i){if(i.isDismissed)o();else if(i.isConfirmed){var t=e("#ur-embed-select-existing-page-name").val(),s={action:"user_registration_embed_form_action",security:r.ur_embed_action||"",page_id:t,form_id:n,is_login:"yes"};e.ajax({url:r.ajax_url,type:"POST",data:s,success:function(e){e.success&&(window.location=e.data)}})}})}function s(i){var n='<div class="ur-embed-new-page-container"><p>'+(r.i18n_admin&&r.i18n_admin.i18n_embed_new_page_description?r.i18n_admin.i18n_embed_new_page_description:"")+"</p>";modelContent=n+'<div style="width: 100%"><input style="width:100%" type="text" name="page_title" /></div>',Swal.fire({icon:"info",title:r.i18n_admin&&r.i18n_admin.i18n_embed_form_title?r.i18n_admin.i18n_embed_form_title:"",html:modelContent,showCancelButton:!0,confirmButtonText:r.i18n_admin&&r.i18n_admin.i18n_embed_lets_go_btn?r.i18n_admin.i18n_embed_lets_go_btn:"Let's go",cancelButtonText:r.i18n_admin&&r.i18n_admin.i18n_embed_go_back_btn?r.i18n_admin.i18n_embed_go_back_btn:"Go Back",customClass:"user-registration-swal2-modal  user-registration user-registration-swal2-modal--center swal2-show"}).then(function(i){if(i.isDismissed)o();else if(i.isConfirmed){var n=e("[name='page_title']").val(),t={action:"user_registration_embed_form_action",security:r.ur_embed_action||"",page_title:n,is_login:"yes",form_id:10};e.ajax({url:r.ajax_url,type:"POST",data:t,success:function(e){e.success&&(window.location=e.data)}})}})}i.find(".ur-spinner").remove(),o()}})};e(".ur-embed-form-button").on("click",function(){e(this).find(".ur-spinner").length>0||i(e(this))}),e(".ur_save_login_form_action_button").on("click",function(){o()}),e(".ur-submit-button.ur-disabled-btn").on("click",function(e){e.preventDefault()}),e(".user-registration-login-form-global-settings #user_registration_lost_password_page_id , .user-registration-login-form-global-settings #user_registration_reset_password_page_id , .user-registration-login-form-global-settings #user_registration_login_options_login_redirect_url").on("change",function(){r(e(this))})})}(jQuery);