!function(e){function r(r){var i=r.closest(".user-registration-login-form-global-settings--field"),o=i.closest(".user-registration-login-form-global-settings"),n=r.val(),s=r.attr("id"),t={action:"user_registration_login_settings_page_validation",security:ur_login_form_params.ur_login_settings_save,page_id:n,type:s};0===i.length||i.find(".ur-spinner").length>0||n===undefined||s===undefined||("user_registration_login_options_login_redirect_url"===s&&(o=o.find("span.select2")),o.find(".error.inline").remove(),e.ajax({url:ur_login_form_params.ajax_url,data:t,type:"POST",beforeSend:function(){i.append('<span class="ur-spinner is-active"></span>')},success:function(e){if(!e.success){var r=e.data.message;o.append('<span class="error inline">'+r+"</span>")}},complete:function(e){i.find(".ur-spinner").remove()}}))}function i(){var r=e(".user-registration-login-form-global-settings .error.inline, form#ur-field-settings .user-registration-login-form-global-settings .error.inline").first();if(0===r.length)return null;var i=null,o=null;if(r.closest("#ur-tab-field-options").length>0)i="ur-tab-field-options";else if(r.closest("form#ur-field-settings, #ur-field-all-settings").length>0){i="ur-tab-login-form-settings";var n=r.closest("div[id$='-settings']");0!==n.length&&n.closest("#ur-field-all-settings").length||e("form#ur-field-settings #ur-field-all-settings > div[id$='-settings']").each(function(){if(r.closest("#"+e(this).attr("id")).length>0)return n=e(this),!1}),n.length>0&&(o=n.attr("id"))}return i&&function(r,i){var o=e('.user-registration-login-form-container ul.ur-tab-lists li[aria-controls="'+r+'"]');if(0!==o.length&&(o.find("a.nav-tab").trigger("click"),"ur-tab-login-form-settings"===r&&i)){var n=e("a[href='#"+i+"'], li#"+i+" a, [data-section='"+i+"']").first();if(n.length>0)n.trigger("click");else{e("form#ur-field-settings #ur-field-all-settings > div").hide();var s=e("form#ur-field-settings #ur-field-all-settings > div#"+i);s.length>0&&s.show()}}}(i,o),setTimeout(function(){var i=r.closest(".user-registration-login-form-global-settings");i.length&&i.is(":visible")&&(e("html, body").animate({scrollTop:i.offset().top-100},500),i.addClass("ur-error-highlight"),setTimeout(function(){i.removeClass("ur-error-highlight")},2e3))},300),r}function o(){if(e(".user-registration-login-form-global-settings .error.inline, form#ur-field-settings .user-registration-login-form-global-settings .error.inline").length>0)return i(),void n(ur_login_form_params.i18n_admin.i18n_error+"! "+ur_login_form_params.i18n_admin.i18n_please_fix_validation_errors,"error");!function(){var o=function(r){var i=[];return e.each(r,function(e,r){i.push({option:r.id,type:r.type})}),i}(ur_login_form_params.login_settings),s=[];e.each(o,function(r,i){if("toggle"===i.type)var o=e("#"+i.option).is(":checked");else if("html"===i.type)var o=e("#"+i.option+" :input").serializeArray();else var o=e("#"+i.option).val();s.push({option:i.option,value:o})});var t={action:"user_registration_login_settings_save_action",security:ur_login_form_params.ur_login_settings_save,data:{setting_data:s}};e.ajax({url:ur_login_form_params.ajax_url,data:t,type:"POST",beforeSend:function(){e(".ur_save_login_form_action_button").append('<span class="ur-spinner is-active"></span>')},complete:function(o){e(".ur_save_login_form_action_button").find(".ur-spinner").remove();var s=ur_login_form_params.i18n_admin.i18n_settings_successfully_saved;if(o.responseJSON&&!0===o.responseJSON.success)n(s,"success");else{var t=null;if(o.responseJSON)t=o.responseJSON;else if(o.responseText)try{t=JSON.parse(o.responseText)}catch(_){t=null}var a=ur_login_form_params.i18n_admin.i18n_error_occurred_while_saving;t&&t.data&&t.data.message&&(a=t.data.message),n(a,"error");var l=function(e){if(!e)return null;var r=e.toLowerCase();return-1!==r.indexOf("lost password shortcode")||-1!==r.indexOf("lost password page")?"user_registration_lost_password_page_id":-1!==r.indexOf("reset password page")||-1!==r.indexOf("reset password")?"user_registration_reset_password_page_id":-1!==r.indexOf("redirect")||-1!==r.indexOf("login redirect")?"user_registration_login_options_login_redirect_url":null}(a);if(l){var g=e("#"+l);g.length&&r(g)}i()}}})}()}function n(r,i){var o=e(".ur-form-container").find(".ur-builder-message-container"),n=e("#wpadminbar"),t="";0===o.length&&(e(".ur-form-container").append('<div class="ur-builder-message-container"></div>'),(o=e(".ur-form-container").find(".ur-builder-message-container")).css({top:n.height()+"px"})),"success"===i?t='<div class="ur-message"><div class="ur-success"><p><strong>'+ur_login_form_params.i18n_admin.i18n_success+"! </strong>"+r+'</p><span class="dashicons dashicons-no-alt ur-message-close"></span></div></div>':(e(".ur-error").remove(),t='<div class="ur-message"><div class="ur-error"><p><strong>'+ur_login_form_params.i18n_admin.i18n_error+"! </strong>"+r+'</p><span class="dashicons dashicons-no-alt ur-message-close"></span></div></div>');var a=e(t).prependTo(o);setTimeout(function(){a.addClass("entered")},50),1==e(".ur-error").find(".ur-captcha-error").length?(e(".ur-error").css("width","490px"),setTimeout(function(){s(a)},5e3)):setTimeout(function(){s(a)},3e3)}function s(e){e.removeClass("entered").addClass("exiting"),setTimeout(function(){e.remove()},120)}function t(){var r=e("#user_registration_login_title").is(":checked"),i=e(".ur-login-form-wrapper").find(".ur-frontend-form.login"),o=e("#ur-field-settings").find("#user_registration_general_setting_login_form_title"),n=e("#ur-field-settings").find("#user_registration_general_setting_login_form_desc");r?(i.find(".user-registration-login-title").show(),i.find(".user-registration-login-description").show(),o.closest(".user-registration-login-form-global-settings").show(),n.closest(".user-registration-login-form-global-settings").show(),e(document).on("change keyup keydown","#user_registration_general_setting_login_form_title",function(){i.find(".user-registration-login-title").text(o.val())}),e(document).on("change keyup keydown","#user_registration_general_setting_login_form_desc",function(){i.find(".user-registration-login-description").text(n.val())})):(i.find(".user-registration-login-description").hide(),i.find(".user-registration-login-title").hide(),o.closest(".user-registration-login-form-global-settings").hide(),n.closest(".user-registration-login-form-global-settings").hide())}function a(){var r=e("#user_registration_login_options_remember_me").is(":checked");e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find("#rememberme").parent("label").css({opacity:r?1:.5}),r?e("#user_registration_label_remember_me").closest(".user-registration-login-form-global-settings").show().css("display","block"):e("#user_registration_label_remember_me").closest(".user-registration-login-form-global-settings").hide()}function l(){var r=e("#user_registration_login_options_lost_password").is(":checked");e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-LostPassword").css({opacity:r?1:.5})}function g(){var r=e("#user_registration_login_options_enable_recaptcha"),i=r.is(":checked");if(ur_login_form_params.no_captcha_set&&i)return r.prop("checked",!1),e("#user_registration_login_options_configured_captcha_type").closest(".user-registration-login-form-global-settings").hide(),void n(ur_login_form_params.i18n_admin.i18n_captcha_not_set_error,"error");i?e("#user_registration_login_options_configured_captcha_type").closest(".user-registration-login-form-global-settings").show():e("#user_registration_login_options_configured_captcha_type").closest(".user-registration-login-form-global-settings").hide()}function _(){e("#user_registration_pro_general_setting_prevent_active_login").is(":checked")?e("#user_registration_pro_general_setting_limited_login").closest(".user-registration-login-form-global-settings").show():e("#user_registration_pro_general_setting_limited_login").closest(".user-registration-login-form-global-settings").hide()}function u(){var r=e("#user_registration_pro_passwordless_login").is(":checked"),i=e(".ur-login-form-wrapper").find(".ur-frontend-form.login");r?(i.find(".user-registration-passwordless-login").show(),e("#user_registration_pro_passwordless_login_default_login_area").closest(".user-registration-login-form-global-settings").show()):(i.find(".user-registration-passwordless-login").hide(),e("#user_registration_pro_passwordless_login_default_login_area").closest(".user-registration-login-form-global-settings").hide()),d(e("#user_registration_pro_passwordless_login_default_login_area"))}function d(r){var i=r.is(":checked"),o=e(".ur-login-form-wrapper").find(".ur-frontend-form.login");e("#user_registration_pro_passwordless_login").is(":checked")&&i?(o.find(".user-registration-passwordless-login").hide(),o.find(".password-input-group").closest(".form-row").hide(),o.find(".user-registration-before-login-btn").hide()):e("#user_registration_pro_passwordless_login").is(":checked")&&!i?(o.find(".user-registration-passwordless-login").show(),o.find(".password-input-group").closest(".form-row").show(),o.find(".user-registration-before-login-btn").show()):(o.find(".user-registration-passwordless-login").hide(),o.find(".password-input-group").closest(".form-row").show(),o.find(".user-registration-before-login-btn").show())}function c(){var r=e("#user_registration_pro_general_setting_login_form").is(":checked"),i=e(".ur-login-form-wrapper").find(".ur-frontend-form.login");r?i.find(".user-registration-form-row span.ur-icon").show():i.find(".user-registration-form-row span.ur-icon").hide()}var f={init:function(){f.init_form_builder(),e(document).on("click",".clickable-login-fields",function(){f.handle_selected_item(e(this))}),e(document).on("click",".ur-toggle-heading",function(){e(this).toggleClass("closed"),e(this).parent(".user-registration-field-option-group").toggleClass("closed").toggleClass("open");var r=e(this).find(" ~ .ur-registered-list")[0];e(r).slideToggle(),e(this).siblings(".ur-toggle-content").stop().slideToggle()}),e(document).on("click",'.user-registration-login-form-container ul.ur-tab-lists li[aria-controls="ur-tab-field-options"]',function(){e("form#ur-field-settings").hide(),e(".ur-login-form-wrapper").show()}),e(document).on("click",'.user-registration-login-form-container ul.ur-tab-lists li[aria-controls="ur-tab-login-form-settings"]',function(){e(".ur-login-form-wrapper").hide(),e("form#ur-field-settings").show()}),e('.clickable-login-fields[data-field="username"]').trigger("click"),e('input[name^="user_registration_hide_label_"]').on("change",function(){f.hide_show_field_label(e(this))}).each(function(){f.hide_show_field_label(e(this))})},init_form_builder:function(){e(".ur-tabs .ur-tab-lists").on("click","a.nav-tab",function(){e(".ur-tabs .ur-tab-lists").find("a.nav-tab").removeClass("active"),e(this).addClass("active")}),e(".ur-tabs").tabs(),e(".ur-tabs").find("a").eq(0).trigger("click",["triggered_click"])},handle_selected_item:function(r){var i=e(".clickable-login-fields"),o=e("#ur-tab-field-options div[data-field-key]"),n=r.data("field");i.removeClass("active"),r.addClass("active"),o.each(function(){e(this).addClass("ur-d-none"),e(this).data("field-key")===n&&e(this).removeClass("ur-d-none")})},hide_show_field_label:function(r){var i={password:"password"}[(r.attr("id")||"").replace("user_registration_hide_label_","")]||"username";e("#ur-frontend-form").find('[data-field="'+i+'"] label').show(),r.is(":checked")&&e("#ur-frontend-form").find('[data-field="'+i+'"] label').hide()}};f.init(),e(document).ready(function(){if(g(),e(document).on("change","#user_registration_login_options_enable_recaptcha",function(){g()}),e(document).on("change","#user_registration_pro_general_setting_login_form",function(){c()}),c(),_(),e(document).on("change","#user_registration_pro_general_setting_prevent_active_login",function(){_()}),u(),e(document).on("change","#user_registration_pro_passwordless_login",function(){u()}),e(document).on("change","#user_registration_pro_passwordless_login_default_login_area",function(){d(e(this))}),e("#user_registration_login_options_form_template").on("change",function(){var r=e("#user_registration_login_options_form_template").val(),i=e(".ur-login-form-wrapper").find(".ur-frontend-form.login");i.removeClass("ur-frontend-form--rounded-edge"),i.removeClass("ur-frontend-form--rounded"),i.removeClass("ur-frontend-form--flat"),i.removeClass("ur-frontend-form--bordered"),"default"!==r&&(r="rounded_edge"===r?"rounded ur-frontend-form--rounded-edge":r,i.addClass("ur-frontend-form--"+r))}),e(document).on("change","#user_registration_login_title",function(e){t()}),t(),e(document).on("change","#user_registration_login_options_remember_me",function(e){a()}),a(),e(document).on("change","#user_registration_login_options_lost_password",function(e){l()}),l(),e("#user_registration_general_setting_registration_label").on("keyup",function(){var r=e("#user_registration_general_setting_registration_label").val();e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-register a").html(r)}),e("#user_registration_label_lost_your_password").on("keyup",function(){var r=e("#user_registration_label_lost_your_password").val();e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-LostPassword a").html(r)}),e("#user_registration_label_login").on("keyup",function(){var r=e("#user_registration_label_login").val();e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-Button").html(r)}),e("#user_registration_label_remember_me").on("keyup",function(){var r=e("#user_registration_label_remember_me").val();e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-form__label-for-checkbox span").html(r)}),e("#user_registration_label_password").on("keyup",function(){var r=e("#user_registration_label_password").val();e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-form-row label[for='password']").html(r+'<span class="required">*</span>')}),e("#user_registration_label_username_or_email").on("keyup",function(){var r=e("#user_registration_label_username_or_email").val();e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-form-row label[for='username']").html(r+'<span class="required">*</span>')}),e("#user_registration_placeholder_username_or_email").on("keyup",function(){var r=e("#user_registration_placeholder_username_or_email").val();e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-form-row #username").attr("placeholder",r)}),e("#user_registration_placeholder_password").on("keyup",function(){var r=e("#user_registration_placeholder_password").val();e(".ur-login-form-wrapper").find(".ur-frontend-form.login").find(".user-registration-form-row #password").attr("placeholder",r)}),e(".ur-redirect-to-login-page").ready(function(){var r=e(".ur-redirect-to-login-page"),i=e("#user_registration_login_options_prevent_core_login"),o=e("#user_registration_login_options_login_redirect_url");if(i.is(":checked")){var n=i.closest(".ur-login-form-setting-block").find(".ur-redirect-to-login-page").val(),s=i.closest(".user-registration-login-form-container"),t=e(s).closest("#wpbody-content");""===n?i.closest(".ur-login-form-setting-block").find(".ur-redirect-to-login-page").closest(".user-registration-login-form-global-settings--field").append('<div class="error inline" style="padding:10px;">'+ur_login_form_params.user_registration_membership_redirect_default_page_message+"</div>"):(e(t).find("#ur-lists-page-topnav").find(".ur_save_login_form_action_button").prop("disabled",!1),i.closest(".ur-login-form-setting-block").find(".ur-redirect-to-login-page").closest(".user-registration-login-form-global-settings--field").find(".error.inline").remove()),o.prop("required",!0)}else r.val("").closest(".single_select_page").css("display","none");e('select[name="user_registration_login_options_login_redirect_url"]').on("select2:unselect",function(){i.closest(".ur-login-form-setting-block").find(".ur-redirect-to-login-page").closest(".user-registration-login-form-global-settings--field").append('<div class="error inline" style="padding:10px;">'+ur_login_form_params.user_registration_membership_redirect_default_page_message+"</div>"),o.prop("required",!0)})}),e("#user_registration_login_options_prevent_core_login").on("change",function(){var r=e("#user_registration_login_options_prevent_core_login");e(".single_select_page").toggle(),e("#user_registration_login_options_login_redirect_url").prop("required",function(){return"checked"===r.prop("checked")})}),e(document).ready(function(){e("#user_registration_login_options_enable_custom_redirect").trigger("change")}),e(document).on("change","#user_registration_login_options_enable_custom_redirect",function(){var r=e("#user_registration_login_options_redirect_after_login"),i=e("#user_registration_login_options_redirect_after_logout");e(this).is(":checked")?(r.closest(".user-registration-login-form-global-settings").show(),i.closest(".user-registration-login-form-global-settings").show()):(r.closest(".user-registration-login-form-global-settings").hide(),i.closest(".user-registration-login-form-global-settings").hide()),r.trigger("change"),i.trigger("change")}),e(document).on("change","#user_registration_login_options_redirect_after_login",function(){var r=e("#user_registration_login_options_enable_custom_redirect").is(":checked")?e(this).val():"hidden",i=e("#user_registration_login_options_after_login_redirect_external_url").closest(".user-registration-login-form-global-settings"),o=e("#user_registration_login_options_after_login_redirect_page").closest(".user-registration-login-form-global-settings");switch(r){case"no-redirection":i.hide(),o.hide();break;case"internal-page":i.hide(),o.show();break;case"external-url":i.show(),o.hide();break;case"previous-page":default:i.hide(),o.hide()}}),e(document).on("change","#user_registration_login_options_redirect_after_logout",function(){var r=e("#user_registration_login_options_enable_custom_redirect").is(":checked")?e(this).val():"hidden",i=e("#user_registration_login_options_after_logout_redirect_external_url").closest(".user-registration-login-form-global-settings"),o=e("#user_registration_login_options_after_logout_redirect_page").closest(".user-registration-login-form-global-settings");switch(r){case"no-redirection":i.hide(),o.hide();break;case"internal-page":i.hide(),o.show();break;case"external-url":i.show(),o.hide();break;case"previous-page":default:i.hide(),o.hide()}}),ur_login_form_params.is_login_settings_page){e(window).on("keydown",function(e){if((e.ctrlKey||e.metaKey)&&("s"===String.fromCharCode(e.which).toLowerCase()||83===e.which))return e.preventDefault(),o(),!1});e("#toplevel_page_user-registration").find(".wp-submenu").find('li a[href="admin.php?page=user-registration"]').first().closest("li").addClass("current")}e(".ur_save_login_form_action_button").on("click",function(){o()}),e(".ur-submit-button.ur-disabled-btn").on("click",function(e){e.preventDefault()}),e(".user-registration-login-form-global-settings #user_registration_lost_password_page_id , .user-registration-login-form-global-settings #user_registration_reset_password_page_id , .user-registration-login-form-global-settings #user_registration_login_options_login_redirect_url").on("change",function(){r(e(this))})})}(jQuery);