!function(e){"use strict";var t={conditions:[],contentTargets:[],accessControl:"access",membershipId:0,conditionCounter:0,targetCounter:0,ruleData:null,initialized:!1,init:function(){if("undefined"!=typeof urcr_membership_access_data){urcr_membership_access_data.membership_id&&(this.membershipId=parseInt(urcr_membership_access_data.membership_id,10));var t=null;if("undefined"!=typeof window.urcrMembershipRuleData&&window.urcrMembershipRuleData)t=window.urcrMembershipRuleData;else{var r=e("#ur-membership-access-section");if(r.length){var a=r.attr("data-rule-data");a&&(t=JSON.parse(a))}}var i=e(".urcr-conditions-list"),n=e(".urcr-target-type-group"),s=i.find(".urcr-condition-wrapper").length>0,o=n.find(".urcr-target-item").length>0;s||o?this.syncFromExistingHTML():t?(this.ruleData=t,this.populateRuleData(t)):this.initializeEmptyRule(),this.bindEvents(),this.initSelect2(),this.initActionSection(),this.initialized=!0}},initializeEmptyRule:function(){this.membershipId>0&&this.addCondition("membership",!0,[this.membershipId.toString()])},syncFromExistingHTML:function(){var t=this;e(".urcr-condition-wrapper").each(function(){var r=e(this),a=r.data("condition-id"),i=r.find(".urcr-condition-field-select"),n=r.find(".urcr-condition-value-input"),s=i.val()||"roles",o="multiselect",c=t.getConditionOptions().find(function(e){return e.value===s});c&&(o=c.type||"multiselect");var u="";if("multiselect"===o){var d=n.attr("data-value");if(d)try{u=JSON.parse(d)}catch(m){u=[]}else u=[]}else if("checkbox"===o)u=n.find('input[type="radio"]:checked').val()||"logged-in";else if("date"===o||"number"===o||"text"===o)u=n.val()||"";else if("period"===o){var l=n.find('[data-period-part="select"]').val()||"During",p=n.find('[data-period-part="input"]').val()||"";u={select:l,input:p}}t.conditions.push({id:a,type:s,value:u,isLocked:!1}),"multiselect"===o&&t.initConditionSelect2(a,o,u)}),e(".urcr-target-item").each(function(){var r=e(this),a=r.data("target-id"),i=r.find(".urcr-target-type-label"),n="",s=i.length?i.text().toLowerCase():"";if(-1!==s.indexOf("pages"))n="pages";else if(-1!==s.indexOf("posts"))n="posts";else if(-1!==s.indexOf("post type"))n="post_types";else if(-1!==s.indexOf("taxonomy"))n="taxonomy";else if(-1!==s.indexOf("whole site"))n="whole_site";else{var o=r.find(".urcr-content-target-input");o.length&&(n=o.data("content-type")||o.data("field-type")||""),!n&&r.find("span").length&&-1!==r.text().indexOf("Whole Site")&&(n="whole_site")}var c="";if("whole_site"===n)c="whole_site";else if("taxonomy"===n){var u=r.find(".urcr-taxonomy-select").val()||"",d=r.find(".urcr-content-target-input").attr("data-value"),l=[];if(d)try{l=JSON.parse(d)}catch(m){l=[]}c={taxonomy:u,value:l}}else{var p=r.find(".urcr-content-target-input").attr("data-value");if(p)try{c=JSON.parse(p)}catch(m){c=[]}else c=[]}t.contentTargets.push({id:a,type:n,value:c}),"whole_site"!==n&&setTimeout(function(){t.initContentTargetSelect2(a,n,c)},100)})},populateRuleData:function(t){var r=this;if(e(".urcr-conditions-list").empty(),e(".urcr-target-type-group").empty(),r.conditions=[],r.contentTargets=[],t.access_control?(r.accessControl=t.access_control,r.updateAccessControlClass()):(r.accessControl="access",r.updateAccessControlClass()),t.logic_map&&t.logic_map.conditions&&t.logic_map.conditions.length>0){var a=t.logic_map.conditions;a.sort(function(e,t){return"membership"===e.type?-1:"membership"===t.type?1:0}),a.forEach(function(e,t){var i=a[0],n=i&&"membership"===i.type&&0===t,s=e.value;s=Array.isArray(s)?s:"object"==typeof s&&null!==s?s:s||"",r.addCondition(e.type,n,s,e.id)})}else r.membershipId>0&&r.addCondition("membership",!0,[r.membershipId.toString()]);t.target_contents&&t.target_contents.length>0&&t.target_contents.forEach(function(e){var t=e.type;"wp_pages"===t&&(t="pages"),"wp_posts"===t&&(t="posts");var a=e.value||("whole_site"===t?"whole_site":[]);"taxonomy"===t?e.taxonomy?a={taxonomy:e.taxonomy,value:Array.isArray(e.value)?e.value:[]}:"object"!=typeof e.value||null===e.value||Array.isArray(e.value)||e.value.taxonomy&&(a={taxonomy:e.value.taxonomy,value:Array.isArray(e.value.value)?e.value.value:[]}):"whole_site"!==t&&(Array.isArray(a)||(a=a?[a]:[])),r.addContentTarget(t,a,e.id)})},bindEvents:function(){var t=this;e(document).on("click",".urcr-add-condition-button",function(e){e.preventDefault(),t.addCondition("roles",!1,"")}),e(document).on("keydown",".urcr-add-condition-button",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.addCondition("roles",!1,""))}),e(document).on("click",".urcr-condition-remove",function(r){r.preventDefault();var a=e(this).closest(".urcr-condition-wrapper").data("condition-id");t.removeCondition(a)}),e(document).on("change",".urcr-condition-field-select",function(){var r=e(this).closest(".urcr-condition-wrapper").data("condition-id"),a=e(this).val();t.updateConditionType(r,a)}),e(document).on("change",".urcr-condition-value-input",function(){var r=e(this).closest(".urcr-condition-wrapper");if(r.length){var a=r.data("condition-id");t.updateConditionValue(a,e(this))}}),e(document).on("change",".urcr-period-input-group input, .urcr-period-input-group select",function(){var r=e(this).closest(".urcr-condition-wrapper");if(r.length){var a=r.data("condition-id"),i=e(this).closest(".urcr-period-input-group"),n=i.find('[data-period-part="select"]').val(),s=i.find('[data-period-part="input"]').val(),o={select:n||"During",input:s||""},c=t.conditions.find(function(e){return e.id===a});c&&(c.value=o)}}),e(document).on("click",".urcr-add-content-button",function(r){r.preventDefault(),t.showContentTypeDropdown(e(this))}),e(document).on("click",".urcr-target-remove",function(r){r.preventDefault();var a=e(this).closest(".urcr-target-item").data("target-id");t.removeContentTarget(a)}),e(document).on("click",".urcr-content-type-option",function(r){if(r.preventDefault(),!e(this).hasClass("urcr-dropdown-option-disabled")&&"true"!==e(this).attr("aria-disabled")){var a=e(this).data("content-type");t.addContentTarget(a),e(".urcr-content-type-dropdown-menu").removeClass("ur-d-flex").addClass("ur-d-none")}}),e(document).on("keydown",".urcr-content-type-option",function(r){if(!e(this).hasClass("urcr-dropdown-option-disabled")&&"true"!==e(this).attr("aria-disabled")&&("Enter"===r.key||" "===r.key)){r.preventDefault();var a=e(this).data("content-type");t.addContentTarget(a),e(".urcr-content-type-dropdown-menu").removeClass("ur-d-flex").addClass("ur-d-none")}}),e(document).on("click",function(t){e(t.target).closest(".urcr-content-dropdown-wrapper").length||e(t.target).closest(".urcr-add-content-button").length||e(".urcr-content-type-dropdown-menu").removeClass("ur-d-flex").addClass("ur-d-none")}),e(document).on("change",".urcr-action-type-select",function(){var r=e(this).val()||"message";t.handleActionTypeChange(r)})},addCondition:function(t,r,a,i){if(t||(t="roles"),"membership"!==t){i||(i="x"+Date.now()+"_"+this.conditionCounter++);var n=this.getConditionOptions();if(n&&0!==n.length){var s=n.find(function(e){return e.value===t});s||(s=n[0],t=s.value);var o=s.type||"multiselect",c=this.getConditionRowHtml(i,t,s.label,o,a||"",!1),u=e(".urcr-conditions-list");0!==u.length&&(u.append(c),this.initConditionSelect2(i,o,a),this.conditions.push({id:i,type:t,value:a||"",isLocked:!1}))}}},getConditionRowHtml:function(e,t,r,a,i,n){var s=this.getConditionOptions(),o="";n||(o='<button type="button" class="button button-link-delete urcr-condition-remove" aria-label="Remove condition"><span class="dashicons dashicons-no-alt"></span></button>');var c='<select class="urcr-condition-field-select urcr-condition-value-input"'+(n?" disabled":"")+">";s.forEach(function(e){var r=e.value===t?"selected":"";c+='<option value="'+e.value+'" '+r+">"+e.label+"</option>"}),c+="</select>";var u=this.getConditionValueInputHtml(e,a,t,i,n);return'<div class="urcr-condition-wrapper" data-condition-id="'+e+'"><div class="urcr-condition-row ur-d-flex ur-mt-2 ur-align-items-start"><div class="urcr-condition-only ur-d-flex ur-align-items-start"><div class="urcr-condition-selection-section ur-d-flex ur-align-items-center ur-g-4"><div class="urcr-condition-field-name">'+c+'</div><div class="urcr-condition-operator"><span>is</span></div><div class="urcr-condition-value">'+u+"</div></div></div></div>"+o+"</div>"},getConditionValueInputHtml:function(e,t,r,a,i){var n="",s=i?" disabled":"";if("multiselect"===t)n='<select class="urcr-enhanced-select2 urcr-condition-value-input" multiple data-condition-id="'+e+'" data-field-type="'+r+'" '+s+"></select>";else if("checkbox"===t){var o="logged-out"===a||"logged_out"===a?"checked":"";n='<div class="urcr-checkbox-radio-input"><label><input type="radio" name="condition_'+e+'_user_state" value="logged-in" '+("logged-in"===a||"logged_in"===a||""===a?"checked":"")+" "+s+"> "+(urcr_membership_access_data.labels.logged_in||"Logged In")+'</label><label><input type="radio" name="condition_'+e+'_user_state" value="logged-out" '+o+" "+s+"> "+(urcr_membership_access_data.labels.logged_out||"Logged Out")+"</label></div>"}else if("date"===t)n='<input type="date" class="urcr-condition-value-input" data-condition-id="'+e+'" data-field-type="'+r+'" value="'+(a||"")+'" '+s+">";else if("period"===t){var c="During",u="";a&&"object"==typeof a?(c=a.select||"During",u=a.input||""):a&&"object"==typeof a&&a.value&&(u=a.value||"",c="During"),n='<div class="urcr-period-input-group ur-d-flex ur-align-items-center" style="gap: 8px;"><select class="urcr-period-select urcr-condition-value-input" data-condition-id="'+e+'" data-field-type="'+r+'" data-period-part="select" '+s+'><option value="During" '+("During"===c?"selected":"")+'>During</option><option value="After" '+("After"===c?"selected":"")+'>After</option></select><input type="number" class="urcr-period-number urcr-condition-value-input" data-condition-id="'+e+'" data-field-type="'+r+'" data-period-part="input" value="'+u+'" min="0" placeholder="Days" '+s+"></div>"}else n="number"===t?'<input type="number" class="urcr-condition-value-input" data-condition-id="'+e+'" data-field-type="'+r+'" value="'+(a||"")+'" '+s+">":'<input type="text" class="urcr-condition-value-input" data-condition-id="'+e+'" data-field-type="'+r+'" value="'+(a||"")+'" '+s+">";return n},initConditionSelect2:function(t,r,a){var i=e('.urcr-condition-wrapper[data-condition-id="'+t+'"] .urcr-enhanced-select2');if(i.length&&"multiselect"===r){var n=i.data("field-type"),s=this.getSelect2Options(n);i.hasClass("select2-hidden-accessible")&&i.select2("destroy"),setTimeout(function(){i.select2({data:s,multiple:!0,width:"100%"});var e=a,t=i.attr("data-value");if(t)try{e=JSON.parse(t)}catch(r){e=a}e&&Array.isArray(e)&&e.length>0?i.val(e).trigger("change"):e&&!Array.isArray(e)&&i.val([e]).trigger("change")},100)}},getSelect2Options:function(e){var t=[];if("roles"===e)urcr_membership_access_data.wp_roles&&(t=Object.keys(urcr_membership_access_data.wp_roles).map(function(e){return{id:e,text:urcr_membership_access_data.wp_roles[e]}}));else if("membership"===e)if(this.membershipId>0){var r="";urcr_membership_access_data.memberships&&urcr_membership_access_data.memberships[this.membershipId]&&(r=urcr_membership_access_data.memberships[this.membershipId]),t=[{id:this.membershipId.toString(),text:r||"Current Membership"}]}else urcr_membership_access_data.memberships&&(t=Object.keys(urcr_membership_access_data.memberships).map(function(e){return{id:e,text:urcr_membership_access_data.memberships[e]}}));else"capabilities"===e?urcr_membership_access_data.wp_capabilities&&(t=Object.keys(urcr_membership_access_data.wp_capabilities).map(function(e){return{id:e,text:urcr_membership_access_data.wp_capabilities[e]}})):"registration_source"===e?urcr_membership_access_data.registration_sources&&(t=Object.keys(urcr_membership_access_data.registration_sources).map(function(e){return{id:e,text:urcr_membership_access_data.registration_sources[e]}})):"ur_form_field"===e?t=[]:"payment_status"===e&&urcr_membership_access_data.payment_status&&(t=Object.keys(urcr_membership_access_data.payment_status).map(function(e){return{id:e,text:urcr_membership_access_data.payment_status[e]}}));return t},removeCondition:function(t){e('.urcr-condition-wrapper[data-condition-id="'+t+'"]').remove(),this.conditions=this.conditions.filter(function(e){return e.id!==t})},updateConditionType:function(t,r){var a=this.getConditionOptions().find(function(e){return e.value===r});if(a){var i=e('.urcr-condition-wrapper[data-condition-id="'+t+'"]').find(".urcr-condition-value"),n=this.getConditionValueInputHtml(t,a.type,r,"",!1);i.html(n),this.initConditionSelect2(t,a.type,"");var s=this.conditions.find(function(e){return e.id===t});s&&(s.type=r,s.value="")}},updateConditionValue:function(e,t){var r="";if(t.is("select"))r=t.is("[multiple]")?t.val()||[]:t.val()||"";else if(t.is('input[type="radio"]')){r=t.closest(".urcr-condition-wrapper").find('input[type="radio"]:checked').val()||""}else r=(t.is('input[type="number"]')||t.is('input[type="text"]')||t.is('input[type="date"]'),t.val()||"");var a=this.conditions.find(function(t){return t.id===e});a&&(a.value=r)},addContentTarget:function(t,r,a){a||(a="x"+Date.now()+"_"+this.targetCounter++);var i=this.getContentTypeLabel(t),n=this.getContentTargetHtml(a,t,i,r||"");e(".urcr-target-type-group").append(n),this.initContentTargetSelect2(a,t,r),this.contentTargets.push({id:a,type:t,value:r||("whole_site"===t?"whole_site":[])})},getContentTargetHtml:function(e,t,r,a){var i="";return i="whole_site"===t?"<span>"+urcr_membership_access_data.labels.whole_site+"</span>":"pages"===t||"posts"===t?'<select class="urcr-enhanced-select2 urcr-content-target-input" multiple data-target-id="'+e+'" data-content-type="'+t+'"></select>':"taxonomy"===t?'<div class="urcr-taxonomy-select-group"><select class="urcr-taxonomy-select" data-target-id="'+e+'"><option value="">Select Taxonomy</option></select><select class="urcr-enhanced-select2 urcr-content-target-input" multiple data-target-id="'+e+'" data-content-type="taxonomy"></select></div>':'<select class="urcr-enhanced-select2 urcr-content-target-input" multiple data-target-id="'+e+'" data-content-type="'+t+'"></select>','<div class="urcr-target-item" data-target-id="'+e+'"><span class="urcr-target-type-label">'+r+":</span>"+i+'<button type="button" class="button-link urcr-target-remove" aria-label="Remove"><span class="dashicons dashicons-no-alt"></span></button></div>'},initContentTargetSelect2:function(t,r,a){var i=e('.urcr-target-item[data-target-id="'+t+'"] .urcr-content-target-input');if(i.length&&"whole_site"!==r){var n=this.getContentTargetOptions(r);i.hasClass("select2-hidden-accessible")&&i.select2("destroy"),i.select2({data:n,multiple:!0,width:"100%"}),setTimeout(function(){a&&Array.isArray(a)&&a.length>0?i.val(a).trigger("change"):a&&!Array.isArray(a)&&"object"==typeof a&&a.value?Array.isArray(a.value)&&a.value.length>0&&i.val(a.value).trigger("change"):a&&!Array.isArray(a)&&i.val([a]).trigger("change")},50)}"taxonomy"===r&&this.initTaxonomySelect(t,a)},initTaxonomySelect:function(t,r){var a=this,i=e('.urcr-target-item[data-target-id="'+t+'"] .urcr-taxonomy-select'),n=e('.urcr-target-item[data-target-id="'+t+'"] .urcr-content-target-input');if(i.length&&urcr_membership_access_data.taxonomies){i.find("option").length<=1&&Object.keys(urcr_membership_access_data.taxonomies).forEach(function(e){i.append('<option value="'+e+'">'+urcr_membership_access_data.taxonomies[e]+"</option>")});var s=null,o=[];if(r&&r.taxonomy)s=r.taxonomy,o=r.value||[];else{s=i.val();var c=n.attr("data-value");if(c)try{o=JSON.parse(c)}catch(u){o=[]}}s&&(i.val()!==s&&i.val(s),a.updateTaxonomyTerms(t,s,o)),i.off("change").on("change",function(){var r=e(this).val();a.updateTaxonomyTerms(t,r,[])})}},updateTaxonomyTerms:function(t,r,a){var i=e('.urcr-target-item[data-target-id="'+t+'"] .urcr-content-target-input');if(i.length&&r&&urcr_membership_access_data.terms_list&&urcr_membership_access_data.terms_list[r]){var n=urcr_membership_access_data.terms_list[r],s=Object.keys(n).map(function(e){return{id:e,text:n[e]}});i.hasClass("select2-hidden-accessible")&&i.select2("destroy"),i.empty().select2({data:s,multiple:!0,width:"100%"}),a&&a.length>0&&setTimeout(function(){var e=a.map(function(e){return String(e)});i.val(e).trigger("change")},50)}},getContentTargetOptions:function(e){var t=[];return"pages"===e&&urcr_membership_access_data.pages?t=Object.keys(urcr_membership_access_data.pages).map(function(e){return{id:e,text:urcr_membership_access_data.pages[e]}}):"posts"===e&&urcr_membership_access_data.posts?t=Object.keys(urcr_membership_access_data.posts).map(function(e){return{id:e,text:urcr_membership_access_data.posts[e]}}):"post_types"===e&&urcr_membership_access_data.post_types&&(t=Object.keys(urcr_membership_access_data.post_types).map(function(e){return{id:e,text:urcr_membership_access_data.post_types[e]}})),t},removeContentTarget:function(t){var r=e('.urcr-target-item[data-target-id="'+t+'"]');r.length&&(r.removeClass("ur-d-flex").addClass("ur-d-none"),r.remove()),this.contentTargets=this.contentTargets.filter(function(e){return e.id!==t})},showContentTypeDropdown:function(t){var r=this.contentTargets.map(function(e){return e.type}),a=urcr_membership_access_data.is_pro||!1,i=urcr_membership_access_data.content_type_options,n=a?i:i.filter(function(e){return"posts"===e.value||"pages"===e.value}),s=t.closest(".urcr-content-dropdown-wrapper");if(0===s.length&&(s=t.closest(".urcr-target-selection-section").find(".urcr-content-dropdown-wrapper")),0===s.length&&(s=t.closest(".urcr-target-selection-wrapper").find(".urcr-content-dropdown-wrapper")),0!==s.length){var o=s.find(".urcr-content-type-dropdown-menu");0===o.length&&(o=e('<div class="urcr-content-type-dropdown-menu urcr-dropdown-menu"></div>'),s.append(o)),o.empty(),n.forEach(function(e){var t=-1!==r.indexOf(e.value),a=t?"urcr-dropdown-option-disabled":"",i=t?'aria-disabled="true"':"",n=t?"-1":"0";o.append('<span role="button" tabindex="'+n+'" class="urcr-dropdown-option urcr-content-type-option '+a+'" data-content-type="'+e.value+'" '+i+">"+e.label+"</span>")}),o.hasClass("ur-d-none")?o.removeClass("ur-d-none").addClass("ur-d-flex"):o.removeClass("ur-d-flex").addClass("ur-d-none")}},updateAccessControlClass:function(){var t=e(".urcr-condition-value-input-wrapper");t.removeClass("urcr-restrict-content"),t.addClass("urcr-access-content")},initSelect2:function(){},getConditionOptions:function(){var e=urcr_membership_access_data.condition_options||[];return urcr_membership_access_data.is_pro||!1||(e=e.filter(function(e){return"membership"===e.value||"roles"===e.value||"user_state"===e.value})),e=e.filter(function(e){return"membership"!==e.value})},getContentTypeLabel:function(e){for(var t=urcr_membership_access_data.content_type_options||[],r=0;r<t.length;r++)if(t[r].value===e)return t[r].label||e;return e},prepareRuleData:function(){var t=this,r=e("#ur-input-type-membership-name").closest("form").find('input[name="membership_id"]');if(r.length&&r.val()&&(t.membershipId=parseInt(r.val(),10)),!t.membershipId&&window.location.search){var a=new URLSearchParams(window.location.search).get("post_id");a&&(t.membershipId=parseInt(a,10))}var i=!1;e(".urcr-condition-wrapper").each(function(){if("membership"===e(this).find(".urcr-condition-field-select").val())return i=!0,!1});var n=[];e(".urcr-condition-wrapper").each(function(){var r=e(this),a=r.data("condition-id"),i=r.find(".urcr-condition-field-select").val(),s="",o=r.find(".select2-hidden-accessible");if(o.length)s=o.val()||[],Array.isArray(s)||(s=s?[s]:[]);else{var c=r.find(".urcr-condition-value-input");if(c.is("select[multiple]")){var u=c.val();s=Array.isArray(u)?u:u?[u]:[]}else if(c.is('input[type="radio"]'))s=r.find('input[type="radio"]:checked').val()||"";else if(r.find(".urcr-period-input-group").length){var d=r.find(".urcr-period-input-group"),l=d.find('[data-period-part="select"]').val(),p=d.find('[data-period-part="input"]').val();s={select:l||"During",input:p||""}}else s=c.val()||""}"membership"===i&&t.membershipId>0&&(s=[t.membershipId.toString()]),n.push({id:a,type:i,value:s})}),!i&&t.membershipId>0&&n.unshift({id:"x"+Date.now(),type:"membership",value:[t.membershipId.toString()]});var s=[];e(".urcr-target-item").each(function(){var t=e(this),r=t.data("target-id"),a="";if(t.find(".urcr-taxonomy-select").length)a="taxonomy";else if(t.find(".urcr-content-target-input").length)a=t.find(".urcr-content-target-input").data("content-type")||"";else{var i=t.find(".urcr-target-type-label");i.length&&-1!==i.text().indexOf("Whole Site")&&(a="whole_site")}var n="";switch(a){case"whole_site":n="whole_site";break;case"taxonomy":var o=t.find(".urcr-taxonomy-select").val(),c=t.find(".urcr-content-target-input"),u=[],d=c.attr("data-value");if(d)try{u=JSON.parse(d)}catch(f){u=[]}else u=c.val()||[];Array.isArray(u)||(u=u?[u]:[]),n={taxonomy:o,value:u};break;case"pages":case"posts":var l=[],p=(m=t.find(".urcr-content-target-input")).attr("data-value");if(p)try{l=JSON.parse(p)}catch(f){l=[]}else l=m.val()||[];n=Array.isArray(l)?l:l?[l]:[];break;default:var m,h=[],g=(m=t.find(".urcr-content-target-input")).attr("data-value");if(g)try{h=JSON.parse(g)}catch(f){h=[]}else h=m.val()||[];n=Array.isArray(h)?h:h?[h]:[]}switch(a){case"pages":a="wp_pages";break;case"posts":a="wp_posts"}s.push({id:r,type:a,value:n})});var o=t.getActionsFromForm(),c={title:"",access_rule_data:{enabled:!0,access_control:t.accessControl||"access",logic_map:{type:"group",id:"x"+Date.now(),conditions:n,logic_gate:"AND"},target_contents:s,actions:o},rule_type:"membership",membership_id:t.membershipId};return console.log(o),e("#urcr-membership-access-rule-data").val(JSON.stringify(c)),window.urcrMembershipAccessRuleData=c,c},initActionSection:function(){var t=e("#urcr-membership-action-type");if(e(".urcr-action-input-container").removeClass("ur-d-flex").addClass("ur-d-none"),t.length){e(".urcr-action-local-page, .urcr-action-ur-form, .urcr-action-shortcode-tag").each(function(){e(this).hasClass("select2-hidden-accessible")||e(this).select2({width:"100%"})});var r=t.val()||"message";this.handleActionTypeChange(r)}},handleActionTypeChange:function(t){e(".urcr-action-input-container").removeClass("ur-d-flex").addClass("ur-d-none"),t||(t="message");var r=null;switch(t){case"message":r=e(".urcrra-message-input-container");break;case"redirect":r=e(".urcrra-redirect-input-container");break;case"local_page":r=e(".urcrra-redirect-to-local-page-input-container");break;case"ur-form":r=e(".urcrra-ur-form-input-container");break;case"shortcode":r=e(".urcrra-shortcode-input-container");break;default:r=e(".urcrra-message-input-container")}r&&r.length&&r.removeClass("ur-d-none").addClass("ur-d-flex")},getActionsFromForm:function(){var t=e("#urcr-membership-action-type");if(!t.length)return this.getDefaultActions();var r=t.val()||"message",a={id:"x"+Date.now(),type:r,access_control:this.accessControl||"access"};switch(r){case"message":a.label="Show Message";var i="";i="undefined"!=typeof wp&&wp.editor&&e("#urcr-membership-action-message").length?wp.editor.getContent("urcr-membership-action-message"):e("#urcr-membership-action-message").val()||"",a.message=i||"<p>You do not have sufficient permission to access this content.</p>",a.redirect_url="",a.local_page="",a.ur_form="",a.shortcode={tag:"",args:""};break;case"redirect":a.label="Redirect",a.message="",a.redirect_url=e(".urcr-action-redirect-url").val()||"",a.local_page="",a.ur_form="",a.shortcode={tag:"",args:""};break;case"local_page":a.type="redirect_to_local_page",a.label="Redirect to a Local Page",a.message="",a.redirect_url="",a.local_page=e(".urcr-action-local-page").val()||"",a.ur_form="",a.shortcode={tag:"",args:""};break;case"ur-form":a.type="ur-form",a.label="Show UR Form",a.message="",a.redirect_url="",a.local_page="",a.ur_form=e(".urcr-action-ur-form").val()||"",a.shortcode={tag:"",args:""};break;case"shortcode":a.label="Render Shortcode",a.message="",a.redirect_url="",a.local_page="",a.ur_form="",a.shortcode={tag:e(".urcr-action-shortcode-tag").val()||"",args:e(".urcr-action-shortcode-args").val()||""}}return[a]},getDefaultActions:function(){return[{id:"x"+Date.now(),type:"message",label:"Show Message",message:"<p>You do not have sufficient permission to access this content.</p>",redirect_url:"",access_control:this.accessControl,local_page:"",ur_form:"",shortcode:{tag:"",args:""}}]}};e(document).ready(function(){0===e("#ur-membership-access-section").length?setTimeout(function(){e("#ur-membership-access-section").length>0&&t.init()},500):t.init()}),window.URCRMembershipAccess=t}(jQuery);