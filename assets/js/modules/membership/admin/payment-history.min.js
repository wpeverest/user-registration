!function(e,n){var t=e("#payment-detail-modal");if(UR_Snackbar)var o=new UR_Snackbar;var s={append_spinner:function(e){if(e&&e.append){return e.append('<span class="ur-spinner is-active"></span>'),!0}return!1},handle_bulk_delete_action:function(t){Swal.fire({title:'<img src="'+n.delete_icon+'" id="delete-user-icon">'+n.labels.i18n_prompt_title,html:'<p id="html_1">'+n.labels.i18n_prompt_bulk_subtitle+"</p>",showCancelButton:!0,confirmButtonText:n.labels.i18n_prompt_delete,cancelButtonText:n.labels.i18n_prompt_cancel,allowOutsideClick:!1}).then(function(o){if(o.isConfirmed){var a=t.find("input[type=checkbox]:checked"),i=[];if(a.length<=1)return void s.show_failure_message(n.labels.i18n_prompt_no_order_selected);a.each(function(n){0!==n&&i.push(e(this).val())}),s.send_data({action:"user_registration_membership_delete_orders",order_ids:JSON.stringify(i)},{success:function(n){n.success?(e(".ur-member-save-btn").text("Save"),s.show_success_message(n.data.message),s.remove_deleted_orders(a,!0)):s.show_failure_message(n.data.message)},failure:function(e,t){s.show_failure_message(n.labels.network_error+"("+t+")")},complete:function(){window.location.reload()}})}})},handle_single_delete_action:function(e){var t=e.data("order-id");Swal.fire({title:'<img src="'+n.delete_icon+'" id="delete-user-icon">'+n.labels.i18n_prompt_title,html:'<p id="html_1">'+n.labels.i18n_prompt_single_subtitle+"</p>",showCancelButton:!0,confirmButtonText:n.labels.i18n_prompt_delete,cancelButtonText:n.labels.i18n_prompt_cancel,allowOutsideClick:!1}).then(function(o){o.isConfirmed&&s.send_data({action:"user_registration_membership_delete_order",order_id:t},{success:function(n){n.success?(s.show_success_message(n.data.message),s.remove_deleted_orders(e,!1)):s.show_failure_message(n.data.message)},failure:function(e,t){s.show_failure_message(n.labels.network_error+"("+t+")")},complete:function(){window.location.reload()}})})},send_data:function(t,o){var s="function"==typeof o.success?o.success:function(){},a="function"==typeof o.failure?o.failure:function(){},i="function"==typeof o.beforeSend?o.beforeSend:function(){},r="function"==typeof o.complete?o.complete:function(){};!t._wpnonce&&n&&(t._wpnonce=n._nonce),e.ajax({type:"post",dataType:"json",url:n.ajax_url,data:t,beforeSend:i,success:s,error:a,complete:r})},show_success_message:function(e){return!!o&&(o.add({type:"success",message:e,duration:5}),!0)},show_failure_message:function(e){return!!o&&(o.add({type:"failure",message:e,duration:6}),!0)},remove_deleted_orders:function(n,t){t?n.each(function(n){0!==n&&e(this).parents("tr").remove()}):e(n).parents("tr").remove()},open_modal:function(){this.clear_modal(),t.css({display:"flex"})},close_modal:function(){t.css({display:"none"})},clear_modal:function(){t.find(".modal-body").empty()}};e(document).ready(function(){e("#doaction-orders").on("click",function(n){n.preventDefault(),n.stopPropagation();var t=e("#ur-membership-payment-history-form");switch(t.find("select#bulk-action-selector-top option:selected").val()){case"delete":s.handle_bulk_delete_action(t)}}),e(".single-delete-order").on("click",function(){s.handle_single_delete_action(e(this))}),e(document).on("click",".show-order-detail",function(){var o=e(this).data("order-id"),a=t.find(".modal-body");s.open_modal(),s.append_spinner(a),s.send_data({action:"user_registration_membership_show_order_detail",order_id:o},{success:function(e){if(e.success){var n=JSON.parse(e.data);a.html(n)}else s.show_failure_message(e.data.message)},failure:function(e,t){console.log(e),s.show_failure_message(n.labels.network_error+"("+t+")")},complete:function(){}})}),e(window).click(function(n){e(n.target).is(t)&&s.close_modal()}),e(document).on("click",".close-button",function(){s.close_modal()})})}(jQuery,window.urm_orders_localized_data);