!function(e,t){var n=e("#payment-detail-modal");if(UR_Snackbar)var o=new UR_Snackbar;var s={append_spinner:function(e){if(e&&e.append){return e.append('<span class="ur-spinner is-active"></span>'),!0}return!1},handle_bulk_delete_action:function(n){Swal.fire({title:'<img src="'+t.delete_icon+'" id="delete-user-icon">'+t.labels.i18n_prompt_title,html:'<p id="html_1">'+t.labels.i18n_prompt_bulk_subtitle+"</p>",showCancelButton:!0,confirmButtonText:t.labels.i18n_prompt_delete,cancelButtonText:t.labels.i18n_prompt_cancel,allowOutsideClick:!1}).then(function(o){if(o.isConfirmed){var a=n.find("input[type=checkbox]:checked"),i=[];if(a.length<=1)return void s.show_failure_message(t.labels.i18n_prompt_no_order_selected);a.each(function(t){0!==t&&i.push(e(this).val())}),s.send_data({action:"user_registration_membership_delete_orders",order_ids:JSON.stringify(i)},{success:function(t){t.success?(e(".ur-member-save-btn").text("Save"),s.show_success_message(t.data.message),s.remove_deleted_orders(a,!0)):s.show_failure_message(t.data.message)},failure:function(e,n){s.show_failure_message(t.labels.network_error+"("+n+")")},complete:function(){window.location.reload()}})}})},handle_single_delete_action:function(e){var n=e.data("order-id");Swal.fire({title:'<img src="'+t.delete_icon+'" id="delete-user-icon">'+t.labels.i18n_prompt_title,html:'<p id="html_1">'+t.labels.i18n_prompt_single_subtitle+"</p>",showCancelButton:!0,confirmButtonText:t.labels.i18n_prompt_delete,cancelButtonText:t.labels.i18n_prompt_cancel,allowOutsideClick:!1}).then(function(o){o.isConfirmed&&s.send_data({action:"user_registration_membership_delete_order",order_id:n},{success:function(t){t.success?(s.show_success_message(t.data.message),s.remove_deleted_orders(e,!1)):s.show_failure_message(t.data.message)},failure:function(e,n){s.show_failure_message(t.labels.network_error+"("+n+")")},complete:function(){window.location.reload()}})})},send_data:function(n,o){var s="function"==typeof o.success?o.success:function(){},a="function"==typeof o.failure?o.failure:function(){},i="function"==typeof o.beforeSend?o.beforeSend:function(){},r="function"==typeof o.complete?o.complete:function(){};!n._wpnonce&&t&&(n._wpnonce=t._nonce),e.ajax({type:"post",dataType:"json",url:t.ajax_url,data:n,beforeSend:i,success:s,error:a,complete:r})},show_success_message:function(e){return!!o&&(o.add({type:"success",message:e,duration:5}),!0)},show_failure_message:function(e){return!!o&&(o.add({type:"failure",message:e,duration:6}),!0)},remove_deleted_orders:function(t,n){n?t.each(function(t){0!==t&&e(this).parents("tr").remove()}):e(t).parents("tr").remove()},open_modal:function(){this.clear_modal(),n.css({display:"flex"})},close_modal:function(){n.css({display:"none"})},clear_modal:function(){n.find(".modal-body").empty()}};e(document).ready(function(){e("#doaction-orders,#doaction-orders2").on("click",function(t){t.preventDefault(),t.stopPropagation();var n=e("#ur-membership-payment-history-form");switch(n.find("select#bulk-action-selector-top option:selected").val()){case"delete":s.handle_bulk_delete_action(n)}}),e(".single-delete-order").on("click",function(){s.handle_single_delete_action(e(this))}),e(document).on("click",".show-order-detail",function(){var o=e(this),a=o.data("order-id"),i=n.find(".modal-body"),r=o.data("user-id");s.open_modal(),s.append_spinner(i),s.send_data({action:"user_registration_membership_show_order_detail",order_id:a,user_id:r},{success:function(e){if(e.success){var t=JSON.parse(e.data);i.html(t)}else s.show_failure_message(e.data.message)},failure:function(e,n){s.show_failure_message(t.labels.network_error+"("+n+")")},complete:function(){}})}),e(window).click(function(t){e(t.target).is(n)&&s.close_modal()}),e(document).on("click",".close-button",function(){s.close_modal()}),e(document).on("change","#user-registration-pro-payment-type-filters",function(){var t=e(this).find("option:selected").val();e(".module-box").each(function(t,n){e(n).hide(),e(n).find("select option").removeAttr("selected")}),e("#user-registration-pro-"+t+"-filters-container").css({display:"flex"})}),e(document).on("click",".approve-payment",function(){var n=e(this),o=n.data("order-id");s.append_spinner(n),s.toggleSaveButtons(!0),s.send_data({action:"user_registration_membership_approve_payment",order_id:o},{success:function(a){(a=JSON.parse(a.data)).status?(s.show_success_message(a.message),n.siblings("span").removeClass("pending").addClass("completed").text(t.labels.i18n_payment_completed),e("#ur-order-"+o).removeClass("pending").addClass("completed").text(t.labels.i18n_payment_completed),n.remove()):s.show_failure_message(a.message)},failure:function(e,n){console.log(e),s.show_failure_message(t.labels.network_error+"("+n+")")},complete:function(){s.remove_spinner(n),s.toggleSaveButtons(!1)}})})})}(jQuery,window.urm_orders_localized_data);