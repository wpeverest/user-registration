function ur_init_tooltips(e,t){if(null!=e&&""!==e){var r={theme:"tooltipster-borderless",maxWidth:200,multiple:!0,interactive:!0,position:"bottom",contentAsHTML:!0,functionInit:function(e,t){var r=jQuery(t.origin).attr("data-tip");r&&e.content(r)}};t&&"object"==typeof t&&Object.keys(t).forEach(function(e){r[e]=t[e]}),"string"==typeof e?jQuery(e).tooltipster(r):e.tooltipster(r)}}jQuery(function(e){var t={init:function(){this.init_event(),this.handle_user_logout()},profile_picture_upload:function(t){var r=user_registration_params.ajax_url+"?action=user_registration_profile_pic_upload&security="+user_registration_params.user_registration_profile_picture_upload_nonce,i=new FormData,o=t;i.append("file",o[0].files[0]);var n=o.closest(".button-group").find(".user_registration_profile_picture_upload"),a=n.text();e.ajax({url:r,data:i,type:"POST",processData:!1,contentType:!1,beforeSend:function(){n.text(user_registration_params.user_registration_profile_picture_uploading)},complete:function(e){var t="",r="";o.val("");var i=JSON.parse(e.responseText);t=i.data.message,i.success||(t='<p class="uraf-profile-picture-error user-registration-error">'+t+"</p>"),i.success&&(t="",r=i.data.url,i.data.attachment_id,upload_files=i.data.upload_files,o.closest(".button-group").find("#profile_pic_url").val(upload_files),o.closest(".user-registration-profile-header").find(".profile-preview").attr("src",r)),o.closest(".button-group").find(".profile-pic-remove").data("attachment-id",i.data.attachment_id),o.closest(".button-group").find(".profile-pic-remove").prop("style",!1),o.closest(".button-group").find(".user_registration_profile_picture_upload").attr("style","display:none"),o.closest(".user-registration-profile-header").find(".user-registration-profile-picture-error").remove(),o.closest(".button-group").after('<span class="user-registration-profile-picture-error">'+t+"</span>"),n.text(a),o.closest(".user-registration-profile-header").find(".ur-new-profile-image-message").attr("style","display: none"),o.closest(".user-registration-profile-header").find(".ur-profile-image-updated-message").attr("style","display: block")}})},init_event:function(){e(".user_registration_profile_picture_upload").on("click",function(){e(this).closest(".button-group").find('input[type="file"]').trigger("click")}),e(document).on("change",'.button-group input[type="file"]',function(){t.profile_picture_upload(e('.button-group input[type="file"]'))})},remove_avatar:function(e){var t=e.data("attachment-id");if(e.closest("form").find(".ur_removed_profile_pic").length<=0){var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("class","ur_removed_profile_pic"),r.setAttribute("name","ur_removed_profile_pic"),r.setAttribute("value",""),e.closest("form").append(r)}var i=e.closest("form").find(".ur_removed_profile_pic").val(),o=new Set(i?JSON.parse(i):[]);o.add(t),e.closest("form").find(".ur_removed_profile_pic").val(JSON.stringify(Array.from(o)));e.closest("form").find('input[name="profile-pic"]');input_hidden=e.closest("form").find('input[name="profile-pic-url"]'),profile_default_input_hidden=e.closest("form").find('input[name="profile-default-image"]'),preview=e.closest("form").find("img.profile-preview"),input_hidden.val(""),preview.attr("src",profile_default_input_hidden.val()),e.hide(),e.closest(".button-group").find(".user_registration_profile_picture_upload").show(),e.closest(".user-registration-profile-header").find(".user-registration-profile-picture-error").remove()},handle_user_logout:function(){e(document).on("click",".ur-logout, .urcma-users-logout",function(t){t.preventDefault(),t.stopPropagation();var r=e(this);swal.fire({title:r.text().trim()+"?",html:user_registration_params.logout_popup_text,confirmButtonText:r.text(),confirmButtonColor:"#F25656",showConfirmButton:!0,showCancelButton:!0,cancelButtonText:user_registration_params.logout_popup_cancel_text,cancelButtonColor:"#FFFFFF",customClass:{container:"user-registration-swal2-container user-registration-logout-swal2-container",title:"swal2-title-border"},focusConfirm:!1,showLoaderOnConfirm:!0}).then(function(e){e.isConfirmed&&(window.location.href=r.attr("href"))})})}};e(".profile-pic-remove, .uraf-profile-picture-remove").on("click",function(t){t.preventDefault(),e(this).closest(".user-registration-profile-header").find(".ur-new-profile-image-message").attr("style","display: block"),e(this).closest(".user-registration-profile-header").find(".ur-profile-image-updated-message").attr("style","display: none"),e(this).closest(".user-registration-profile-header").find(".user_registration_profile_picture_upload").trigger("click")}),e(document).on("user_registration_frontend_before_edit_profile_submit",function(t,r,i){var o=e(".ur_removed_profile_pic");e.each(o,function(){r.ur_removed_profile_pic=e(this).val()})}),e(document).on("click","input#user_registration_user_email + div.email-updated.inline a",function(t){t.preventDefault();var r=e(this),i=new URL(t.target.href),o=i.searchParams.get("cancel_email_change"),n=i.searchParams.get("_wpnonce"),a=user_registration_params.ajax_url;e.ajax({type:"POST",url:a,data:{action:"user_registration_cancel_email_change",cancel_email_change:o,_wpnonce:n},success:function(e){e.success&&r.parents("div.email-updated.inline").remove()}})}),e(".ur-frontend-form").find(".user-registration-profile-header").find(".uraf-profile-picture-upload").length||(t.init(),e(".edit-profile").on("submit",function(t){var r=e(".ur-smart-phone-field");if("true"===r.attr("aria-invalid")){t.preventDefault();var i=r.closest("p.form-row");i.find("#"+r.data("id")+"-error").remove();var o='<label id="'+r.data("id")+'-error" class="user-registration-error" for="'+r.data("id")+'">'+user_registration_params.message_validate_phone_number+"</label>";return i.append(o),i.find("#"+r.data("id")).attr("aria-invalid",!0),!0}if(1===e(this).find(".user-registration-profile-picture-error").find(".user-registration-error").length)return t.preventDefault(),!0})),e("input.flatpickr-input").each(function(){e(this).val(e(this).attr("value"))}),e(".user-registration-myaccount-notice-box .close").on("click",function(){e(this).parent().css("display","none")}),e(".form-login-preview").on("click",function(){e(this).preventDefault()}),document.querySelectorAll(".form-login-preview").forEach(function(e){["click","change","input","submit"].forEach(function(t){e.addEventListener(t,function(e){e.preventDefault(),e.stopImmediatePropagation()},!0),e.querySelectorAll("input, select, textarea, button").forEach(function(e){e.disabled=!0,e.setAttribute("autocomplete","off")})})});var r=e(document).find(".user_registration_profile_picture_upload"),i=document.getElementById("ur-profile-pic");r&&i&&(r.closest(".button-group").find(".uraf-profile-picture-upload").hide(),r.off("click").on("click",function(e){e.preventDefault(),e.stopPropagation(),r.closest(".button-group").find(".uraf-profile-picture-upload").length>0?r.closest(".button-group").find(".uraf-profile-picture-upload").toggle():i.click()}),e(document).on("click",function(t){var r=e(t.target).closest(".uraf-profile-picture-upload").length>0,i=e(t.target).closest(".user_registration_profile_picture_upload").length>0,o=e(document).find(".user_registration_profile_picture_upload").closest(".button-group").find(".uraf-profile-picture-upload");r||i||o.hide()}))}),jQuery(function(e){var t=null;e(document).on("click",".menu-trigger",function(r){r.preventDefault(),r.stopPropagation();var i=e(this).closest(".action-menu").find(".dropdown");t&&!i.is(t)&&t.addClass("hidden");var o=this.getBoundingClientRect();i.css({position:"fixed",top:o.bottom+6,left:o.left,zIndex:1e5,width:"0px"}),i.hasClass("hidden")?i.removeClass("hidden"):i.addClass("hidden"),t=i.hasClass("hidden")?null:i}),e(document).on("click",function(r){e(r.target).closest(".dropdown").length||e(r.target).closest(".menu-trigger").length||(e(".dropdown").addClass("hidden"),t=null)}),ur_init_tooltips(e(".user-registration-help-tip"))});