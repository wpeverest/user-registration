jQuery(function(e){var r={init:function(){this.init_event()},profile_picture_upload:function(r){var i=user_registration_params.ajax_url+"?action=user_registration_profile_pic_upload&security="+user_registration_params.user_registration_profile_picture_upload_nonce,t=new FormData,o=r;t.append("file",o[0].files[0]);var s=o.closest(".button-group").find(".user_registration_profile_picture_upload"),a=s.text();e.ajax({url:i,data:t,type:"POST",processData:!1,contentType:!1,beforeSend:function(){s.text(user_registration_params.user_registration_profile_picture_uploading)},complete:function(r){var i="",t="";o.val("");var n=e.parseJSON(r.responseText);i=n.data.message,n.success||(i='<p class="uraf-profile-picture-error user-registration-error">'+i+"</p>"),n.success&&(i="",t=n.data.url,o.closest(".button-group").find("#profile_pic_url").val(t),o.closest(".user-registration-profile-header").find(".profile-preview").attr("src",t)),o.closest(".button-group").find(".profile-pic-remove").removeAttr("style"),o.closest(".button-group").find(".user_registration_profile_picture_upload").attr("style","display:none"),o.closest(".user-registration-profile-header").find(".user-registration-profile-picture-error").remove(),o.closest(".button-group").after('<span class="user-registration-profile-picture-error">'+i+"</span>"),s.text(a)}})},init_event:function(){e(".user_registration_profile_picture_upload").on("click",function(){e(this).closest(".button-group").find('input[type="file"]').trigger("click")}),e(document).on("change",'.button-group input[type="file"]',function(){r.profile_picture_upload(e('.button-group input[type="file"]'))})}};e(".profile-pic-remove").on("click",function(r){r.preventDefault();var i=e(this).closest("form").find('input[name="profile-pic"]');input_hidden=e(this).closest("form").find('input[name="profile-pic-url"]'),profile_default_input_hidden=e(this).closest("form").find('input[name="profile-default-image"]'),preview=e(this).closest("form").find("img.profile-preview"),input_hidden.val(""),preview.attr("src",profile_default_input_hidden.val()),e(this).hide(),"yes"===user_registration_params.ajax_submission_on_edit_profile?(e(this).closest(".button-group").find(".user_registration_profile_picture_upload").show(),e(this).closest(".user-registration-profile-header").find(".user-registration-profile-picture-error").remove()):i.val("").show()}),e(".ur-frontend-form").find("form.edit-profile").hasClass("user-registration-EditProfileForm")&&"yes"===user_registration_params.ajax_submission_on_edit_profile?r.init():e(".edit-profile").submit(function(r){var i=e(".ur-smart-phone-field");if("true"===i.attr("aria-invalid")){r.preventDefault();var t=i.closest("p.form-row");t.find("#"+i.data("id")+"-error").remove();var o='<label id="'+i.data("id")+'-error" class="user-registration-error" for="'+i.data("id")+'">'+user_registration_params.message_validate_phone_number+"</label>";return t.append(o),t.find("#"+i.data("id")).attr("aria-invalid",!0),!0}}),e("input.flatpickr-input").each(function(){e(this).val(e(this).attr("value"))})});