jQuery(function(s){var e={init:function(){this.init_event()},profile_picture_upload:function(e){var r=user_registration_params.ajax_url+"?action=user_registration_profile_pic_upload&security="+user_registration_params.user_registration_profile_picture_upload_nonce,i=new FormData,t=e,o=(i.append("file",t[0].files[0]),i.append("valid_extension",s('input[name="profile-pic"]').attr("accept")),t.closest(".button-group").find(".user_registration_profile_picture_upload")),n=o.text();s.ajax({url:r,data:i,type:"POST",processData:!1,contentType:!1,beforeSend:function(){o.text(user_registration_params.user_registration_profile_picture_uploading)},complete:function(e){var r="",e=(t.val(""),JSON.parse(e.responseText)),r=e.data.message;e.success||(r='<p class="uraf-profile-picture-error user-registration-error">'+r+"</p>"),e.success&&(r="",e=e.data.url,t.closest(".button-group").find("#profile_pic_url").val(e),t.closest(".user-registration-profile-header").find(".profile-preview").attr("src",e)),t.closest(".button-group").find(".profile-pic-remove").prop("style",!1),t.closest(".button-group").find(".user_registration_profile_picture_upload").attr("style","display:none"),t.closest(".user-registration-profile-header").find(".user-registration-profile-picture-error").remove(),t.closest(".button-group").after('<span class="user-registration-profile-picture-error">'+r+"</span>"),o.text(n)}})},init_event:function(){s(".user_registration_profile_picture_upload").on("click",function(){s(this).closest(".button-group").find('input[type="file"]').trigger("click")}),s(document).on("change",'.button-group input[type="file"]',function(){e.profile_picture_upload(s('.button-group input[type="file"]'))})}};s(".profile-pic-remove").on("click",function(e){e.preventDefault();e=s(this).closest("form").find('input[name="profile-pic"]');input_hidden=s(this).closest("form").find('input[name="profile-pic-url"]'),profile_default_input_hidden=s(this).closest("form").find('input[name="profile-default-image"]'),preview=s(this).closest("form").find("img.profile-preview"),input_hidden.val(""),preview.attr("src",profile_default_input_hidden.val()),s(this).hide(),"yes"===user_registration_params.ajax_submission_on_edit_profile?(s(this).closest(".button-group").find(".user_registration_profile_picture_upload").show(),s(this).closest(".user-registration-profile-header").find(".user-registration-profile-picture-error").remove()):e.val("").show()}),s(".ur-frontend-form").find(".user-registration-profile-header").find(".uraf-profile-picture-upload").length||(s(".ur-frontend-form").find("form.edit-profile").hasClass("user-registration-EditProfileForm")&&"yes"===user_registration_params.ajax_submission_on_edit_profile?e.init():s(".edit-profile").on("submit",function(e){var r,i=s(".ur-smart-phone-field");if("true"===i.attr("aria-invalid"))return e.preventDefault(),(e=i.closest("p.form-row")).find("#"+i.data("id")+"-error").remove(),r='<label id="'+i.data("id")+'-error" class="user-registration-error" for="'+i.data("id")+'">'+user_registration_params.message_validate_phone_number+"</label>",e.append(r),e.find("#"+i.data("id")).attr("aria-invalid",!0),!0})),s("input.flatpickr-input").each(function(){s(this).val(s(this).attr("value"))})});