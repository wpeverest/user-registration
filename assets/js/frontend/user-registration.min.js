function request_recaptcha_token(){0!==jQuery(".ur-frontend-form").find("form.register #ur-recaptcha-node #node_recaptcha_register.g-recaptcha-v3").length&&grecaptcha.ready(function(){grecaptcha.execute(ur_google_recaptcha_code.site_key,{action:"register"}).then(function(e){jQuery("form.register").find("#g-recaptcha-response").text(e)})});0!==jQuery(".ur-frontend-form").find("form.login .ur-form-row .ur-form-grid #ur-recaptcha-node #node_recaptcha_login.g-recaptcha-v3").length&&grecaptcha.ready(function(){grecaptcha.execute(ur_google_recaptcha_code.site_key,{action:"login"}).then(function(e){jQuery("form.login").find("#g-recaptcha-response").text(e)})})}!function(e){({$user_registration:e(".ur-frontend-form form.register, .ur-frontend-form form.edit-password"),init:function(){this.load_validation(),this.init_inputMask(),this.init_tiptip(),this.$user_registration.on("input validate change",".input-text, select, input:checkbox input:radio",this.validate_field)},init_inputMask:function(){"undefined"!=typeof e.fn.inputmask&&e(".ur-masked-input").inputmask()},init_tiptip:function(){if("undefined"!=typeof tipTip){e(".user-registration-help-tip").tipTip({attribute:"title",fadeIn:50,fadeOut:50,delay:200})}},load_validation:function(){if("undefined"==typeof e.fn.validate)return!1;e.validator.methods.email=function(e,r){var a=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return this.optional(r)||a.test(e)},this.$user_registration.each(function(){var r=e(this),a={},t={};r.find("#user_confirm_email").length&&(a.user_confirm_email={equalTo:".user-registration #user_email"},t.user_confirm_email=user_registration_params.message_confirm_email_fields),r.hasClass("edit-password")?(a.password_2={equalTo:"#password_1"},t.password_2=user_registration_params.message_confirm_password_fields):r.hasClass("register")&&r.find("#user_confirm_password").length&&(a.user_confirm_password={equalTo:".user-registration #user_pass"},t.user_confirm_password=user_registration_params.message_confirm_password_fields),r.validate({errorClass:"user-registration-error",validClass:"user-registration-valid",rules:a,messages:t,errorPlacement:function(e,r){if(r.is("#password_2"))r.parent().after(e);else if("radio"===r.attr("type")||"checkbox"===r.attr("type")||"password"===r.attr("type"))r.parent().parent().parent().append(e);else if(r.is("select")&&r.attr("class").match(/date-month|date-day|date-year/))0===r.parent().find("label.user-registration-error:visible").length&&r.parent().find("select:last").after(e);else if(r.hasClass("ur-smart-phone-field")){var a=r.closest("p.form-row");a.find("#"+r.data("id")+"-error").remove(),a.append(e)}else r.hasClass("urfu-file-input")?e.insertAfter(r.parent().parent()):e.insertAfter(r)},highlight:function(r,a,t){var i=e(r);i.closest(".form-row"),i.attr("name")},unhighlight:function(r,a,t){var i=e(r),s=i.closest(".form-row"),n=i.attr("name");"radio"===i.attr("type")||"checkbox"===i.attr("type")?s.find("input[name='"+n+"']").addClass(t).removeClass(a):i.addClass(t).removeClass(a),s.removeClass("user-registration-has-error")},submitHandler:function(r){return!!e(r).hasClass("edit-password")}})})},validate_field:function(r){e.extend(e.validator.messages,{required:user_registration_params.message_required_fields,url:user_registration_params.message_url_fields,email:user_registration_params.message_email_fields,number:user_registration_params.message_number_fields,confirmpassword:user_registration_params.message_confirm_password_fields});var a=e(this),t=a.closest(".form-row"),i=!0,s=t.is(".validate-required"),n=t.is(".validate-email"),o=r.type;if("input"===o&&t.removeClass("user-registration-invalid user-registration-invalid-required-field user-registration-invalid-email user-registration-validated"),"validate"===o||"change"===o){if(s&&("checkbox"!==a.attr("type")||a.is(":checked")?""===a.val()&&(t.removeClass("user-registration-validated").addClass("user-registration-invalid user-registration-invalid-required-field"),i=!1):(t.removeClass("user-registration-validated").addClass("user-registration-invalid user-registration-invalid-required-field"),i=!1)),n&&a.val()){new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(a.val())||(t.removeClass("user-registration-validated").addClass("user-registration-invalid user-registration-invalid-email"),i=!1)}i&&t.removeClass("user-registration-invalid user-registration-invalid-required-field user-registration-invalid-email").addClass("user-registration-validated")}}}).init();var r=user_registration_params.ursL10n;e.fn.ur_form_submission=function(){return this.each(function(){var a=e(this),t=[],i=user_registration_params.form_required_fields,s={init:function(){},get_form_data:function(){var r=this,t=[],i=a.closest(".ur-frontend-form").find(".ur-form-grid").find(".ur-frontend-field"),s=new Array;e.each(i,function(){var i=e(this).attr("name");if(a.closest(".ur-frontend-form").find(".ur-form-grid").find('.ur-frontend-field[name="'+i+'"]').length<2){var n=r.get_fieldwise_data(e(this));t.push(n)}else e.inArray(i,s)<0&&s.push(i)});for(var n=0;n<s.length;n++){var o=a.closest(".ur-frontend-form").find(".ur-form-grid").find('.ur-frontend-field[name="'+s[n]+'"]'),u=(o.get(0).tagName.toLowerCase(),"undefined"!==o.eq(0).attr("type")?o.eq(0).attr("type"):"null"),d=new Array;if(e.each(o,function(){var r=e(this),a="";switch(r.get(0).tagName.toLowerCase()){case"input":switch(u){case"checkbox":case"radio":a=r.prop("checked")?r.val():"";break;default:a=r.val()}break;case"select":case"textarea":a=r.val()}""!==a&&d.push(a)}),"checkbox"==u)var l=JSON.stringify(d);else if("radio"==u)l=d[0];else l=o.val();var f=s[n];f=f.replace("[]","");var c={value:l,field_type:u,label:o.eq(0).attr("data-label"),field_name:f};t.push(c)}return e(document).trigger("user_registration_frontend_form_data_filter",[t]),t},get_fieldwise_data:function(r){var a={},s=r.get(0).tagName.toLowerCase(),n="undefined"!==r.attr("type")?r.attr("type"):"null",o=r.get(0).className.split(" ")[0];switch(a.value="",s){case"input":switch(n){case"checkbox":case"radio":a.value=r.prop("checked")?r.val():"";break;default:a.value=r.val()}break;case"select":a.value=r.val();break;case"textarea":switch(o){case"wysiwyg":tinyMCE.triggerSave(),a.value=r.val();break;default:a.value=r.val()}}return e(document).trigger("user_registration_frontend_form_data_render",[r,a]),a.field_type="undefined"!==r.eq(0).attr("type")?r.eq(0).attr("type"):"null",r.attr("data-label")!==undefined?a.label=r.attr("data-label"):r.prev().length&&"label"===r.prev().get(0).tagName.toLowerCase()?a.label=r.prev().text():a.label=a.field_type,r.attr("name")!==undefined&&""!==r.attr("name")?(a.field_name=r.attr("name"),a.field_name=a.field_name.replace("[]","")):a.field_name="",e.inArray(a.field_name,e.trim(i))>=0&&t.push(a.field_name),a},show_message:function(r,a,t){t.find(".ur-message").remove();var i=e('<div class="ur-message user-registration-'+a+'" id="ur-submit-message-node"/>');i.append(r),t.append(i)}},n={init:function(){this.form_submit_event()},form_submit_event:function(){e("form.register").on("submit",function(a){var t=e(this);if(e.extend(e.validator.messages,{required:user_registration_params.message_required_fields,url:user_registration_params.message_url_fields,email:user_registration_params.message_email_fields,number:user_registration_params.message_number_fields,confirmpassword:user_registration_params.message_confirm_password_fields}),t.find(".user-registration-password-strength").length>0){var i=t.find(".user-registration-password-strength").attr("data-current-strength"),n=t.find(".user-registration-password-strength").attr("data-min-strength");if(parseInt(i,0)<parseInt(n,0)){if(""!=t.find("#user_pass").val()){t.find("#user_pass_error").remove();var o='<label id="user_pass_error" class="user-registration-error" for="user_pass">'+r.password_strength_error+".</label>";t.find(".user-registration-password-hint").after(o),t.find("#user_pass").attr("aria-invalid",!0),t.find("#user_pass").focus()}return!1}}var u=e(".ur-smart-phone-field");if("true"===u.attr("aria-invalid")){(l=u.closest("p.form-row")).find("#"+u.data("id")+"-error").remove();var d='<label id="'+u.data("id")+'-error" class="user-registration-error" for="'+u.data("id")+'">'+user_registration_params.message_validate_phone_number+"</label>";return l.append(d),l.find("#"+u.data("id")).attr("aria-invalid",!0),!0}if(1===e(".uraf-profile-picture-upload").find(".user-registration-error").length){var l,f=e(".uraf-profile-picture-upload").find(".uraf-profile-picture-input");(l=e(".uraf-profile-picture-upload")).find("#"+f.attr("name")+"-error").remove(),l.find(".uraf-profile-picture-file-error").remove();var c='<label id="'+f.attr("name")+'-error" class="user-registration-error" for="'+f.attr("name")+'">'+user_registration_params.message_required_fields+"</label>";l.find("button.wp_uraf_profile_picture_upload").after(c)}if(t.valid()){a.preventDefault(),t.find(".ur-submit-button").prop("disabled",!0);var p,_=0,m="0",g=t.find("#g-recaptcha-response").val();try{p=JSON.stringify(s.get_form_data())}catch(h){p=""}1===e(this).closest("form").find('input[name="ur-user-form-id"]').length&&(_=e(this).closest("form").find('input[name="ur-user-form-id"]').val()),1===e(this).closest("form").find('input[name="ur_frontend_form_nonce"]').length&&(m=e(this).closest("form").find('input[name="ur_frontend_form_nonce"]').val());var F={action:"user_registration_user_form_submit",security:user_registration_params.user_registration_form_data_save,form_data:p,captchaResponse:g,form_id:_,ur_frontend_form_nonce:m};if(e(document).trigger("user_registration_frontend_before_form_submit",[F,t]),"undefined"!=typeof ur_google_recaptcha_code&&"1"===ur_google_recaptcha_code.is_captcha_enable){if(0===(g=t.find("#g-recaptcha-response").val()).length)return void s.show_message("<p>"+r.captcha_error+"</p>","error",t);"v3"==ur_google_recaptcha_code.version?request_recaptcha_token():grecaptcha.reset()}t.find(".ur-submit-button").find("span").addClass("ur-front-spinner"),e.ajax({url:user_registration_params.ajax_url,data:F,type:"POST",async:!0,complete:function(a){t.find(".ur-submit-button").find("span").removeClass("ur-front-spinner");var i=t.find('input[name="ur-redirect-url"]').val(),n=e('<ul class=""/>'),o="error";try{var u=e.parseJSON(a.responseText);"undefined"!=typeof u.success&&!0===u.success&&"undefined"!=typeof u.data.paypal_redirect&&(window.location=u.data.paypal_redirect),"undefined"!=typeof u.success&&!0===u.success&&(o="message"),"message"===o?(e(".user-registration-password-hint").remove(),e(".user-registration-password-strength").remove(),"admin_approval"==u.data.form_login_option?n.append("<li>"+r.user_under_approval+"</li>"):"email_confirmation"==u.data.form_login_option?n.append("<li>"+r.user_email_pending+"</li>"):"payment"==u.data.form_login_option?n.append("<li>"+u.data.message+"</li>"):n.append("<li>"+r.user_successfully_saved+"</li>"),t[0].reset(),jQuery("#billing_country").trigger("change"),jQuery("#shipping_country").trigger("change"),void 0!==i&&""!==i?window.setTimeout(function(){window.location=i},1e3):"undefined"!=typeof u.data.auto_login&&u.data.auto_login&&location.reload()):"error"===o&&("object"==typeof u.data.message?e.each(u.data.message,function(e,r){n.append("<li>"+r+"</li>")}):n.append("<li>"+u.data.message+"</li>"))}catch(d){n.append("<li>"+d.message+"</li>")}s.show_message(n,o,t),e(document).trigger("user_registration_frontend_after_ajax_complete",[a.responseText,o,t]),t.find(".ur-submit-button").prop("disabled",!1)}})}})}};s.init(),n.init()})},e(function(){e("form.register").ur_form_submission();var a=!1,t=e("#load_flatpickr").attr("data-id"),i=e(".ur-frontend-form #"+t);i.attr("type","text"),i.val(e("#formated_date").val()),e("#load_flatpickr").click(function(){var r;a||(e(this).attr("data-date-format",i.data("date-format")),e(this).attr("data-mode",i.data("mode")),e(this).attr("data-min-date",i.data("min-date")),e(this).attr("data-max-date",i.data("max-date")),e(this).attr("data-default-date",e("#formated_date").val()),r=e(this).flatpickr({disableMobile:!0,onChange:function(r,a,i){e("#"+t).val(a)}}),a=!0),r&&r.open()}),e("form.register, form.edit-password").on("focusout","#user_pass, #password_1",function(){$this=e(this);var a=e(this).attr("name"),t=e(this).data("id"),i=$this.closest("form").attr("data-enable-strength-password");if("yes"===i||"1"===i){var s=$this.closest("form"),n=s.attr("data-minimum-password-strength"),o=wp.passwordStrength.userInputBlacklist();o.push(s.find('input[data-id="user_email"]').val()),o.push(s.find('input[data-id="user_login"]').val());if(wp.passwordStrength.meter($this.val(),o)<n&&""!==$this.val()){s.find("#"+t+"_error").remove();var u='<label id="'+t+'_error" class="user-registration-error" for="'+a+'">'+r.password_strength_error+".</label>";s.find(".user-registration-password-hint").after(u)}}})}),e(function(){request_recaptcha_token()}),e(function(){e(".user-registration-EditProfileForm.edit-profile .field-country").length>0&&e(".field-country").each(function(){var r=e(this).find(".ur-data-holder").data("option-value"),a=e(this).find(".ur-data-holder").data("option-html"),t=e(this).find("select");r&&a&&(0===t.find('option[value="'+r+'"]').length&&t.append("<option class='ur-remove' selected='selected' value='"+r+"'>"+a+"</option>"),e(this).on("click",function(){e(this).find(".ur-remove").remove()}))})}),e(document).on("click",".password_preview",function(a){a.preventDefault();var t=e(this).hasClass("dashicons-hidden")?"show":"hide",i=e(this).closest(".user-registration-form-row").find('input[name="password"]');if(0===i.length&&(i=e(this).closest(".field-user_pass").find('input[name="user_pass"]')),0===i.length&&(i=e(this).closest(".field-user_confirm_password").find('input[name="user_confirm_password"]')),0===i.length&&(i=e(this).closest(".user-registration-form-row").find('input[name="password_current"]')),0===i.length&&(i=e(this).closest(".user-registration-form-row").find('input[name="password_1"]')),0===i.length&&(i=e(this).closest(".user-registration-form-row").find('input[name="password_2"]')),i.length>0)switch(t){case"show":i.attr("type","text"),e(this).removeClass("dashicons-hidden").addClass("dashicons-visibility"),e(this).attr("title",r.hide_password_title);break;case"hide":i.attr("type","password"),e(this).removeClass("dashicons-visibility").addClass("dashicons-hidden"),e(this).attr("title",r.show_password_title)}})}(jQuery);var google_recaptcha_user_registration,onloadURCallback=function(){0!==jQuery(".ur-frontend-form").find("form.register #ur-recaptcha-node #node_recaptcha_register").length&&(google_recaptcha_user_registration=grecaptcha.render("node_recaptcha_register",{sitekey:ur_google_recaptcha_code.site_key,theme:"light",style:"transform:scale(0.77);-webkit-transform:scale(0.77);transform-origin:0 0;-webkit-transform-origin:0 0;"}));0!==jQuery(".ur-frontend-form").find("form.login .ur-form-row .ur-form-grid #ur-recaptcha-node #node_recaptcha_login").length&&grecaptcha.render("node_recaptcha_login",{sitekey:ur_google_recaptcha_code.site_key,theme:"light",style:"transform:scale(0.77);-webkit-transform:scale(0.77);transform-origin:0 0;-webkit-transform-origin:0 0;"})};
