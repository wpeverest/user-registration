!function(e){var r=function(){var r=user_registration_params.ursL10n;e.fn.ur_form_submission=function(){return this.each(function(){var t=e(this),a=[],i=user_registration_params.form_required_fields,n={init:function(){},get_form_data:function(r){if(r===t.closest(".ur-frontend-form").attr("id")||e(".ur-frontend-form").find("form.edit-profile").hasClass("user-registration-EditProfileForm")){var a=this,i=[],s=n.separate_form_handler(""),o=[];e.each(s,function(){var r,t=e(this).attr("name"),s=e(this).attr("type");if(n.separate_form_handler('[name="'+t+'"]').length<2&&0>e.inArray(s,["radio"])){var d=a.get_fieldwise_data(e(this)),l=document.querySelector(".field-invite_code");"invite_code"===d.field_name?"none"!==l.style.display&&i.push(d):i.push(d)}else 0>e.inArray(t,o)&&o.push(t)});for(var d=0;d<o.length;d++){var l=n.separate_form_handler('[name="'+o[d]+'"]');l.get(0).tagName.toLowerCase();var f="undefined"!==l.eq(0).attr("type")?l.eq(0).attr("type"):"null",u=[];if(e.each(l,function(){var r=e(this),t="";switch(r.get(0).tagName.toLowerCase()){case"input":switch(f){case"checkbox":case"radio":t=r.prop("checked")?r.val():"";break;default:t=r.val()}break;case"select":case"textarea":t=r.val()}""!==t&&u.push(t)}),"checkbox"==f){if(""!==user_registration_params.is_payment_compatible){if("multiple_choice"==l.eq(0).attr("data-field")){e(document).trigger("user_registration_frontend_multiple_choice_data_filter",[u,l]);var p=JSON.stringify(u=l.closest(".field-multiple_choice").data("payment-value"))}else var p=JSON.stringify(u)}else if("multiple_choice"==l.eq(0).attr("data-field"))for(var c=u,p=0,m=0;m<c.length;m++)p+=c[m]<<0;else var p=JSON.stringify(u)}else if("radio"==f){if(""!==user_registration_params.is_payment_compatible){if("subscription_plan"==l.eq(0).attr("data-field")){if(e(document).trigger("user_registration_frontend_subscription_plan_data_filter",[u,l]),(selectedSubscriptionPlan=l.closest(".field-subscription_plan").find('input[name="subscription_plan[]"]:checked')).length>0)var p=JSON.stringify(selectedSubscriptionPlan.data("value")+":"+selectedSubscriptionPlan.val())}else var p=u[0]}else var p=u[0]}else var p=l.val();var g=o[d];g=g.replace("[]","");var h={value:p,field_type:f,label:l.eq(0).attr("data-label"),field_name:g};i.push(h)}return e(document).trigger("user_registration_frontend_form_data_filter",[i]),i}},get_fieldwise_data:function(r){var t={},n=r.get(0).tagName.toLowerCase(),s="undefined"!==r.attr("name")?r.attr("name"):"null",o=[];e(".field-phone, .field-billing_phone").each(function(){var r=e(this).find(".form-row").attr("id");e(this).find(".form-row").find("#"+r).hasClass("ur-smart-phone-field")&&o.push(e(this).find(".form-row").attr("id"))});var d="undefined"!==r.attr("type")?r.attr("type"):"null",l=r.get(0).className.split(" ")[0];switch(t.value="",n){case"input":var f=[];switch(d){case"checkbox":!r.closest(".field-privacy_policy").length>0?r.prop("checked")?(f.push(r.val()),t.value=JSON.stringify(f)):t.value="":t.value=r.prop("checked")?r.val():"";break;case"radio":t.value=r.prop("checked")?r.val():"";break;default:t.value=r.val()}ur_includes(o,s)&&(t.value=r.siblings('input[type="hidden"]').val());break;case"select":t.value=r.val();break;case"textarea":"wysiwyg"===l&&tinyMCE.triggerSave(),t.value=r.val()}return e(document).trigger("user_registration_frontend_form_data_render",[r,t]),t.field_type="undefined"!==r.eq(0).attr("type")?r.eq(0).attr("type"):"null",void 0!==r.attr("data-label")?t.label=r.attr("data-label"):r.prev().length&&"label"===r.prev().get(0).tagName.toLowerCase()?t.label=r.prev().text():t.label=t.field_type,void 0!==r.attr("name")&&""!==r.attr("name")?(t.field_name=r.attr("name"),t.field_name=t.field_name.replace("[]","")):t.field_name="",e.inArray(t.field_name,i.join(",").trim())>=0&&a.push(t.field_name),t},show_message:function(r,t,a,i){if(a.closest(".user-registration").find(".ur-message").remove(),e(".ur-frontend-form").find("form.edit-profile").hasClass("user-registration-EditProfileForm")){var n=e('<div class="user-registration-'+t+'"/>');n.append(r),e(".user-registration").find(".user-registration-MyAccount-navigation").length?n.insertBefore(".user-registration-MyAccount-navigation"):n.insertBefore(".ur-frontend-form")}else{var n=e('<div class="ur-message user-registration-'+t+'" id="ur-submit-message-node"/>');n.append(r),"1"===i?a.append(n):"2"===i?"message"==t?(a.closest(".entry-content").prepend(n),a.closest(".ur-frontend-form").hide()):a.append(n):a.prepend(n)}},separate_form_handler:function(r){var a="";return e(".ur-frontend-form").find("form.edit-profile").hasClass("user-registration-EditProfileForm")?t.find(".user-registration-profile-fields").find(".ur-edit-profile-field"+r):t.closest(".ur-frontend-form").find(".ur-form-grid").find(".ur-frontend-field"+r)},missing_attachment_handler:function r(t){var a=[];if(1<=t.length){t.each(function(){var r=e(this).attr("id");-1===e.inArray(r,a)&&a.push(r)});for(var i=0;i<a.length;i++){for(var n=e("#"+a[i]).val().split(","),s=n.length;s>=0;s--)e.isNumeric(n[s])||n.splice(s,1);e("#"+a[i]).val(n)}}}};n.init(),({init:function(){this.form_submit_event(),this.edit_profile_event()},form_submit_event:function(){e(".ur-frontend-form").each(function(){var t=e(this);t.find("form.register").off("submit").on("submit",function(a){if(a.preventDefault(),t.find("form.register button.ur-submit-button").is(":hidden")||t.find("form.register button.ur-submit-button").is(":disabled"))return!1;var i,s=e(this);if(e.extend(e.validator.messages,{required:user_registration_params.message_required_fields,url:user_registration_params.message_url_fields,email:user_registration_params.message_email_fields,number:user_registration_params.message_number_fields,confirmpassword:user_registration_params.message_confirm_password_fields}),s.find(".user-registration-password-strength").length>0){var o=s.find(".user-registration-password-strength").attr("data-current-strength"),d=s.find(".user-registration-password-strength").attr("data-min-strength");if(parseInt(o,0)<parseInt(d,0)){if(""!=s.find("#user_pass").val()){s.find("#user_pass_error").remove();var l='<label id="user_pass_error" class="user-registration-error" for="user_pass">'+r.password_strength_error+".</label>";s.find(".user-registration-password-hint").after(l),s.find("#user_pass").attr("aria-invalid",!0),s.find("#user_pass").trigger("focus")}return!1}}var f=s.find(".ur-smart-phone-field");if("true"===f.attr("aria-invalid")){var u=f.closest("p.form-row");u.find("#"+f.data("id")+"-error").remove();var p='<label id="'+f.data("id")+'-error" class="user-registration-error" for="'+f.data("id")+'">'+user_registration_params.message_validate_phone_number+"</label>";return u.append(p),u.find("#"+f.data("id")).attr("aria-invalid",!0),!0}var c=s.find(".urfu-file-input");if(n.missing_attachment_handler(c),1===s.find(".uraf-profile-picture-upload").find(".user-registration-error").length){var m=s.find(".uraf-profile-picture-upload").find(".uraf-profile-picture-input"),u=s.find(".uraf-profile-picture-upload");u.find("#"+m.attr("name")+"-error").remove(),u.find(".uraf-profile-picture-file-error").remove();var g='<label id="'+m.attr("name")+'-error" class="user-registration-error" for="'+m.attr("name")+'">'+user_registration_params.message_required_fields+"</label>";u.find("button.wp_uraf_profile_picture_upload").after(g)}if(e(document).trigger("user_registration_frontend_validate_before_form_submit",[s]),!(0<s.find(".dz-error-message").length||s.find("#user_registration_stripe_gateway").find(".user-registration-error").length>0&&s.find("#user_registration_stripe_gateway").find(".user-registration-error").is(":visible"))&&s.valid()){s.find(".ur-submit-button").prop("disabled",!0);var h=0,v="0",b="";b="hcaptcha"===user_registration_params.recaptcha_type?s.find('[name="h-captcha-response"]').val():"cloudflare"===user_registration_params.recaptcha_type?s.find('[name="cf-turnstile-response"]').val():s.find('[name="g-recaptcha-response"]').val();try{i=JSON.stringify(n.get_form_data(s.closest(".ur-frontend-form").attr("id")))}catch($){i=""}1===e(this).closest("form").find('input[name="ur-user-form-id"]').length&&(h=e(this).closest("form").find('input[name="ur-user-form-id"]').val()),1===e(this).closest("form").find('input[name="ur_frontend_form_nonce"]').length&&(v=e(this).closest("form").find('input[name="ur_frontend_form_nonce"]').val());var y={action:"user_registration_user_form_submit",security:user_registration_params.user_registration_form_data_save,form_data:i,captchaResponse:b,form_id:h,ur_frontend_form_nonce:v},w={};if(e(document).trigger("user_registration_frontend_before_form_submit",[y,s,w]),void 0!==w.message&&""!==w.message){n.show_message("<p>"+w.message+"</p>","error",s,"1"),s.find(".ur-submit-button").prop("disabled",!1);return}s.find(".ur-submit-button").find("span").addClass("ur-front-spinner"),e.ajax({url:user_registration_params.ajax_url,data:y,type:"POST",async:!0,complete:function(t){var a=[];if(a.status=!0,e(document).trigger("user_registration_frontend_before_ajax_complete_success_message",[t,a,s]),a.status){s.find(".ur-submit-button").find("span").removeClass("ur-front-spinner");var i=s.find('input[name="ur-redirect-url"]').val(),o=e('<ul class=""/>'),d="error";try{var l=JSON.parse(t.responseText),f=l.data.redirect_timeout?l.data.redirect_timeout:2e3;void 0!==l.success&&!0===l.success&&void 0!==l.data.paypal_redirect&&window.setTimeout(function(){window.location=l.data.paypal_redirect},f),void 0!==l.success&&!0===l.success&&(d="message"),"message"===d?(s.find(".user-registration-password-hint").remove(),s.find(".user-registration-password-strength").remove(),"admin_approval"==l.data.form_login_option?o.append("<li>"+r.user_under_approval+"</li>"):"email_confirmation"==l.data.form_login_option||"admin_approval_after_email_confirmation"==l.data.form_login_option?o.append("<li>"+r.user_email_pending+"</li>"):"payment"==l.data.form_login_option?o.append("<li>"+l.data.message+"</li>"):o.append((l.data.message,r.user_successfully_saved)),void 0!==l.data.auto_password_generation_success_message&&o.append("<li>"+l.data.auto_password_generation_success_message+"</li>"),e(".ur-input-count").text("0"),s[0].reset(),s.find("#profile_pic_url").length&&e("#profile_pic_url").val(""),jQuery("#billing_country").trigger("change"),jQuery("#shipping_country").trigger("change"),void 0!==l.data.role_based_redirect_url&&(i=l.data.role_based_redirect_url),void 0!==i&&""!==i?(e(document).trigger("user_registration_frontend_before_redirect_url",[i]),window.setTimeout(function(){window.location=i},f)):void 0!==l.data.auto_login&&l.data.auto_login&&(e(document).trigger("user_registration_frontend_before_auto_login"),window.setTimeout(function(){void 0!==l.data.redirect_url&&l.data.redirect_url?window.location=l.data.redirect_url:location.reload()},f))):"error"===d&&("object"==typeof l.data.message?e.each(l.data.message,function(e,r){o.append("<li>"+r+"</li>")}):o.append("<li>"+l.data.message+"</li>"))}catch(u){o.append("<li>"+u.message+"</li>")}var p=JSON.parse(t.responseText).data.success_message_positon;if(l.data.hasOwnProperty("message")&&l.data.message.hasOwnProperty("individual")){var c=[];e.each(s.find(".ur-field-item").find(".ur-frontend-field"),function(r){var t=e(this).attr("id");c.push(t)});var m="";e.each(l.data.message,function(e,r){if(c.includes(e)){m=e;var t=s.find(".ur-field-item").find("input[id='"+e+"'], textarea[id='"+e+"']");t.closest(".ur-field-item").find(".user-registration-error").remove(),t.closest(".form-row").append('<label id="'+e+'-error" class="user-registration-error" for="'+e+'">'+r+"</label>")}}),e(document).trigger("ur_handle_field_error_messages",[s,m])}else n.show_message(o,d,s,p);"1"===p?e(window).scrollTop(s.find(".ur-button-container").offset().top):e(window).scrollTop(s.closest(".ur-frontend-form").offset().top),e(document).trigger("user_registration_frontend_after_ajax_complete",[t.responseText,d,s,]),s.find(".ur-submit-button").prop("disabled",!1)}}})}})})},edit_profile_event:function(){e("form.user-registration-EditProfileForm").off("submit").on("submit",function(r){var t,a=e(this);e.extend(e.validator.messages,{required:user_registration_params.message_required_fields,url:user_registration_params.message_url_fields,email:user_registration_params.message_email_fields,number:user_registration_params.message_number_fields});var i=a.find(".ur-smart-phone-field");if("true"===i.attr("aria-invalid")){var s=i.closest("p.form-row");s.find("#"+i.data("id")+"-error").remove();var o='<label id="'+i.data("id")+'-error" class="user-registration-error" for="'+i.data("id")+'">'+user_registration_params.message_validate_phone_number+"</label>";return s.append(o),s.find("#"+i.data("id")).attr("aria-invalid",!0),!0}if(1===a.find(".uraf-profile-picture-upload").find(".user-registration-error").length){var d=a.find(".uraf-profile-picture-upload").find(".uraf-profile-picture-input"),s=a.find(".uraf-profile-picture-upload");s.find("#"+d.attr("name")+"-error").remove(),s.find(".uraf-profile-picture-file-error").remove();var l='<label id="'+d.attr("name")+'-error" class="user-registration-error" for="'+d.attr("name")+'">'+user_registration_params.message_required_fields+"</label>";s.find("button.wp_uraf_profile_picture_upload").after(l)}if(!a.valid()||1===a.find(".user-registration-profile-picture-error").find(".user-registration-error").length)return!1;r.preventDefault(),a.find(".user-registration-submit-Button").prop("disabled",!0);var f=a.find(".urfu-file-input");n.missing_attachment_handler(f);try{t=n.get_form_data();var u=e("#profile_pic_url").val();t.push({value:u,field_name:"user_registration_profile_pic_url"}),t=JSON.stringify(t)}catch(p){t=""}var c={action:"user_registration_update_profile_details",security:user_registration_params.user_registration_profile_details_save,form_data:t};e(document).trigger("user_registration_frontend_before_edit_profile_submit",[c,a]),a.find(".user-registration-submit-Button").find("span").addClass("ur-front-spinner"),e.ajax({type:"POST",url:user_registration_params.ajax_url,dataType:"JSON",data:c,complete:function(r){a.find("span.ur-front-spinner").removeClass("ur-front-spinner"),a.closest(".user-registration").find(".user-registration-error").remove(),a.closest(".user-registration").find(".user-registration-message").remove();var t=e('<ul class=""/>'),i="error";try{var s=JSON.parse(r.responseText);if(void 0!==s.success&&!0===s.success&&(i="message",void 0!==s.data.profile_pic_id&&(a.find(".ur_removed_profile_pic").val(""),a.find(".uraf-profile-picture-remove").length>0&&a.find(".uraf-profile-picture-remove").data("attachment-id",s.data.profile_pic_id),a.find(".profile-pic-remove").length>0&&a.find(".profile-pic-remove").data("attachment-id",s.data.profile_pic_id))),s.data.hasOwnProperty("message")&&s.data.message.hasOwnProperty("individual")){var o=[];e.each(a.find(".ur-form-row").find(".ur-field-item").find(".ur-edit-profile-field"),function(r){var t=e(this).attr("id");o.push(t)}),e.each(s.data.message,function(e,r){if(e="user_registration_"+e,o.includes(e)){var t='<label id="'+e+'-error" class="user-registration-error" for="'+e+'">'+r+"</label>";a.find(".ur-form-row").find(".ur-field-item").find("input[id='"+e+"'], textarea[id='"+e+"']").closest(".form-row").append(t)}})}else"object"==typeof s.data.message?e.each(s.data.message,function(e,r){t.append("<li>"+r+"</li>")}):(t.append("<li>"+s.data.message+"</li>"),void 0!==s.data.userEmailPendingMessage&&(e(".user-registration-info.user-email-change-update-notice").remove(),n.show_message(e('<ul class=""/>').append("<li>"+s.data.userEmailUpdateMessage+"</li>"),"info user-email-change-update-notice",a,"0"),e("input#user_registration_user_email").next("div.email-updated").length&&e("input#user_registration_user_email").next("div.email-updated").remove(),e(s.data.userEmailPendingMessage).insertAfter(e("input#user_registration_user_email")),e("input#user_registration_user_email").val(s.data.oldUserEmail))),n.show_message(t,i,a,"0")}catch(d){t.append("<li>"+d.message+"</li>")}e(document).trigger("user_registration_edit_profile_after_ajax_complete",[r,a]),a.find(".user-registration-submit-Button").prop("disabled",!1),e(window).scrollTop(e(".user-registration").position())}})})}}).init()})},e(function(){e(".ur-submit-button").on("click",function(){e(this).closest("form.register").ur_form_submission()}),e(".user-registration-submit-Button").on("click",function(){e(".ur-frontend-form").find("form.edit-profile").hasClass("user-registration-EditProfileForm")&&user_registration_params.ajax_submission_on_edit_profile&&e("form.user-registration-EditProfileForm").ur_form_submission()}),e(document).ready(function(){if(e(".ur-flatpickr-field").length){var r=[];e(".ur-flatpickr-field").each(function(){var t=e(this),a=r.find(function(e){return e.element==t[0]});if(a)a.open();else{var i=t.data("id"),n=t.closest(".ur-field-item").find("#formated_date").val();if(0<e(".ur-frontend-form").length)var s=e(".ur-frontend-form #"+i).attr("type","text").val(n);else var s=e(".woocommerce-MyAccount-content #"+i).attr("type","text").val(n);t.attr("data-date-format",s.data("date-format")),s.data("mode")&&t.attr("data-mode","range"),t.attr("data-locale",s.data("locale")),t.attr("data-min-date",s.data("min-date")),t.attr("data-max-date",s.data("max-date")),t.attr("data-default-date",n),a=t.flatpickr({disableMobile:!0,onChange:function(r,t,a){e("#"+i).val(t)}}),r.push(a)}})}}),e(".ur-frontend-form").each(function(){e(this).find("form.register").on("focusout","#user_pass, #password_1",function(){$this=e(this);var t=e(this).attr("name"),a=e(this).data("id");if($this.closest("form").attr("data-enable-strength-password")){var i=$this.closest("form"),n=i.attr("data-minimum-password-strength"),s=[];if((s="function"==typeof wp.passwordStrength.userInputDisallowedList?wp.passwordStrength.userInputDisallowedList():wp.passwordStrength.userInputBlacklist()).push(i.find('input[data-id="user_email"]').val()),s.push(i.find('input[data-id="user_login"]').val()),wp.passwordStrength.meter($this.val(),s)<n&&""!==$this.val()){i.find("#"+a+"_error").remove();var o='<label id="'+a+'_error" class="user-registration-error" for="'+t+'">'+r.password_strength_error+".</label>";i.find(".user-registration-password-hint").after(o)}}})})}),e(function(){e("textarea").each(function(){var r,t=e(this).closest(".ur-field-item");if(t.find(".ur-input-count").length>0){var a=e(this).val().trim();r="characters"===t.find(".ur-input-count").data("count-type")?a.length:""===a?0:a.split(/\s+/).length}t.find(".ur-input-count").text(r)})}),e(function(){e(".user-registration-EditProfileForm.edit-profile .field-country").length>0&&e(".field-country").each(function(){var r=e(this).find(".ur-data-holder").data("option-value"),t=e(this).find(".ur-data-holder").data("option-html"),a=e(this).find("select");r&&t&&(0===a.find('option[value="'+r+'"]').length&&a.append("<option class='ur-remove' selected='selected' value='"+r+"'>"+t+"</option>"),e(this).on("click",function(){e(this).find(".ur-remove").remove()}))})})};e("textarea").on("input",function r(){e("textarea").each(function(){var r,t=e(this).closest(".ur-field-item");if(t.find(".ur-input-count").length>0){var a=e(this).val().trim();r="characters"===t.find(".ur-input-count").data("count-type")?a.length:""===a?0:a.split(/\s+/).length}t.find(".ur-input-count").text(r)})}),e(function(){e(".input-checkbox").each(function(){var r=e(this).attr("data-id");e('input[name="'+r+'[]"]:checked').length==e('[data-id = "'+r+'" ]').length&&e('[data-check = "'+r+'" ]').prop("checked",!0)}),e('input[type="checkbox"]#checkall').on("click",function(){var r=e(this).attr("data-check");e('[data-id = "'+r+'" ]').prop("checked",e(this).prop("checked"))}),e(".input-checkbox").on("change",function(){var r=e(this).attr("data-id");!1===e(this).prop("checked")&&e('[data-check = "'+r+'" ]').prop("checked",!1),e('input[name="'+r+'[]"]:checked').length==e('[data-id = "'+r+'" ]').length&&e('[data-check = "'+r+'" ]').prop("checked",!0)})}),r(),e(window).on("load",function(){r()})}(jQuery);function ur_includes(e,r){if(Array.isArray(e)){for(var t=0;t<e.length;t+=1)if(e[t]===r)return!0}return!1}
