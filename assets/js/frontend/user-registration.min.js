!function(e){var r=user_registration_params.ursL10n;e.fn.ur_form_submission=function(){return this.each(function(){var t=e(this),a=[],s=user_registration_params.form_required_fields,n={init:function(){},get_form_data:function(){var r=this,a=[],s=t.closest(".ur-frontend-form").find(".ur-form-grid").find(".ur-frontend-field");return e.each(s,function(){var t=r.get_fieldwise_data(e(this));a.push(t)}),a},get_fieldwise_data:function(r){var t={},n=r.get(0).tagName.toLowerCase();switch(t.value="",n){case"input":case"select":case"textarea":t.value=r.val()}return t.field_type=r.attr("id").replace("ur-input-type-",""),r.attr("data-label")!==undefined?t.label=r.attr("data-label"):"label"===r.prev().get(0).tagName.toLowerCase()?t.label=r.prev().text():t.label=t.field_type,r.attr("name")!==undefined&&""!==r.attr("name")?t.field_name=r.attr("name"):t.field_name="",e.inArray(t.field_name,e.trim(s))>=0&&a.push(t.field_name),t},show_message:function(r,t,a){a.find(".ur-message").remove();var s=e('<div class="ur-message user-registration-'+t+'" id="ur-submit-message-node"/>');s.addClass(t),s.append(r),a.append(s)}},i={init:function(){this.form_submit_event()},form_submit_event:function(){t.on("submit",function(a){a.preventDefault();var s;try{s=JSON.stringify(n.get_form_data())}catch(f){s=""}var i=0;1===e(this).closest("form").find('input[name="ur-user-form-id"]').length&&(i=e(this).closest("form").find('input[name="ur-user-form-id"]').val());var o="0";1===e(this).closest("form").find('input[name="ur_frontend_form_nonce"]').length&&(o=e(this).closest("form").find('input[name="ur_frontend_form_nonce"]').val());var u={action:"user_registration_user_form_submit",security:user_registration_params.user_registration_form_data_save,form_data:s,form_id:i,ur_frontend_form_nonce:o};t.find(".ur-submit-button").find("span").addClass("ur-front-spinner"),e.ajax({url:user_registration_params.ajax_url,data:u,type:"POST",beforeSend:function(){},complete:function(a){t.find(".ur-submit-button").find("span").removeClass("ur-front-spinner");var s=e('<ul class=""/>'),i="error";try{var o=e.parseJSON(a.responseText);"undefined"!=typeof o.success&&!0===o.success&&(i="message"),"object"==typeof o.data.message&&e.each(o.data.message,function(){e("<li/>").text(this).appendTo(s)}),"message"===i&&(s.append("<li>"+r.user_successfully_saved+"</li>"),t[0].reset(),e(".user-registration-password-hint").remove(),e(".user-registration-password-strength").remove())}catch(u){s.addClass(i),s.append("<li>"+u.message+"</li>")}s.addClass(i),n.show_message(s,i,t)}})})}};n.init(),i.init()})},e(function(){e(".ur-frontend-form form.register").ur_form_submission()})}(jQuery);