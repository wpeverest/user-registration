jQuery(function(e){var r=ur_login_params.ur_login_form_save_nonce;e.ajax({url:user_registration_params.ajax_url,data:{action:"user_registration_get_recent_nonce",nonce_for:"login"},type:"POST",async:!0,complete:function(e){var s=JSON.parse(e.responseText);s.success&&(r=s.data)}}),e(".ur-frontend-form").find("form.login").each(function(){var s=e(this);s.find("#user_registration_ajax_login_submit").on("click",function(a){a.preventDefault();var n=e(this),t=n.closest("form").find('input[name="username"]').val(),i=n.closest("form").find('input[name="password"]').val(),o=n.closest("form").find('input[name="rememberme"]').val(),u=n.closest("form").find('input[name="redirect"]').val();if("hCaptcha"===ur_login_params.recaptcha_type)var l=n.closest("form").find('[name="h-captcha-response"]').val();else if("cloudflare"===ur_login_params.recaptcha_type)l=n.closest("form").find('[name="cf-turnstile-response"]').val();else l=n.closest("form").find('[name="g-recaptcha-response"]').val();var m=ur_login_params.ajax_url+"?action=user_registration_ajax_login_submit&security="+r;window.location.href.indexOf("pl=true")>-1&&(m+="&pl=true"),n.closest("form").find(".ur-submit-button span").addClass("ur-spinner");var c={username:t,password:i,CaptchaResponse:l,redirect:u};n.closest("form").find('input[name="rememberme"]').is(":checked")&&(c.rememberme=o),e.ajax({type:"POST",url:m,data:c,success:function(r){n.closest("form").find(".ur-submit-button span").removeClass("ur-spinner"),0==r.success?(e(document).trigger("user_registration_after_login_failed",[n]),n.closest("#user-registration").find(".user-registration-error").remove(),n.closest("").find(".user-registration-message").remove(),n.closest(".ur-frontend-form").prepend('<ul class="user-registration-error">'+r.data.message+"</ul>")):r.data.status?(n.closest("#user-registration").find(".user-registration-error").remove(),n.closest("#user-registration").find(".user-registration-message").remove(),n.closest(".ur-frontend-form").prepend('<ul class="user-registration-message">'+r.data.message+"</ul>"),n.closest("#user-registration").find("input#username").val("")):window.location.href=r.data.message}}).fail(function(){n.closest("#user-registration").find(".user-registration-error").remove(),n.closest("form").find(".ur-submit-button span").removeClass("ur-spinner");var r=e("<input>",{type:"hidden",name:"login",value:"Login"}),a=e("<input>",{type:"hidden",name:"resubmitted",value:!0});s.append(r),s.append(a),s[0].submit()})})})});