!function(u){var e=u(".ur-frontend-form form"),r="",a=(e.hasClass("edit-profile")&&(r="user_registration_"),{$user_registration:e,init:function(){this.add_validation_methods(),this.load_validation(),this.init_inputMask(),this.init_tiptip(),this.$user_registration.on("input validate change",".input-text, select, input:checkbox input:radio",this.validate_field)},init_inputMask:function(){"undefined"!=typeof u.fn.inputmask&&u(".ur-masked-input").inputmask()},init_tiptip:function(){"undefined"!=typeof tipTip&&u(".user-registration-help-tip").tipTip({attribute:"title",fadeIn:50,fadeOut:50,delay:200})},add_validation_methods:function(){u.validator.methods.email=function(e,a){var i=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return this.optional(a)||i.test(e)},u.validator.addMethod("lengthValidator",function(e,a,i){return e.length<=i},u.validator.format("Please enter less than {0} characters.")),u.validator.addMethod("SpecialCharacterValidator",function(e,a){var i=new RegExp(/^(?=.{3,20}$)[a-zA-Z][a-zA-Z0-9_.]*(?: [a-zA-Z0-9]+)*$/);return this.optional(a)||i.test(e)},user_registration_params.message_username_character_fields),u.validator.addMethod("checkLimit",function(e,a,i){var i=parseInt(i||0,10),t="";return u(a).closest(".field-checkbox").length?t=u(a).closest("ul").find('input[type="checkbox"]:checked'):u(a).closest(".field-multi_select2").length?t=u(a).val():u(a).closest(".field-multiple_choice").length&&(t=u(a).closest("ul").find('input[type="checkbox"]:checked')),0===i||t.length<=i},u.validator.format("Please select no more than {0} options."))},load_validation:function(){if("undefined"==typeof u.fn.validate)return!1;var i=this;i.$user_registration.each(function(){var e=u(this),a=i.custom_validation(e);i.custom_validation_messages(),e.validate({errorClass:"user-registration-error",validClass:"user-registration-valid",rules:a.rules,messages:a.messages,focusInvalid:!1,invalidHandler:function(e,a){a.numberOfInvalids()&&u(window).scrollTop(u(a.errorList[0].element).offset().top)},errorPlacement:function(e,a){var i;a.is("#password_2")?a.parent().after(e):"radio"===a.attr("type")||"checkbox"===a.attr("type")||"password"===a.attr("type")?a.parent().parent().parent().append(e):a.is("select")&&a.attr("class").match(/date-month|date-day|date-year/)?0===a.parent().find("label.user-registration-error:visible").length&&a.parent().find("select:last").after(e):a.hasClass("ur-smart-phone-field")?((i=a.closest("p.form-row")).find("#"+a.data("id")+"-error").remove(),i.append(e)):"number"===a.attr("type")&&a.hasClass("ur-range-input")?e.insertAfter(a.closest(".ur-range-row").find(".ur-range-number")):a.hasClass("urfu-file-input")||a.closest(".field-multi_select2").length?e.insertAfter(a.parent().parent()):e.insertAfter(a)},highlight:function(e,a,i){e=u(e);e.closest(".form-row"),e.attr("name")},unhighlight:function(e,a,i){var e=u(e),t=e.closest(".form-row"),s=e.attr("name");("radio"===e.attr("type")||"checkbox"===e.attr("type")?t.find("input[name='"+s+"']"):e).addClass(i).removeClass(a),t.removeClass("user-registration-has-error")},submitHandler:function(e){return!(u(e).hasClass("register")||u(e).hasClass("edit-profile")&&"yes"===user_registration_params.ajax_submission_on_edit_profile)}})})},validate_field:function(e){u.extend(u.validator.messages,{required:user_registration_params.message_required_fields,url:user_registration_params.message_url_fields,email:user_registration_params.message_email_fields,number:user_registration_params.message_number_fields,confirmpassword:user_registration_params.message_confirm_password_fields});var a=u(this),i=a.closest(".form-row"),t=!0,s=i.is(".validate-required"),r=i.is(".validate-email"),e=e.type;"input"===e&&i.removeClass("user-registration-invalid user-registration-invalid-required-field user-registration-invalid-email user-registration-validated"),"validate"!==e&&"change"!==e||(s&&("checkbox"===a.attr("type")&&!a.is(":checked")||""===a.val())&&(i.removeClass("user-registration-validated").addClass("user-registration-invalid user-registration-invalid-required-field"),t=!1),r&&a.val()&&(new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(a.val())||(i.removeClass("user-registration-validated").addClass("user-registration-invalid user-registration-invalid-email"),t=!1)),t&&i.removeClass("user-registration-invalid user-registration-invalid-required-field user-registration-invalid-email").addClass("user-registration-validated"))},custom_validation:function(e){var a={},i={},t=(e.find("#user_confirm_email").length&&(t=e.closest(".ur-frontend-form").attr("id"),a.user_confirm_email={equalTo:"#"+t+" #user_email"},i.user_confirm_email=user_registration_params.message_confirm_email_fields),e.hasClass("edit-password")?(a.password_2={equalTo:"#password_1"},i.password_2=user_registration_params.message_confirm_password_fields):e.hasClass("register")&&e.find("#user_confirm_password").length&&(t=e.closest(".ur-frontend-form").attr("id"),a.user_confirm_password={equalTo:"#"+t+" #user_pass"},i.user_confirm_password=user_registration_params.message_confirm_password_fields),e.find("#user_login")),s={},t=(t.length&&void 0!==t.data("username-length")&&(s.lengthValidator=t.data("username-length")),"no"==t.data("username-character")&&(s.SpecialCharacterValidator=t.data("username-character")),a.user_login=s,e.find(".field-checkbox")),s=e.find(".field-multi_select2");return multiple_choice_div=e.find(".field-multiple_choice"),t.length&&t.each(function(){a[r+u(this).data("field-id")+"[]"]={checkLimit:u(this).find("ul").data("choice-limit")?u(this).find("ul").data("choice-limit"):0}}),s.length&&s.each(function(){a[r+u(this).data("field-id")+"[]"]={checkLimit:u(this).find("select").data("choice-limit")?u(this).find("select").data("choice-limit"):0}}),multiple_choice_div.length&&multiple_choice_div.each(function(){a[r+u(this).data("field-id")+"[]"]={checkLimit:u(this).find("ul").data("choice-limit")?u(this).find("ul").data("choice-limit"):0}}),{rules:a,messages:i}},custom_validation_messages:function(){u.validator.messages.required=user_registration_params.message_required_fields,u.validator.messages.url=user_registration_params.message_url_fields,u.validator.messages.email=user_registration_params.message_email_fields,u.validator.messages.number=user_registration_params.message_number_fields,u.validator.messages.confirmpassword=user_registration_params.message_confirm_password_fields,u.validator.messages.max=function(e,a){return user_registration_params.message_confirm_number_field_max.replace("%qty%",a.max)},u.validator.messages.min=function(e,a){return user_registration_params.message_confirm_number_field_min.replace("%qty%",a.min)},u.validator.messages.step=function(e,a){return user_registration_params.message_confirm_number_field_step.replace("%qty%",a.step)}}});u(window).on("load",function(){a.init()})}(jQuery);